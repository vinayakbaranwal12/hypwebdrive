{"version":3,"file":"date-picker.de38fb84.js","sources":["../../../common/resources/client/ui/layout/dashboard-layout-context.ts","../../../common/resources/client/utils/hooks/use-block-body-overflow.ts","../../../common/resources/client/ui/layout/dashboard-layout.tsx","../../../common/resources/client/ui/layout/dashboard-content.tsx","../../../common/resources/client/ui/layout/dashboard-sidenav.tsx","../../../common/resources/client/icons/material/MenuOpen.tsx","../../../common/resources/client/ui/layout/dashboard-navbar.tsx","../../../common/resources/client/datatable/filters/backend-filter.ts","../../../common/resources/client/utils/date/start-of-day.ts","../../../common/resources/client/utils/date/end-of-day.ts","../../../common/resources/client/i18n/get-user-timezone.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../common/resources/client/icons/material/DateRange.tsx","../../../common/resources/client/ui/forms/input-field/input.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../common/resources/client/ui/forms/input-field/date/utils.ts","../../../common/resources/client/ui/forms/input-field/date/use-base-date-picker-state.ts","../../../common/resources/client/i18n/use-current-date-time.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../common/resources/client/icons/material/ArrowRightAlt.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/adjust-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/set-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/page-step.ts","../../../common/resources/client/ui/forms/input-field/date/segments/editable-date-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/literal-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../common/resources/client/ui/forms/input-field/date/segments/date-segment-list.tsx","../../../common/resources/client/icons/material/KeyboardArrowLeft.tsx","../../../common/resources/client/icons/material/KeyboardArrowRight.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-cell.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-month.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar.tsx","../../../common/resources/client/i18n/formatted-date-time-range.tsx","../../../common/resources/client/ui/list/list.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-preset-list.tsx","../../../common/resources/client/utils/hooks/is-tablet-media-query.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../common/resources/client/datatable/filters/timestamp-filters.ts","../../../common/resources/client/ui/images/avatar.tsx","../../../common/resources/client/datatable/filters/backend-filters-url-key.ts","../../../common/resources/client/datatable/filters/utils/decode-backend-filters.ts","../../../common/resources/client/datatable/filters/utils/encode-backend-filters.ts","../../../common/resources/client/datatable/filters/backend-filter-url-params.ts","../../../common/resources/client/ui/tables/table-style.ts","../../../common/resources/client/utils/keybinds/is-ctrl-key-pressed.ts","../../../common/resources/client/ui/tables/navigate-grid.ts","../../../common/resources/client/ui/tables/table-context.ts","../../../common/resources/client/ui/tables/checkbox-cell.tsx","../../../common/resources/client/ui/tables/table-cell.tsx","../../../common/resources/client/ui/interactions/use-pointer-events.ts","../../../common/resources/client/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../common/resources/client/ui/tables/table-row.tsx","../../../common/resources/client/icons/material/ArrowDownward.tsx","../../../common/resources/client/ui/tables/header-cell.tsx","../../../common/resources/client/ui/tables/select-all-cell.tsx","../../../common/resources/client/ui/tables/table.tsx","../../../common/resources/client/icons/material/Search.tsx","../../../common/resources/client/datatable/filters/panels/select-filter-panel.tsx","../../../common/resources/client/datatable/filters/panels/date-filter-panel.tsx","../../../common/resources/client/users/queries/use-normalized-models.ts","../../../common/resources/client/users/queries/use-normalized-model.ts","../../../common/resources/client/ui/forms/normalized-model-field.tsx","../../../common/resources/client/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-operator-names.ts","../../../common/resources/client/datatable/filters/panels/input-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-control.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list.tsx","../../../common/resources/client/icons/material/Add.tsx","../../../common/resources/client/icons/material/FileDownload.tsx","../../../common/resources/client/uploads/utils/download-file-from-url.ts","../../../common/resources/client/ui/forms/input-field/chip-field/chip-list.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/string-to-chip-value.ts","../../../common/resources/client/ui/forms/input-field/chip-field/chip-field.tsx","../../../common/resources/client/ui/forms/toggle/switch.tsx","../../../common/resources/client/icons/material/Delete.tsx","../../../common/resources/client/ui/interactions/dnd/drag-state.ts","../../../common/resources/client/ui/interactions/interactable-event.ts","../../../common/resources/client/ui/interactions/active-interaction.ts","../../../common/resources/client/ui/interactions/utils/dom-rect-to-obj.ts","../../../common/resources/client/ui/interactions/dnd/update-rects.ts","../../../common/resources/client/ui/interactions/dnd/use-draggable.ts","../../../common/resources/client/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../common/resources/client/utils/array/async-iterable-to-array.ts","../../../common/resources/client/ui/interactions/dnd/use-droppable.ts","../../../common/resources/client/auth/user.ts","../../../common/resources/client/icons/material/Link.tsx","../../../common/resources/client/icons/material/MoreVert.tsx","../../../node_modules/@tanstack/react-virtual/build/esm/index.js","../../../common/resources/client/uploads/hooks/file-entry-urls.ts","../../../common/resources/client/uploads/preview/file-preview-context.ts","../../../common/resources/client/uploads/preview/file-preview/default-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/image-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/text-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/video-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/audio-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/pdf-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/word-document-file-preview.tsx","../../../common/resources/client/uploads/preview/available-previews.ts","../../../common/resources/client/icons/material/ChevronLeft.tsx","../../../common/resources/client/uploads/file-type-icon/file-thumbnail.tsx","../../../common/resources/client/uploads/preview/file-preview-container.tsx","../../../common/resources/client/uploads/preview/file-preview-dialog.tsx","../../../common/resources/client/admin/file-entry/file-entry-index-filters.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/date-picker.tsx"],"sourcesContent":["import {createContext} from 'react';\n\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\n\nexport interface DashboardContextValue {\n  leftSidenavStatus: DashboardSidenavStatus;\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus: DashboardSidenavStatus;\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\n  isMobileMode: boolean | null;\n  leftSidenavCanBeCompact?: boolean;\n  name: string;\n}\n\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\n  null!\n);\n","import {useEffect} from 'react';\n\nexport function useBlockBodyOverflow() {\n  useEffect(() => {\n    document.documentElement.classList.add('no-page-overflow');\n    return () => {\n      document.documentElement.classList.remove('no-page-overflow');\n    };\n  }, []);\n}\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\nimport {\n  DashboardLayoutContext,\n  DashboardSidenavStatus,\n} from './dashboard-layout-context';\nimport {Underlay} from '../overlays/underlay';\nimport {AnimatePresence} from 'framer-motion';\nimport {useControlledState} from '@react-stately/utils';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {\n  getFromLocalStorage,\n  setInLocalStorage,\n} from '../../utils/hooks/local-storage';\nimport {useBlockBodyOverflow} from '../../utils/hooks/use-block-body-overflow';\nimport clsx from 'clsx';\n\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\n  name: string;\n  leftSidenavCanBeCompact?: boolean;\n  leftSidenavStatus?: DashboardSidenavStatus;\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\n  rightSidenavStatus?: DashboardSidenavStatus;\n  initialRightSidenavStatus?: DashboardSidenavStatus;\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\n  height?: string;\n}\nexport function DashboardLayout({\n  children,\n  leftSidenavStatus: leftSidenav,\n  onLeftSidenavChange,\n  rightSidenavStatus: rightSidenav,\n  initialRightSidenavStatus,\n  onRightSidenavChange,\n  name,\n  leftSidenavCanBeCompact,\n  height = 'h-full',\n  ...domProps\n}: DashboardLayoutProps) {\n  useBlockBodyOverflow();\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const isCompactModeInitially = useMemo(() => {\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\n  }, [name]);\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\n    leftSidenav,\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\n    onLeftSidenavChange\n  );\n\n  const rightSidenavStatusDefault = useMemo(() => {\n    if (isMobile) {\n      return 'closed';\n    }\n    if (initialRightSidenavStatus != null) {\n      return initialRightSidenavStatus;\n    }\n    const userSelected = getFromLocalStorage(\n      `${name}.sidenav.right.position`,\n      'open'\n    );\n    if (userSelected != null) {\n      return userSelected;\n    }\n    return initialRightSidenavStatus || 'closed';\n  }, [isMobile, name, initialRightSidenavStatus]);\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\n    rightSidenav,\n    rightSidenavStatusDefault,\n    onRightSidenavChange\n  );\n  const setRightSidenavStatus = useCallback(\n    (status: DashboardSidenavStatus) => {\n      _setRightSidenavStatus(status);\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\n    },\n    [_setRightSidenavStatus, name]\n  );\n\n  const shouldShowUnderlay =\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\n\n  return (\n    <DashboardLayoutContext.Provider\n      value={{\n        leftSidenavStatus,\n        setLeftSidenavStatus,\n        rightSidenavStatus,\n        setRightSidenavStatus,\n        leftSidenavCanBeCompact,\n        name,\n        isMobileMode: isMobile,\n      }}\n    >\n      <div\n        {...domProps}\n        className={clsx(\n          'dashboard-grid test-overflow relative isolate',\n          height\n        )}\n      >\n        {children}\n        <AnimatePresence>\n          {shouldShowUnderlay && (\n            <Underlay\n              position=\"fixed\"\n              key=\"dashboard-underlay\"\n              onClick={() => {\n                setLeftSidenavStatus('closed');\n                setRightSidenavStatus('closed');\n              }}\n            />\n          )}\n        </AnimatePresence>\n      </div>\n    </DashboardLayoutContext.Provider>\n  );\n}\n","import {cloneElement, ReactElement} from 'react';\nimport clsx from 'clsx';\n\ninterface DashboardContentProps {\n  children: ReactElement<{className: string}>;\n}\nexport function DashboardContent({children}: DashboardContentProps) {\n  return cloneElement(children, {\n    className: clsx(\n      children.props.className,\n      'dashboard-grid-content overflow-y-auto'\n    ),\n  });\n}\n","import clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {cloneElement, ReactElement, useContext} from 'react';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\n\nexport interface SidenavProps {\n  className?: string;\n  children: ReactElement<{className: string; isCompactMode?: boolean}>;\n  position?: 'left' | 'right';\n  size?: 'sm' | 'md' | 'lg' | string;\n  mode?: 'overlay';\n  // absolute will place sidenav between navbar/footer, fixed will overlay it over nav/footer.\n  overlayPosition?: 'absolute' | 'fixed';\n  display?: 'flex' | 'block';\n  forceClosed?: boolean;\n}\nexport function DashboardSidenav({\n  className,\n  position,\n  children,\n  size = 'md',\n  mode,\n  overlayPosition = 'fixed',\n  display = 'flex',\n  forceClosed = false,\n}: SidenavProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    rightSidenavStatus,\n    setRightSidenavStatus,\n  } = useContext(DashboardLayoutContext);\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\n  const isOverlayMode = isMobileMode || mode === 'overlay';\n\n  const variants = {\n    open: {display, width: null as any},\n    compact: {\n      display,\n      width: null as any,\n    },\n    closed: {\n      width: 0,\n      transitionEnd: {\n        display: 'none',\n      },\n    },\n  };\n\n  const sizeClassName = getSize(status === 'compact' ? 'compact' : size);\n\n  return (\n    <m.div\n      variants={variants}\n      initial={false}\n      animate={forceClosed ? 'closed' : status}\n      transition={{type: 'tween', duration: 0.15}}\n      onClick={e => {\n        // close sidenav when user clicks a link or button on mobile\n        const target = e.target as HTMLElement;\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\n          setLeftSidenavStatus('closed');\n          setRightSidenavStatus('closed');\n        }\n      }}\n      className={clsx(\n        className,\n        position === 'left'\n          ? 'dashboard-grid-sidenav-left'\n          : 'dashboard-grid-sidenav-right',\n        'overflow-hidden will-change-[width]',\n        sizeClassName,\n        isOverlayMode && `${overlayPosition} top-0 bottom-0 z-20 shadow-2xl`,\n        isOverlayMode && position === 'left' && 'left-0',\n        isOverlayMode && position === 'right' && 'right-0'\n      )}\n    >\n      {cloneElement(children, {\n        className: clsx(\n          children.props.className,\n          'w-full h-full',\n          status === 'compact' && 'compact-scrollbar'\n        ),\n        isCompactMode: status === 'compact',\n      })}\n    </m.div>\n  );\n}\n\nfunction getSize(size: SidenavProps['size'] | 'compact'): string {\n  switch (size) {\n    case 'compact':\n      return 'w-80';\n    case 'sm':\n      return 'w-224';\n    case 'md':\n      return 'w-240';\n    case 'lg':\n      return 'w-288';\n    default:\n      return size || '';\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MenuOpenIcon = createSvgIcon(\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\n, 'MenuOpenOutlined');\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\nimport {IconButton} from '../buttons/icon-button';\nimport React, {useContext} from 'react';\nimport clsx from 'clsx';\nimport {DashboardLayoutContext} from './dashboard-layout-context';\nimport {setInLocalStorage} from '../../utils/hooks/local-storage';\nimport {MenuOpenIcon} from '@common/icons/material/MenuOpen';\n\nexport interface DashboardNavbarProps\n  extends Omit<NavbarProps, 'toggleButton'> {\n  hideToggleButton?: boolean;\n}\nexport function DashboardNavbar({\n  children,\n  className,\n  hideToggleButton,\n  ...props\n}: DashboardNavbarProps) {\n  const {\n    isMobileMode,\n    leftSidenavStatus,\n    setLeftSidenavStatus,\n    name,\n    leftSidenavCanBeCompact,\n  } = useContext(DashboardLayoutContext);\n\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\n  const shouldShowToggle =\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\n\n  const handleToggle = () => {\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\n  };\n\n  const handleCompactModeToggle = () => {\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\n    setLeftSidenavStatus(newStatus);\n  };\n\n  return (\n    <Navbar\n      className={clsx('dashboard-grid-navbar', className)}\n      border=\"border-b\"\n      size=\"sm\"\n      color=\"primary\"\n      darkModeColor=\"bg-alt\"\n      toggleButton={\n        shouldShowToggle ? (\n          <IconButton\n            size=\"md\"\n            onClick={() => {\n              if (shouldToggleCompactMode) {\n                handleCompactModeToggle();\n              } else {\n                handleToggle();\n              }\n            }}\n          >\n            <MenuOpenIcon />\n          </IconButton>\n        ) : undefined\n      }\n      {...props}\n    >\n      {children}\n    </Navbar>\n  );\n}\n","import {Key} from 'react';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport class BackendFilter {\n  defaultValue: BackendFilterOptions['defaultValue'];\n  defaultOperator: BackendFilterOptions['defaultOperator'];\n  key: BackendFilterOptions['key'];\n  label: BackendFilterOptions['label'];\n  description?: BackendFilterOptions['description'];\n  type: BackendFilterOptions['type'];\n  inputType?: BackendFilterOptions['inputType'];\n  options: BackendFilterOptions['options'];\n  operators: BackendFilterOptions['operators'];\n  model?: BackendFilterOptions['model'];\n\n  constructor(options: Partial<BackendFilterOptions>) {\n    this.defaultValue =\n      options.defaultValue !== undefined ? options.defaultValue : '';\n    this.key = options.key!;\n    this.label = options.label!;\n    this.description = options.description;\n    this.defaultOperator = options.defaultOperator || FilterOperator.eq;\n    this.type = options.type || FilterControlType.Select;\n    this.inputType = options.inputType;\n    this.options = options.options || [];\n    this.operators = options.operators || [];\n    this.model = options.model;\n  }\n}\n\nexport interface BackendFilterOptions {\n  defaultValue: any;\n  key: string;\n  label: MessageDescriptor;\n  description?: MessageDescriptor;\n  defaultOperator: FilterOperator;\n  type: FilterControlType;\n  // for input filter\n  inputType: 'string' | 'number';\n  // for select filter\n  options: BackendFilterSelectOption[];\n  operators: FilterOperator[];\n  // for select normalized model filter\n  model: string;\n}\n\nexport interface BackendFilterSelectOption {\n  label: MessageDescriptor;\n  key: Key;\n  value: any;\n}\n\nexport enum FilterControlType {\n  Select = 'select',\n  DatePicker = 'datePicker',\n  SelectModel = 'selectModel',\n  Input = 'input',\n  BooleanToggle = 'booleanToggle',\n}\n\nexport enum FilterOperator {\n  eq = '=',\n  ne = '!=',\n  gt = '>',\n  gte = '>=',\n  lt = '<',\n  lte = '<=',\n  has = 'has',\n  doesntHave = 'doesntHave',\n  between = 'between',\n}\n\nexport const ALL_PRIMITIVE_OPERATORS = [\n  FilterOperator.eq,\n  FilterOperator.ne,\n  FilterOperator.gt,\n  FilterOperator.gte,\n  FilterOperator.lt,\n  FilterOperator.lte,\n];\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\n  return date.set({\n    hour: 24 - 1,\n    minute: 60 - 1,\n    second: 60 - 1,\n    millisecond: 1000 - 1,\n  });\n}\n","import {getBootstrapData} from '../core/bootstrap-data/use-backend-bootstrap-data';\nimport {getLocalTimeZone} from '@internationalized/date';\n\nexport function getUserTimezone(): string {\n  const defaultTimezone = getBootstrapData().settings.dates.default_timezone;\n  const preferredTimezone =\n    getBootstrapData().user?.timezone || defaultTimezone || 'auto';\n\n  if (!preferredTimezone || preferredTimezone === 'auto') {\n    return getLocalTimeZone();\n  }\n  return preferredTimezone;\n}\n","import {DateRangeValue} from '../date-range-value';\nimport {message} from '../../../../../../i18n/message';\nimport {MessageDescriptor} from '../../../../../../i18n/message-descriptor';\nimport {\n  endOfWeek,\n  endOfYear,\n  now,\n  startOfWeek,\n  startOfYear,\n} from '@internationalized/date';\nimport {startOfDay} from '../../../../../../utils/date/start-of-day';\nimport {endOfDay} from '../../../../../../utils/date/end-of-day';\nimport {getBootstrapData} from '../../../../../../core/bootstrap-data/use-backend-bootstrap-data';\nimport {getUserTimezone} from '../../../../../../i18n/get-user-timezone';\n\nconst Now = startOfDay(now(getUserTimezone()));\nconst locale = getBootstrapData().i18n?.language || 'en';\n\nexport interface DateRangePreset {\n  key: number;\n  label: MessageDescriptor;\n  getRangeValue: () => DateRangeValue;\n}\n\nexport const DateRangePresets: DateRangePreset[] = [\n  {\n    key: 0,\n    label: message('Today'),\n    getRangeValue: () => ({\n      preset: 0,\n      start: Now,\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 1,\n    label: message('Yesterday'),\n    getRangeValue: () => ({\n      preset: 1,\n      start: Now.subtract({days: 1}),\n      end: endOfDay(Now).subtract({days: 1}),\n    }),\n  },\n  {\n    key: 2,\n    label: message('This week'),\n    getRangeValue: () => ({\n      preset: 2,\n      start: startOfWeek(Now, locale),\n      end: endOfWeek(endOfDay(Now), locale),\n    }),\n  },\n  {\n    key: 3,\n    label: message('Last week'),\n    getRangeValue: () => ({\n      preset: 3,\n      start: startOfWeek(Now, locale).subtract({weeks: 1}),\n      end: endOfWeek(endOfDay(Now), locale).add({weeks: 1}),\n    }),\n  },\n  {\n    key: 4,\n    label: message('Last 7 days'),\n    getRangeValue: () => ({\n      preset: 4,\n      start: Now.subtract({days: 7}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 5,\n    label: message('Last 14 days'),\n    getRangeValue: () => ({\n      preset: 5,\n      start: Now.subtract({days: 14}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 6,\n    label: message('Last 30 days'),\n    getRangeValue: () => ({\n      preset: 6,\n      start: Now.subtract({days: 30}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 7,\n    label: message('Last 3 months'),\n    getRangeValue: () => ({\n      preset: 7,\n      start: Now.subtract({months: 3}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 8,\n    label: message('Last 12 months'),\n    getRangeValue: () => ({\n      preset: 8,\n      start: Now.subtract({months: 12}),\n      end: endOfDay(Now),\n    }),\n  },\n  {\n    key: 9,\n    label: message('This year'),\n    getRangeValue: () => ({\n      preset: 9,\n      start: startOfYear(Now),\n      end: endOfYear(endOfDay(Now)),\n    }),\n  },\n  {\n    key: 10,\n    label: message('Last year'),\n    getRangeValue: () => ({\n      preset: 10,\n      start: startOfYear(Now).subtract({years: 1}),\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\n    }),\n  },\n];\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DateRangeIcon = createSvgIcon(\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\n, 'DateRangeOutlined');\n","import {FocusScope} from '@react-aria/focus';\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\nimport clsx from 'clsx';\n\ninterface InputProps {\n  className?: string;\n  children: ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  style?: CSSProperties;\n  inputProps?: ComponentPropsWithoutRef<'div'>;\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\n  (props, ref) => {\n    const {\n      children,\n      inputProps,\n      wrapperProps,\n      className,\n      autoFocus,\n      style,\n      onClick,\n    } = props;\n\n    return (\n      <div {...wrapperProps} onClick={onClick}>\n        <div\n          {...inputProps}\n          role=\"group\"\n          className={clsx(\n            className,\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\n          )}\n          ref={ref}\n          style={style}\n        >\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\n        </div>\n      </div>\n    );\n  }\n);\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\nimport clsx from 'clsx';\nimport {createFocusManager} from '@react-aria/focus';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\nimport {Field, FieldProps} from '../../field';\nimport {Input} from '../../input';\nimport {useField} from '../../use-field';\n\nexport interface DatePickerFieldProps\n  extends Omit<FieldProps, 'fieldClassNames'> {\n  inputRef?: Ref<HTMLDivElement>;\n  onBlur?: FocusEventHandler;\n  showCalendarFooter?: boolean;\n}\nexport const DatePickerField = React.forwardRef<\n  HTMLDivElement,\n  DatePickerFieldProps\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\n  const fieldClassNames = getInputFieldClassNames(other);\n  const objRef = useObjectRef(ref);\n\n  const {fieldProps, inputProps} = useField({\n    ...other,\n    focusRef: objRef,\n    labelElementType: 'span',\n  });\n\n  fieldClassNames.wrapper = clsx(\n    fieldClassNames.wrapper,\n    other.disabled && 'pointer-events-none'\n  );\n\n  return (\n    <Field\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\n        wrapperProps!,\n        {\n          onBlur: e => {\n            if (!objRef.current.contains(e.relatedTarget)) {\n              onBlur?.(e);\n            }\n          },\n          onClick: () => {\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\n            const focusManager = createFocusManager(objRef);\n            focusManager.focusFirst();\n          },\n        }\n      )}\n      fieldClassNames={fieldClassNames}\n      ref={objRef}\n      {...fieldProps}\n    >\n      <Input\n        inputProps={inputProps}\n        className={clsx(fieldClassNames.input, 'gap-10')}\n        ref={inputRef}\n      >\n        {children}\n      </Input>\n    </Field>\n  );\n});\n","import {CalendarDate, DateValue} from '@internationalized/date';\n\nexport function getDefaultGranularity(date: DateValue) {\n  if (date instanceof CalendarDate) {\n    return 'day';\n  }\n  return 'minute';\n}\n\nexport function dateIsInvalid(\n  date: CalendarDate,\n  min?: DateValue,\n  max?: DateValue\n) {\n  return (\n    (min != null && date.compare(min) < 0) ||\n    (max != null && date.compare(max) > 0)\n  );\n}\n","import {useState} from 'react';\nimport {DateValue, toZoned, ZonedDateTime} from '@internationalized/date';\nimport {getDefaultGranularity} from './utils';\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-picker/date-range-value';\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\n\nexport function useBaseDatePickerState(\n  selectedDate: DateValue,\n  props:\n    | DatePickerValueProps<ZonedDateTime>\n    | DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\n) {\n  const timezone = useUserTimezone();\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\n\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\n  const min = props.min ? toZoned(props.min, timezone) : undefined;\n  const max = props.max ? toZoned(props.max, timezone) : undefined;\n\n  return {\n    timezone,\n    granularity,\n    min,\n    max,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  };\n}\n","import {useMemo} from 'react';\nimport {now} from '@internationalized/date';\nimport {useUserTimezone} from './use-user-timezone';\n\nexport function useCurrentDateTime() {\n  const timezone = useUserTimezone();\n  return useMemo(() => {\n    return now(timezone);\n  }, [timezone]);\n}\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  endOfMonth,\n  isSameDay,\n  isSameMonth,\n  maxDate,\n  minDate,\n  startOfMonth,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {\n  BaseDatePickerState,\n  DatePickerValueProps,\n} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {startOfDay} from '@common/utils/date/start-of-day';\nimport {endOfDay} from '@common/utils/date/end-of-day';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface IsPlaceholderValue {\n  start: boolean;\n  end: boolean;\n}\n\nexport type DateRangePickerState = BaseDatePickerState<\n  DateRangeValue,\n  IsPlaceholderValue\n>;\n\nexport function useDateRangePickerState(\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\n): DateRangePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\n  });\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value ? completeRange(props.value, now) : undefined,\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\n    props.onChange\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue.start, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder({start: true, end: true});\n    setInternalValue(completeRange(null, now));\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\n  const [isHighlighting, setIsHighlighting] = useState(false);\n  const [highlightedRange, setHighlightedRange] =\n    useState<DateRangeValue>(internalValue);\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return rangeToCalendarDates(internalValue, max);\n  });\n\n  const constrainRange = useCallback(\n    (range: DateRangeValue): DateRangeValue => {\n      let start = range.start;\n      let end = range.end;\n\n      // make sure start date is after min date and before max date/range end\n      if (min) {\n        start = maxDate(start, min);\n      }\n      const startMax = max ? minDate(max, end) : end;\n      start = minDate(start, startMax);\n\n      // make sure end date is after min date/range start and before max date\n      const endMin = min ? maxDate(min, start) : start;\n      end = maxDate(end, endMin);\n\n      if (max) {\n        end = minDate(end, max);\n      }\n\n      return {start: toZoned(start, timezone), end: toZoned(end, timezone)};\n    },\n    [min, max, timezone]\n  );\n\n  const setSelectedValue = useCallback(\n    (newRange: DateRangeValue) => {\n      const value = {\n        ...constrainRange(newRange),\n        preset: newRange.preset,\n      };\n      setInternalValue(value);\n      setHighlightedRange(value);\n      setCalendarDates(rangeToCalendarDates(value, max));\n      setIsPlaceholder({start: false, end: false});\n    },\n    [setInternalValue, constrainRange, max]\n  );\n\n  const dayIsActive = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\n      );\n    },\n    [highlightedRange, isPlaceholder]\n  );\n\n  const dayIsHighlighted = useCallback(\n    (day: CalendarDate) => {\n      return (\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\n        day.compare(highlightedRange.start) >= 0 &&\n        day.compare(highlightedRange.end) <= 0\n      );\n    },\n    [highlightedRange, isPlaceholder, isHighlighting]\n  );\n\n  const dayIsRangeStart = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\n    [highlightedRange]\n  );\n\n  const dayIsRangeEnd = useCallback(\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\n    [highlightedRange]\n  );\n\n  const getCellProps = useCallback(\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\n      return {\n        onPointerEnter: () => {\n          if (isHighlighting && isSameMonth) {\n            setHighlightedRange(\n              makeRange({start: anchorDate!, end: date, timezone})\n            );\n          }\n        },\n        onClick: () => {\n          if (!isHighlighting) {\n            setIsHighlighting(true);\n            setAnchorDate(date);\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\n          } else {\n            const finalRange = makeRange({\n              start: startOfDay(toZoned(anchorDate!, timezone)),\n              end: endOfDay(toZoned(date, timezone)),\n              timezone,\n            });\n            setIsHighlighting(false);\n            setAnchorDate(null);\n            setSelectedValue?.(finalRange);\n            if (closeDialogOnSelection) {\n              setCalendarIsOpen?.(false);\n            }\n          }\n        },\n      };\n    },\n    [\n      anchorDate,\n      isHighlighting,\n      setSelectedValue,\n      setCalendarIsOpen,\n      closeDialogOnSelection,\n      timezone,\n    ]\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    calendarDates,\n    setIsPlaceholder,\n    isPlaceholder,\n    clear,\n    setCalendarDates,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n\nfunction rangeToCalendarDates(\n  range: DateRangeValue,\n  max?: DateValue\n): CalendarDate[] {\n  let start = toCalendarDate(startOfMonth(range.start));\n  let end = toCalendarDate(endOfMonth(range.end));\n\n  // make sure we don't show the same month twice\n  if (isSameMonth(start, end)) {\n    end = endOfMonth(end.add({months: 1}));\n  }\n\n  // if next month is disabled, show previous instead\n  if (max && end.compare(max) > 0) {\n    end = start;\n    start = startOfMonth(start.subtract({months: 1}));\n  }\n  return [start, end];\n}\n\ninterface MakeRangeProps {\n  start: DateValue;\n  end: DateValue;\n  timezone: string;\n}\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\n  const start = toZoned(props.start, props.timezone);\n  const end = toZoned(props.end, props.timezone);\n  if (start.compare(end) > 0) {\n    return {start: end, end: start};\n  }\n  return {start, end};\n}\n\nfunction completeRange(\n  range: Partial<DateRangeValue> | null | undefined,\n  now: ZonedDateTime\n): DateRangeValue {\n  if (range?.start && range?.end) {\n    return range as DateRangeValue;\n  } else if (!range?.start && range?.end) {\n    range.start = range.end.subtract({months: 1});\n    return range as DateRangeValue;\n  } else if (!range?.end && range?.start) {\n    range.end = range.start.add({months: 1});\n    return range as DateRangeValue;\n  }\n  return {start: now, end: now.add({months: 1})};\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowRightAltIcon = createSvgIcon(\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\n, 'ArrowRightAltOutlined');\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function adjustSegment(\n  value: ZonedDateTime,\n  part: string,\n  amount: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'era':\n    case 'year':\n    case 'month':\n    case 'day':\n      return value.cycle(part, amount, {round: part === 'year'});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const isPM = hours >= 12;\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n      case 'minute':\n      case 'second':\n        return value.cycle(part, amount, {\n          round: part !== 'hour',\n          hourCycle: options.hour12 ? 12 : 24,\n        });\n    }\n  }\n\n  return value;\n}\n","import {ZonedDateTime} from '@internationalized/date';\n\nexport function setSegment(\n  value: ZonedDateTime,\n  part: string,\n  segmentValue: number,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (part) {\n    case 'day':\n    case 'month':\n    case 'year':\n      return value.set({[part]: segmentValue});\n  }\n\n  if ('hour' in value) {\n    switch (part) {\n      case 'dayPeriod': {\n        const hours = value.hour;\n        const wasPM = hours >= 12;\n        const isPM = segmentValue >= 12;\n        if (isPM === wasPM) {\n          return value;\n        }\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\n      }\n      case 'hour':\n        // In 12 hour time, ensure that AM/PM does not change\n        if (options.hour12) {\n          const hours = value.hour;\n          const wasPM = hours >= 12;\n          if (!wasPM && segmentValue === 12) {\n            segmentValue = 0;\n          }\n          if (wasPM && segmentValue < 12) {\n            segmentValue += 12;\n          }\n        }\n      // fallthrough\n      case 'minute':\n      case 'second':\n        return value.set({[part]: segmentValue});\n    }\n  }\n\n  return value;\n}\n","export const PAGE_STEP = {\n  year: 5,\n  month: 2,\n  day: 7,\n  hour: 2,\n  minute: 15,\n  second: 15,\n  dayPeriod: 1,\n};\n","import {useFocusManager} from '@react-aria/focus';\nimport React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  KeyboardEventHandler,\n  useMemo,\n  useRef,\n} from 'react';\nimport {NumberParser} from '@internationalized/number';\nimport {mergeProps} from '@react-aria/utils';\nimport {today, ZonedDateTime} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {adjustSegment} from './utils/adjust-segment';\nimport {setSegment} from './utils/set-segment';\nimport {PAGE_STEP} from './utils/page-step';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface EditableSegment {\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\n  text: string;\n  value: number;\n  minValue: number;\n  maxValue: number;\n  minLength: number;\n}\n\ninterface DatePickerSegmentProps {\n  segment: EditableSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function EditableDateSegment({\n  segment,\n  domProps,\n  value,\n  onChange,\n  isPlaceholder,\n  state: {timezone, calendarIsOpen, setCalendarIsOpen},\n}: DatePickerSegmentProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const enteredKeys = useRef('');\n  const {localeCode} = useSelectedLocale();\n  const focusManager = useFocusManager();\n  const formatter = useDateFormatter({timeZone: timezone});\n  const parser = useMemo(\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\n    [localeCode]\n  );\n\n  const setSegmentValue = (newValue: number) => {\n    onChange(\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions())\n    );\n  };\n\n  const adjustSegmentValue = (amount: number) => {\n    onChange(\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions())\n    );\n  };\n\n  const backspace = () => {\n    if (parser.isValidPartialNumber(segment.text)) {\n      const newValue = segment.text.slice(0, -1);\n      const parsed = parser.parse(newValue);\n      if (newValue.length === 0 || parsed === 0) {\n        const now = today(timezone);\n        if (segment.type in now) {\n          // @ts-ignore\n          setSegmentValue(now[segment.type]);\n        }\n      } else {\n        setSegmentValue(parsed);\n      }\n      enteredKeys.current = newValue;\n    } else if (segment.type === 'dayPeriod') {\n      adjustSegmentValue(-1);\n    }\n  };\n\n  const onKeyDown: KeyboardEventHandler = e => {\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\n      return;\n    }\n\n    // Navigation between date segments and deletion\n    switch (e.key) {\n      case 'ArrowLeft':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager.focusPrevious();\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        e.stopPropagation();\n        focusManager.focusNext();\n        break;\n      case 'Enter':\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\n        setCalendarIsOpen(!calendarIsOpen);\n        break;\n      case 'Tab':\n        break;\n      case 'Backspace':\n      case 'Delete': {\n        e.preventDefault();\n        e.stopPropagation();\n        backspace();\n        break;\n      }\n\n      // Spinbutton incrementing/decrementing\n      case 'ArrowUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(1);\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-1);\n        break;\n      case 'PageUp':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\n        break;\n      case 'PageDown':\n        e.preventDefault();\n        enteredKeys.current = '';\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\n        break;\n      case 'Home':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.maxValue);\n        break;\n      case 'End':\n        e.preventDefault();\n        enteredKeys.current = '';\n        setSegmentValue(segment.minValue);\n        break;\n    }\n\n    onInput(e.key);\n  };\n\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\n  const am = useMemo(() => {\n    const amDate = new Date();\n    amDate.setHours(0);\n    return amPmFormatter\n      .formatToParts(amDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n  const pm = useMemo(() => {\n    const pmDate = new Date();\n    pmDate.setHours(12);\n    return amPmFormatter\n      .formatToParts(pmDate)\n      .find(part => part.type === 'dayPeriod')!.value;\n  }, [amPmFormatter]);\n\n  // Update date values on user keyboard input\n  const onInput = (key: string) => {\n    const newValue = enteredKeys.current + key;\n\n    switch (segment.type) {\n      case 'dayPeriod':\n        if (am.toLowerCase().startsWith(key)) {\n          setSegmentValue(0);\n        } else if (pm.toLowerCase().startsWith(key)) {\n          setSegmentValue(12);\n        } else {\n          break;\n        }\n        focusManager.focusNext();\n        break;\n      case 'day':\n      case 'hour':\n      case 'minute':\n      case 'second':\n      case 'month':\n      case 'year': {\n        if (!parser.isValidPartialNumber(newValue)) {\n          return;\n        }\n\n        let numberValue = parser.parse(newValue);\n        let segmentValue = numberValue;\n        let allowsZero = segment.minValue === 0;\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\n          switch (formatter.resolvedOptions().hourCycle) {\n            case 'h11':\n              if (numberValue > 11) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n            case 'h12':\n              allowsZero = false;\n              if (numberValue > 12) {\n                segmentValue = parser.parse(key);\n              }\n              break;\n          }\n\n          if (segment.value >= 12 && numberValue > 1) {\n            numberValue += 12;\n          }\n        } else if (numberValue > segment.maxValue) {\n          segmentValue = parser.parse(key);\n        }\n\n        if (Number.isNaN(numberValue)) {\n          return;\n        }\n\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\n        if (shouldSetValue) {\n          setSegmentValue(segmentValue);\n        }\n\n        if (\n          Number(`${numberValue}0`) > segment.maxValue ||\n          newValue.length >= String(segment.maxValue).length\n        ) {\n          enteredKeys.current = '';\n          if (shouldSetValue) {\n            focusManager.focusNext();\n          }\n        } else {\n          enteredKeys.current = newValue;\n        }\n        break;\n      }\n    }\n  };\n\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\n    ? {}\n    : {\n        'aria-label': segment.type,\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\n        'aria-valuemin': segment.minValue,\n        'aria-valuemax': segment.maxValue,\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\n        tabIndex: 0,\n        onKeyDown,\n      };\n\n  return (\n    <div\n      {...mergeProps(domProps!, {\n        ...spinButtonProps,\n        onFocus: e => {\n          enteredKeys.current = '';\n          e.target.scrollIntoView({block: 'nearest'});\n        },\n        onClick: e => {\n          e.preventDefault();\n          e.stopPropagation();\n        },\n      } as HTMLAttributes<HTMLDivElement>)}\n      className=\"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center\"\n    >\n      {segment.text.padStart(segment.minLength, '0')}\n    </div>\n  );\n}\n","import {useFocusManager} from '@react-aria/focus';\nimport {ComponentPropsWithoutRef} from 'react';\n\nexport interface LiteralSegment {\n  type: 'literal';\n  minLength: 1;\n  text: string;\n}\n\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\n  segment: LiteralSegment;\n  domProps?: ComponentPropsWithoutRef<'div'>;\n}\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\n  const focusManager = useFocusManager();\n  return (\n    <div\n      {...domProps}\n      onPointerDown={e => {\n        if (e.pointerType === 'mouse') {\n          e.preventDefault();\n          const res = focusManager.focusNext({from: e.target as HTMLElement});\n          if (!res) {\n            focusManager.focusPrevious({from: e.target as HTMLElement});\n          }\n        }\n      }}\n      aria-hidden\n      className=\"min-w-4 cursor-default select-none\"\n    >\n      {segment.text}\n    </div>\n  );\n}\n","import {\n  DateValue,\n  getMinimumDayInMonth,\n  getMinimumMonthInYear,\n} from '@internationalized/date';\n\nexport function getSegmentLimits(\n  date: DateValue,\n  type: string,\n  options: Intl.ResolvedDateTimeFormatOptions\n) {\n  switch (type) {\n    case 'year':\n      return {\n        value: date.year,\n        placeholder: 'yyyy',\n        minValue: 1,\n        maxValue: date.calendar.getYearsInEra(date),\n      };\n    case 'month':\n      return {\n        value: date.month,\n        placeholder: 'mm',\n        minValue: getMinimumMonthInYear(date),\n        maxValue: date.calendar.getMonthsInYear(date),\n      };\n    case 'day':\n      return {\n        value: date.day,\n        minValue: getMinimumDayInMonth(date),\n        maxValue: date.calendar.getDaysInMonth(date),\n        placeholder: 'dd',\n      };\n  }\n\n  if ('hour' in date) {\n    switch (type) {\n      case 'dayPeriod':\n        return {\n          value: date.hour >= 12 ? 12 : 0,\n          minValue: 0,\n          maxValue: 12,\n          placeholder: '--',\n        };\n      case 'hour':\n        if (options.hour12) {\n          const isPM = date.hour >= 12;\n          return {\n            value: date.hour,\n            minValue: isPM ? 12 : 0,\n            maxValue: isPM ? 23 : 11,\n            placeholder: '--',\n          };\n        }\n\n        return {\n          value: date.hour,\n          minValue: 0,\n          maxValue: 23,\n          placeholder: '--',\n        };\n      case 'minute':\n        return {\n          value: date.minute,\n          minValue: 0,\n          maxValue: 59,\n          placeholder: '--',\n        };\n    }\n  }\n\n  return {};\n}\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\nimport {ZonedDateTime} from '@internationalized/date';\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {getSegmentLimits} from './utils/get-segment-limits';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface DateSegmentListProps {\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\n  state: DatePickerState | DateRangePickerState;\n  value: ZonedDateTime;\n  onChange: (newValue: ZonedDateTime) => void;\n  isPlaceholder?: boolean;\n}\nexport function DateSegmentList({\n  segmentProps,\n  state,\n  value,\n  onChange,\n  isPlaceholder,\n}: DateSegmentListProps) {\n  const {granularity} = state;\n  const options = useMemo(() => {\n    const memoOptions: Intl.DateTimeFormatOptions = {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n    };\n    if (granularity === 'minute') {\n      memoOptions.hour = 'numeric';\n      memoOptions.minute = 'numeric';\n    }\n    return memoOptions;\n  }, [granularity]);\n\n  const formatter = useDateFormatter(options);\n\n  const dateValue = useMemo(() => value.toDate(), [value]);\n  const segments = useMemo(() => {\n    return formatter.formatToParts(dateValue).map(segment => {\n      const limits = getSegmentLimits(\n        value,\n        segment.type,\n        formatter.resolvedOptions()\n      );\n      const textValue =\n        isPlaceholder && segment.type !== 'literal'\n          ? limits.placeholder\n          : segment.value;\n      return {\n        type: segment.type,\n        text: segment.value === ', ' ? ' ' : textValue,\n        ...limits,\n        minLength:\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\n      } as LiteralSegment | EditableSegment;\n    });\n  }, [dateValue, formatter, isPlaceholder, value]);\n\n  return (\n    <div className=\"flex items-center\">\n      {segments.map((segment, index) => {\n        if (segment.type === 'literal') {\n          return (\n            <LiteralDateSegment\n              domProps={segmentProps}\n              key={index}\n              segment={segment}\n            />\n          );\n        }\n        return (\n          <EditableDateSegment\n            isPlaceholder={isPlaceholder}\n            domProps={segmentProps}\n            state={state}\n            value={value}\n            onChange={onChange}\n            segment={segment}\n            key={index}\n          />\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowLeftIcon = createSvgIcon(\n  <path d=\"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\" />\n, 'KeyboardArrowLeftOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const KeyboardArrowRightIcon = createSvgIcon(\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n, 'KeyboardArrowRightOutlined');\n","import React from 'react';\nimport clsx from 'clsx';\nimport {\n  CalendarDate,\n  DateValue,\n  getDayOfWeek,\n  isSameMonth,\n  isToday,\n} from '@internationalized/date';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarCellProps {\n  date: CalendarDate;\n  currentMonth: DateValue;\n  state: DatePickerState | DateRangePickerState;\n}\nexport function CalendarCell({\n  date,\n  currentMonth,\n  state: {\n    dayIsActive,\n    dayIsHighlighted,\n    dayIsRangeStart,\n    dayIsRangeEnd,\n    getCellProps,\n    timezone,\n    min,\n    max,\n  },\n}: CalendarCellProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayOfWeek = getDayOfWeek(date, localeCode);\n  const isActive = dayIsActive(date);\n  const isHighlighted = dayIsHighlighted(date);\n  const isRangeStart = dayIsRangeStart(date);\n  const isRangeEnd = dayIsRangeEnd(date);\n  const dayIsToday = isToday(date, timezone);\n  const sameMonth = isSameMonth(date, currentMonth);\n  const isDisabled = dateIsInvalid(date, min, max);\n\n  return (\n    <div\n      role=\"button\"\n      aria-disabled={isDisabled}\n      className={clsx(\n        'w-40 h-40 text-sm relative isolate flex-shrink-0',\n        isDisabled && 'text-disabled pointer-events-none',\n        !sameMonth && 'invisible pointer-events-none'\n      )}\n      {...getCellProps(date, sameMonth)}\n    >\n      <span\n        className={clsx(\n          'absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer',\n          !isActive && !dayIsToday && 'hover:bg-hover',\n          isActive && 'bg-primary text-on-primary font-semibold',\n          dayIsToday && !isActive && 'bg-chip'\n        )}\n      >\n        {date.day}\n      </span>\n      {isHighlighted && sameMonth && (\n        <span\n          className={clsx(\n            'absolute w-full h-full inset-0 bg-primary/focus',\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\n              'rounded-l-full',\n            (isRangeEnd ||\n              dayOfWeek === 6 ||\n              date.day ===\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\n              'rounded-r-full'\n          )}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport {m} from 'framer-motion';\nimport {\n  CalendarDate,\n  endOfMonth,\n  getWeeksInMonth,\n  startOfMonth,\n  startOfWeek,\n} from '@internationalized/date';\nimport {KeyboardArrowLeftIcon} from '../../../../../icons/material/KeyboardArrowLeft';\nimport {IconButton} from '../../../../buttons/icon-button';\nimport {KeyboardArrowRightIcon} from '../../../../../icons/material/KeyboardArrowRight';\nimport {CalendarCell} from './calendar-cell';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\nimport {dateIsInvalid} from '../utils';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\nexport interface CalendarMonthProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nexport function CalendarMonth({\n  startDate,\n  state,\n  isFirst,\n  isLast,\n}: CalendarMonthProps) {\n  const {localeCode} = useSelectedLocale();\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"w-280 flex-shrink-0\">\n      <CalendarMonthHeader\n        isFirst={isFirst}\n        isLast={isLast}\n        state={state}\n        currentMonth={startDate}\n      />\n      <div className=\"block\" role=\"grid\">\n        <WeekdayHeader state={state} startDate={startDate} />\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\n          <m.div className=\"flex mb-6\" key={weekIndex}>\n            {[...new Array(7).keys()].map(dayIndex => (\n              <CalendarCell\n                key={dayIndex}\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\n                currentMonth={startDate}\n                state={state}\n              />\n            ))}\n          </m.div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CalendarMonthHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  currentMonth: CalendarDate;\n  isFirst: boolean;\n  isLast: boolean;\n}\nfunction CalendarMonthHeader({\n  currentMonth,\n  isFirst,\n  isLast,\n  state: {calendarDates, setCalendarDates, timezone, min, max},\n}: CalendarMonthHeaderProps) {\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\n    const count = calendarDates.length;\n    let newDates: CalendarDate[];\n    if (direction === 'forward') {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.add({months: count}))\n      );\n    } else {\n      newDates = calendarDates.map(date =>\n        endOfMonth(date.subtract({months: count}))\n      );\n    }\n    setCalendarDates(newDates);\n  };\n\n  const monthFormatter = useDateFormatter({\n    month: 'long',\n    year: 'numeric',\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\n    calendar: currentMonth.calendar.identifier,\n  });\n\n  const isBackwardDisabled = dateIsInvalid(\n    currentMonth.subtract({days: 1}),\n    min,\n    max\n  );\n  const isForwardDisabled = dateIsInvalid(\n    startOfMonth(currentMonth.add({months: 1})),\n    min,\n    max\n  );\n\n  return (\n    <div className=\"flex items-center justify-between gap-10\">\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isFirst && 'invisible')}\n        disabled={!isFirst || isBackwardDisabled}\n        aria-hidden={!isFirst}\n        onClick={() => {\n          shiftCalendars('backward');\n        }}\n      >\n        <KeyboardArrowLeftIcon />\n      </IconButton>\n      <div className=\"text-sm font-semibold select-none\">\n        {monthFormatter.format(currentMonth.toDate(timezone))}\n      </div>\n      <IconButton\n        size=\"md\"\n        className={clsx('text-muted', !isLast && 'invisible')}\n        disabled={!isLast || isForwardDisabled}\n        aria-hidden={!isLast}\n        onClick={() => {\n          shiftCalendars('forward');\n        }}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </div>\n  );\n}\n\ninterface WeekdayHeaderProps {\n  state: DatePickerState | DateRangePickerState;\n  startDate: CalendarDate;\n}\nfunction WeekdayHeader({state: {timezone}, startDate}: WeekdayHeaderProps) {\n  const {localeCode} = useSelectedLocale();\n  const dayFormatter = useDateFormatter({weekday: 'short'});\n\n  const monthStart = startOfWeek(startDate, localeCode);\n\n  return (\n    <div className=\"flex\">\n      {[...new Array(7).keys()].map(index => {\n        const date = monthStart.add({days: index});\n        const dateDay = date.toDate(timezone);\n        const weekday = dayFormatter.format(dateDay);\n        return (\n          <div\n            className=\"w-40 h-40 text-sm font-semibold relative flex-shrink-0\"\n            key={index}\n          >\n            <div className=\"absolute flex items-center justify-center w-full h-full select-none\">\n              {weekday}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\nimport {CalendarMonth} from './calendar-month';\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\n\ninterface CalendarProps {\n  state: DatePickerState | DateRangePickerState;\n  visibleMonths?: 1 | 2;\n}\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\n  const isMobile = useIsMobileMediaQuery();\n\n  if (isMobile) {\n    visibleMonths = 1;\n  }\n\n  return (\n    <>\n      {[...new Array(visibleMonths).keys()].map(index => {\n        const startDate = toCalendarDate(\n          startOfMonth(state.calendarDates[index])\n        );\n        const isFirst = index === 0;\n        const isLast = index === visibleMonths - 1;\n        return (\n          <CalendarMonth\n            key={index}\n            state={state}\n            startDate={startDate}\n            isFirst={isFirst}\n            isLast={isLast}\n          />\n        );\n      })}\n    </>\n  );\n}\n","import {DateValue, parseAbsolute} from '@internationalized/date';\nimport {Fragment, memo} from 'react';\nimport {useDateFormatter} from './use-date-formatter';\nimport {useSettings} from '../core/settings/use-settings';\nimport {shallowEqual} from '../utils/shallow-equal';\nimport {useUserTimezone} from './use-user-timezone';\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\n\ninterface FormattedDateTimeRangeProps {\n  start?: string | DateValue | Date;\n  end?: string | DateValue | Date;\n  options?: Intl.DateTimeFormatOptions;\n  preset?: keyof typeof DateFormatPresets;\n}\nexport const FormattedDateTimeRange = memo(\n  ({start, end, options, preset}: FormattedDateTimeRangeProps) => {\n    const {dates} = useSettings();\n    const timezone = useUserTimezone();\n    const formatter = useDateFormatter(\n      options ||\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\n          preset || dates?.format\n        ]\n    );\n\n    if (!start || !end) {\n      return null;\n    }\n\n    let value: string;\n\n    try {\n      value = formatter.formatRange(\n        castToDate(start, timezone),\n        castToDate(end, timezone)\n      );\n    } catch (e) {\n      value = '';\n    }\n\n    return <Fragment>{value}</Fragment>;\n  },\n  shallowEqual\n);\n\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\n  if (typeof date === 'string') {\n    return parseAbsolute(date, timezone).toDate();\n  }\n  if ('toDate' in date) {\n    return date.toDate(timezone);\n  }\n  return date;\n}\n","import React, {ReactElement, ReactNode, useRef, useState} from 'react';\nimport {FocusScope, useFocusManager} from '@react-aria/focus';\nimport {ListItemBase, ListItemBaseProps} from './list-item-base';\nimport clsx from 'clsx';\n\ninterface Props {\n  className?: string;\n  padding?: string;\n  children: ReactElement<ListItemProps> | ReactElement<ListItemProps>[];\n  dataTestId?: string;\n}\n\nexport function List({children, className, padding, dataTestId}: Props) {\n  return (\n    <FocusScope>\n      <ul\n        data-testid={dataTestId}\n        className={clsx(\n          'text-base sm:text-sm outline-none',\n          className,\n          padding ?? 'py-4'\n        )}\n      >\n        {children}\n      </ul>\n    </FocusScope>\n  );\n}\n\ninterface ListItemProps extends ListItemBaseProps {\n  children: ReactNode;\n  onSelected?: () => void;\n  borderRadius?: string;\n}\nexport function ListItem({\n  children,\n  onSelected,\n  borderRadius,\n  ...listItemProps\n}: ListItemProps) {\n  const focusManager = useFocusManager();\n  const isSelectable = !!onSelected;\n  const ref = useRef<HTMLDivElement>(null);\n  const [isActive, setIsActive] = useState(false);\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        focusManager.focusNext();\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        focusManager.focusPrevious();\n        break;\n      case 'Home':\n        e.preventDefault();\n        focusManager.focusFirst();\n        break;\n      case 'End':\n        e.preventDefault();\n        focusManager.focusLast();\n        break;\n      case 'Enter':\n      case 'Space':\n        e.preventDefault();\n        onSelected?.();\n        break;\n    }\n  };\n\n  return (\n    <li>\n      <ListItemBase\n        className={borderRadius || 'rounded'}\n        isActive={isActive}\n        isDisabled={listItemProps.isDisabled}\n        {...listItemProps}\n        onFocus={e => {\n          setIsActive((e.target as HTMLElement).matches(':focus-visible'));\n        }}\n        onBlur={() => {\n          setIsActive(false);\n        }}\n        onClick={() => {\n          onSelected?.();\n        }}\n        ref={ref}\n        role={isSelectable ? 'button' : undefined}\n        onKeyDown={isSelectable ? onKeyDown : undefined}\n        tabIndex={isSelectable && !listItemProps.isDisabled ? 0 : undefined}\n      >\n        {children}\n      </ListItemBase>\n    </li>\n  );\n}\n","import {List, ListItem} from '../../../../../list/list';\nimport {DateRangePresets} from './date-range-presets';\nimport {Trans} from '../../../../../../i18n/trans';\nimport {DateRangeValue} from '../date-range-value';\n\ninterface DatePresetList {\n  onPresetSelected: (value: DateRangeValue) => void;\n  selectedValue?: DateRangeValue | null;\n}\nexport function DatePresetList({\n  onPresetSelected,\n  selectedValue,\n}: DatePresetList) {\n  return (\n    <List\n      className=\"min-w-192\"\n      padding=\"py-14\"\n      dataTestId=\"date-range-preset-list\"\n    >\n      {DateRangePresets.map(preset => (\n        <ListItem\n          borderRadius=\"rounded-none\"\n          capitalizeFirst\n          key={preset.key}\n          isSelected={selectedValue?.preset === preset.key}\n          onSelected={() => {\n            const newValue = preset.getRangeValue();\n            onPresetSelected(newValue);\n          }}\n        >\n          <Trans {...preset.label} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n","import {useMediaQuery, UseMediaQueryOptions} from './use-media-query';\n\nexport function useIsTabletMediaQuery(options?: UseMediaQueryOptions) {\n  return useMediaQuery('(max-width: 1024px)', options);\n}\n","import React, {useRef} from 'react';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {DatePickerField} from '../date-picker-field';\nimport {DateRangePickerState} from '../use-date-range-picker-state';\nimport {Calendar} from '../../calendar/calendar';\nimport {DialogFooter} from '../../../../../overlays/dialog/dialog-footer';\nimport {Button} from '../../../../../buttons/button';\nimport {useDialogContext} from '../../../../../overlays/dialog/dialog-context';\nimport {Dialog} from '../../../../../overlays/dialog/dialog';\nimport {DialogBody} from '../../../../../overlays/dialog/dialog-body';\nimport {ArrowRightAltIcon} from '../../../../../../icons/material/ArrowRightAlt';\nimport {DateSegmentList} from '../../segments/date-segment-list';\nimport {Trans} from '../../../../../../i18n/trans';\nimport {FormattedDateTimeRange} from '../../../../../../i18n/formatted-date-time-range';\nimport {DatePresetList} from './date-preset-list';\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\n\ninterface DateRangeDialogProps {\n  state: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n}\nexport function DateRangeDialog({\n  state,\n  showInlineDatePickerField = false,\n}: DateRangeDialogProps) {\n  const isTablet = useIsTabletMediaQuery();\n  const {close} = useDialogContext();\n  const initialStateRef = useRef<DateRangePickerState>(state);\n\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\n\n  const footer = (\n    <DialogFooter\n      dividerTop\n      startAction={\n        !hasPlaceholder && !isTablet ? (\n          <div className=\"text-xs\">\n            <FormattedDateTimeRange\n              start={state.selectedValue.start.toDate()}\n              end={state.selectedValue.end.toDate()}\n              options={{dateStyle: 'medium'}}\n            />\n          </div>\n        ) : undefined\n      }\n    >\n      <Button\n        variant=\"text\"\n        size=\"xs\"\n        onClick={() => {\n          state.setSelectedValue(initialStateRef.current.selectedValue);\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\n          close();\n        }}\n      >\n        <Trans message=\"Cancel\" />\n      </Button>\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"xs\"\n        onClick={() => {\n          close(state.selectedValue);\n        }}\n      >\n        <Trans message=\"Select\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  return (\n    <Dialog size=\"auto\">\n      <DialogBody className=\"flex\" padding=\"p-0\">\n        {!isTablet && (\n          <DatePresetList\n            selectedValue={state.selectedValue}\n            onPresetSelected={preset => {\n              state.setSelectedValue(preset);\n              if (state.closeDialogOnSelection) {\n                close(preset);\n              }\n            }}\n          />\n        )}\n        <AnimatePresence initial={false}>\n          <Calendars\n            state={state}\n            showInlineDatePickerField={showInlineDatePickerField}\n          />\n        </AnimatePresence>\n      </DialogBody>\n      {!state.closeDialogOnSelection && footer}\n    </Dialog>\n  );\n}\n\ninterface CustomRangePanelProps {\n  state: DateRangePickerState;\n  showInlineDatePickerField?: boolean;\n}\nfunction Calendars({state, showInlineDatePickerField}: CustomRangePanelProps) {\n  return (\n    <m.div\n      initial={{width: 0, overflow: 'hidden'}}\n      animate={{width: 'auto'}}\n      exit={{width: 0, overflow: 'hidden'}}\n      transition={{type: 'tween', duration: 0.125}}\n      className=\"border-l px-20 pt-10 pb-20\"\n    >\n      {showInlineDatePickerField && <InlineDatePickerField state={state} />}\n      <div className=\"flex items-start gap-36\">\n        <Calendar state={state} visibleMonths={2} />\n      </div>\n    </m.div>\n  );\n}\n\ninterface InlineDatePickerFieldProps {\n  state: DateRangePickerState;\n}\nfunction InlineDatePickerField({state}: InlineDatePickerFieldProps) {\n  const {selectedValue, setSelectedValue} = state;\n  return (\n    <DatePickerField className=\"mb-20 mt-10\">\n      <DateSegmentList\n        state={state}\n        value={selectedValue.start}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, start: newValue});\n        }}\n      />\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\n      <DateSegmentList\n        state={state}\n        value={selectedValue.end}\n        onChange={newValue => {\n          setSelectedValue({...selectedValue, end: newValue});\n        }}\n      />\n    </DatePickerField>\n  );\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {DateRangeIcon} from '../../../../../icons/material/DateRange';\nimport {DialogTrigger} from '../../../../overlays/dialog/dialog-trigger';\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\nimport {useDateRangePickerState} from './use-date-range-picker-state';\nimport {ArrowRightAltIcon} from '../../../../../icons/material/ArrowRightAlt';\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\nimport {DateRangeValue} from './date-range-value';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {DateRangeDialog} from './dialog/date-range-dialog';\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\n\nexport interface DateRangePickerProps\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\n    Omit<DatePickerFieldProps, 'children'> {}\nexport function DateRangePicker(props: DateRangePickerProps) {\n  const {granularity, closeDialogOnSelection, ...fieldProps} = props;\n  const state = useDateRangePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const isMobile = useIsMobileMediaQuery();\n  const hideCalendarIcon = isMobile && granularity !== 'day';\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <DateRangeDialog state={state} />\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  const value = state.selectedValue;\n  const onChange = state.setSelectedValue;\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\n        {...fieldProps}\n      >\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.start}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.start}\n          onChange={newValue => {\n            onChange({...value, start: newValue});\n          }}\n        />\n        <ArrowRightAltIcon\n          className=\"block flex-shrink-0 text-muted\"\n          size=\"md\"\n        />\n        <DateSegmentList\n          isPlaceholder={state.isPlaceholder?.end}\n          state={state}\n          segmentProps={openOnClick}\n          value={value.end}\n          onChange={newValue => {\n            onChange({...value, end: newValue});\n          }}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {DateRangeValue} from './date-range-value';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport React from 'react';\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\n\nexport interface AbsoluteDateRange {\n  start?: string;\n  end?: string;\n  preset?: number;\n}\n\ninterface FormDateRange {\n  start?: string | ZonedDateTime;\n  end?: string | ZonedDateTime;\n  preset?: number;\n}\n\ninterface FormDateRangePickerProps extends DateRangePickerProps {\n  name: string;\n}\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<DateRangePickerProps> = {\n    onChange: e => {\n      onChange(e ? dateRangeToAbsoluteRange(e) : null);\n    },\n    onBlur,\n    value: absoluteRangeToDateRange(value),\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\n}\n\nexport function absoluteRangeToDateRange(props: FormDateRange | null) {\n  const {start, end, preset} = props || {};\n  const dateRange: Partial<DateRangeValue> = {preset};\n  if (start) {\n    dateRange.start =\n      typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\n  }\n  if (end) {\n    dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\n  }\n  return dateRange;\n}\n\nexport function dateRangeToAbsoluteRange({\n  start,\n  end,\n  preset,\n}: Partial<DateRangeValue> = {}) {\n  const absoluteRange: AbsoluteDateRange = {\n    preset,\n  };\n  if (start) {\n    absoluteRange.start = start.toAbsoluteString();\n  }\n  if (end) {\n    absoluteRange.end = end.toAbsoluteString();\n  }\n  return absoluteRange;\n}\n","import {\n  BackendFilter,\n  BackendFilterOptions,\n  FilterControlType,\n  FilterOperator,\n} from './backend-filter';\nimport {\n  DateRangePreset,\n  DateRangePresets,\n} from '../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {message} from '../../i18n/message';\nimport {dateRangeToAbsoluteRange} from '../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\n\nexport class TimestampFilter extends BackendFilter {\n  type = FilterControlType.DatePicker;\n  defaultOperator = FilterOperator.between;\n  constructor(options: Partial<BackendFilterOptions>) {\n    if (!options.defaultValue) {\n      options.defaultValue = dateRangeToAbsoluteRange(\n        (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue()\n      );\n    }\n    super(options);\n  }\n}\n\nexport class CreatedAtFilter extends TimestampFilter {\n  key = 'created_at';\n  label = message('Date created');\n}\n\nexport class UpdatedAtFilter extends TimestampFilter {\n  key = 'updated_at';\n  label = message('Last updated');\n}\n","import clsx from 'clsx';\nimport React, {\n  ComponentProps,\n  ComponentPropsWithoutRef,\n  forwardRef,\n} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\nimport {AvatarPlaceholderIcon} from '@common/auth/ui/account-settings/avatar/avatar-placeholder-icon';\n\ntype Size = 'xs' | 'sm' | 'md' | 'lg';\n\nexport interface AvatarProps extends ComponentPropsWithoutRef<any> {\n  className?: string;\n  src?: string;\n  label?: string;\n  circle?: boolean;\n  size?: Size;\n  link?: string;\n  fallback?: 'initials' | 'generic';\n}\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\n  (\n    {\n      className,\n      circle,\n      size = 'md',\n      src,\n      link,\n      label,\n      fallback = 'generic',\n      ...domProps\n    },\n    ref\n  ) => {\n    let renderedAvatar = src ? (\n      <img\n        ref={ref}\n        src={src}\n        alt={label}\n        className=\"block object-cover w-full h-full\"\n      />\n    ) : (\n      <div className=\"bg-alt dark:bg-chip w-full h-full\">\n        <AvatarPlaceholderIcon\n          viewBox=\"0 0 48 48\"\n          className=\"w-full h-full text-muted\"\n        />\n      </div>\n    );\n\n    if (label) {\n      renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\n    }\n\n    const wrapperProps: ComponentProps<any> = {\n      ...domProps,\n      className: clsx(\n        className,\n        'relative block overflow-hidden select-none',\n        getSizeClassName(size),\n        circle ? 'rounded-full' : 'rounded'\n      ),\n    };\n\n    return link ? (\n      <Link {...wrapperProps} to={link}>\n        {renderedAvatar}\n      </Link>\n    ) : (\n      <div {...wrapperProps}>{renderedAvatar}</div>\n    );\n  }\n);\n\nfunction getSizeClassName(size: Size) {\n  switch (size) {\n    case 'xs':\n      return 'w-18 h-18';\n    case 'sm':\n      return 'w-24 h-24';\n    case 'md':\n      return 'w-32 h-32';\n    case 'lg':\n      return 'w-40 h-40';\n    // allow overriding with custom classNames\n    default:\n      return size;\n  }\n}\n","export const BackendFiltersUrlKey = 'filters';\n","import {FilterListValue} from './encode-backend-filters';\n\nexport function decodeBackendFilters(\n  encodedFilters: string | null\n): FilterListValue[] {\n  if (!encodedFilters) return [];\n  let filtersFromQuery: FilterListValue[] = [];\n  try {\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\n    filtersFromQuery.map(filterValue => {\n      // set value key as value so selects work properly\n      if (filterValue.valueKey != null) {\n        filterValue.value = filterValue.valueKey;\n      }\n      return filterValue;\n    });\n  } catch (e) {\n    //\n  }\n  return filtersFromQuery;\n}\n","import {Key} from 'react';\nimport {BackendFilter} from '../backend-filter';\n\nexport interface FilterListValue {\n  key: Key;\n  value: BackendFilter['defaultValue'];\n  operator?: BackendFilter['defaultOperator'];\n  valueKey?: Key;\n  isInactive?: boolean;\n}\n\nexport function encodeBackendFilters(\n  filterValue: FilterListValue[] | null,\n  filters?: BackendFilter[]\n): string {\n  if (!filterValue) return '';\n\n  // prepare values for backend\n  filterValue = !filters\n    ? filterValue\n    : filterValue\n        .filter(item => item.value !== '')\n        .map(item => {\n          return transformValue(item, filters);\n        });\n\n  // remove all placeholder filters\n  filterValue = filterValue.filter(fm => !fm.isInactive);\n\n  if (!filterValue.length) {\n    return '';\n  }\n\n  return encodeURIComponent(btoa(JSON.stringify(filterValue)));\n}\n\nfunction transformValue(\n  filterValue: FilterListValue,\n  filters: BackendFilter[]\n) {\n  const filterConfig = filters.find(f => f.key === filterValue.key);\n  // select components will use a key always, as we can't use objects as\n  // value, map over select options and replace key with actual value\n  if (filterConfig?.type === 'select') {\n    const option = (filterConfig.options || []).find(\n      o => o.key === filterValue.value\n    );\n    return {...filterValue, value: option?.value, valueKey: option?.key};\n  }\n  return filterValue;\n}\n","import {useNavigate, useSearchParams} from 'react-router-dom';\nimport {Key, useCallback, useMemo} from 'react';\nimport {BackendFilter} from './backend-filter';\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\nimport {\n  encodeBackendFilters,\n  FilterListValue,\n} from './utils/encode-backend-filters';\n\nexport function useBackendFilterUrlParams(\n  filters?: BackendFilter[],\n  pinnedFilters?: string[]\n) {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\n\n  const decodedFilters: FilterListValue[] = useMemo(() => {\n    if (!filters) return [];\n    const decoded = decodeBackendFilters(encodedFilters);\n\n    // if filter is pinned, and it is not applied yet, add a placeholder\n    (pinnedFilters || []).forEach(key => {\n      if (!decoded.find(f => f.key === key)) {\n        const config = filters.find(f => f.key === key)!;\n        decoded.push({\n          key,\n          value: config.defaultValue,\n          operator: config.defaultOperator,\n          isInactive: true,\n        });\n      }\n    });\n\n    // preserve original filter order from configuration\n    decoded.sort(\n      (a, b) =>\n        filters.findIndex(f => f.key === a.key) -\n        filters.findIndex(f => f.key === b.key)\n    );\n\n    return decoded;\n  }, [encodedFilters, pinnedFilters, filters]);\n\n  const getDecodedWithoutKeys = useCallback(\n    (values: (FilterListValue | Key)[]) => {\n      const newFilters = [...decodedFilters];\n      values.forEach(value => {\n        const key = typeof value === 'object' ? value.key : value;\n        const index = newFilters.findIndex(f => f.key === key);\n        if (index > -1) {\n          newFilters.splice(index, 1);\n        }\n      });\n      return newFilters;\n    },\n    [decodedFilters]\n  );\n\n  const replaceAll = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\n      if (encodedFilters) {\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\n      } else {\n        searchParams.delete(BackendFiltersUrlKey);\n      }\n      navigate({search: `?${searchParams}`}, {replace: true});\n    },\n    [filters, navigate, searchParams]\n  );\n\n  const add = useCallback(\n    (filterValues: FilterListValue[]) => {\n      const existing = getDecodedWithoutKeys(filterValues);\n      const decodedFilters = [...existing, ...filterValues];\n      replaceAll(decodedFilters);\n    },\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  const remove = useCallback(\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\n    [getDecodedWithoutKeys, replaceAll]\n  );\n\n  return {\n    add,\n    remove,\n    replaceAll,\n    decodedFilters,\n    encodedFilters,\n  };\n}\n","import clsx from 'clsx';\nimport type {ColumnConfig} from '../../datatable/column-config';\n\ninterface CellStyleProps {\n  isFirst?: boolean;\n  isLast?: boolean;\n  width?: string;\n  isRowHeader?: boolean;\n  column?: ColumnConfig<any>;\n}\nexport function cellStyle({\n  isFirst,\n  isLast,\n  isRowHeader,\n  width,\n  column,\n}: CellStyleProps = {}): string {\n  const finalWidth = column?.width || width || '';\n  const userPadding = column?.padding;\n\n  let justify = 'text-left';\n  if (column?.align === 'center') {\n    justify = 'text-center';\n  } else if (column?.align === 'end') {\n    justify = 'text-right';\n  }\n\n  return clsx(\n    'overflow-hidden whitespace-nowrap overflow-ellipsis h-48 outline-none focus-visible:outline focus-visible:outline-offset-2',\n    justify,\n    !userPadding && isFirst && 'pl-24 pr-16',\n    !userPadding && isLast && 'pr-24 pl-16',\n    !isFirst && !isLast && !userPadding && 'px-16',\n    userPadding,\n    finalWidth,\n    column?.className\n  );\n}\n\ninterface RowStyleProps {\n  isHeader?: boolean;\n  isSelected?: boolean;\n  enableSelection?: boolean;\n  isFirst?: boolean;\n  isDarkMode?: boolean;\n  hideBorder?: boolean;\n}\nexport function rowStyle({\n  isHeader,\n  isSelected,\n  enableSelection,\n  isFirst,\n  isDarkMode,\n  hideBorder,\n}: RowStyleProps = {}): string {\n  return clsx(\n    'break-inside-avoid outline-none',\n    !isHeader && !hideBorder && 'border-b',\n    // put border on the first row, instead of the header, so it's easier to style\n    // row border color via :has selector when sorting rows via drag and drop\n    !isHeader && isFirst && !hideBorder && 'border-t',\n    isSelected &&\n      !isDarkMode &&\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\n    isSelected &&\n      isDarkMode &&\n      'bg-selected hover:bg-focus focus-visible:bg-focus',\n    !isSelected &&\n      !isHeader &&\n      enableSelection &&\n      'focus-visible:bg-focus hover:bg-hover'\n  );\n}\n","import {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","import React, {KeyboardEventHandler} from 'react';\nimport {getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\n\ninterface Props {\n  cellCount: number;\n  rowCount: number;\n}\nexport function useGridNavigation(props: Props) {\n  const {cellCount, rowCount} = props;\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowRight':\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\n        break;\n      case 'ArrowUp':\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\n        break;\n      case 'ArrowDown':\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\n        break;\n      case 'PageUp':\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\n        break;\n      case 'PageDown':\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\n        break;\n      case 'Tab':\n        focusFirstElementAfterGrid(e);\n        break;\n      case 'Home':\n        if (isCtrlKeyPressed(e)) {\n          // move to first cell in first row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'decrement', count: rowCount},\n              cell: {op: 'decrement', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to first cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'decrement', count: cellCount}},\n            props\n          );\n        }\n        break;\n      case 'End':\n        if (isCtrlKeyPressed(e)) {\n          // move to last cell in last row\n          focusSiblingCell(\n            e,\n            {\n              row: {op: 'increment', count: rowCount},\n              cell: {op: 'increment', count: cellCount},\n            },\n            props\n          );\n        } else {\n          // move to last cell in current row\n          focusSiblingCell(\n            e,\n            {cell: {op: 'increment', count: cellCount}},\n            props\n          );\n        }\n        break;\n    }\n  };\n\n  return {onKeyDown};\n}\n\ninterface Operations {\n  cell?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n  row?: {\n    op: 'increment' | 'decrement';\n    count?: number;\n  };\n}\nfunction focusSiblingCell(\n  e: React.KeyboardEvent,\n  operations: Operations,\n  {cellCount, rowCount}: Props\n) {\n  if (document.activeElement?.tagName === 'input') return;\n  e.preventDefault();\n  const grid = e.currentTarget as HTMLElement;\n\n  // focused element might be inside the cell and not the cell itself\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\n  if (!currentCell || !grid) return;\n\n  const row = currentCell.closest('[aria-rowindex]');\n  if (!row) return;\n\n  // grab row and cell index from aria attributes\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\n\n  // adjust row index for next cell selector\n  const rowOpCount = operations.row?.count ?? 1;\n  if (operations.row?.op === 'increment') {\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\n  } else if (operations.row?.op === 'decrement') {\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\n  }\n\n  // adjust cell index for next cell selector\n  const cellOpCount = operations.cell?.count ?? 1;\n  if (operations.cell?.op === 'increment') {\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\n  } else if (operations.cell?.op === 'decrement') {\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\n  }\n\n  // find the next cell that should be focused\n  const nextCell = grid.querySelector(\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\n  ) as HTMLElement | undefined;\n  if (!nextCell) return;\n\n  // find any focusable elements inside the cell\n  const walker = getFocusableTreeWalker(nextCell);\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\n\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\n  currentCell.setAttribute('tabindex', '-1');\n  nextFocusableElement.setAttribute('tabindex', '0');\n  nextFocusableElement.focus();\n}\n\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\n  const grid = e.currentTarget as HTMLElement;\n  if (e.shiftKey) {\n    grid.focus();\n  } else {\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\n    let next: HTMLElement;\n    let last: HTMLElement;\n    do {\n      last = walker.lastChild() as HTMLElement;\n      if (last) {\n        next = last;\n      }\n    } while (last);\n\n    // @ts-ignore\n    if (next && !next.contains(document.activeElement)) {\n      focusWithoutScrolling(next);\n    }\n  }\n}\n","import {createContext} from 'react';\nimport type {SortDescriptor} from './types/sort-descriptor';\nimport type {TableProps} from './table';\nimport type {ColumnConfig} from '../../datatable/column-config';\nimport type {TableDataItem} from './types/table-data-item';\n\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\n\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\n  selectedRows: (string | number)[];\n  onSelectionChange: (keys: (string | number)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSelection?: boolean;\n  enableSorting?: boolean;\n  selectionStyle: TableSelectionStyle;\n  data: T[];\n  meta?: any;\n  columns: ColumnConfig<T>[];\n  toggleRow: (item: T) => void;\n  selectRow: (item: T | null, merge?: boolean) => void;\n  onAction: TableProps<T>['onAction'];\n  selectRowOnContextMenu: TableProps<T>['selectRowOnContextMenu'];\n}\nexport const TableContext = createContext<TableContextValue>(null!);\n","import {useContext} from 'react';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {Checkbox} from '../forms/toggle/checkbox';\nimport {TableDataItem} from './types/table-data-item';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\ninterface CheckboxCellProps {\n  item: TableDataItem;\n}\nexport function CheckboxCell({item}: CheckboxCellProps) {\n  const isMobile = useIsMobileMediaQuery();\n  const {selectedRows, enableSelection, toggleRow, selectionStyle} =\n    useContext(TableContext);\n\n  if (!enableSelection || selectionStyle === 'highlight' || isMobile)\n    return null;\n\n  return (\n    <td\n      className={cellStyle({\n        isFirst: true,\n        width: 'w-64 flex-shrink-0 flex-grow-0',\n      })}\n    >\n      <Checkbox\n        checked={selectedRows.includes(item.id)}\n        onChange={() => {\n          toggleRow(item);\n        }}\n      />\n    </td>\n  );\n}\n","import {useContext, useMemo} from 'react';\nimport {cellStyle} from './table-style';\nimport {TableContext} from './table-context';\nimport {TableDataItem} from './types/table-data-item';\nimport {RowContext} from '@common/datatable/column-config';\n\ninterface TableCellProps {\n  rowIsHovered: boolean;\n  rowIndex: number;\n  index: number;\n  item: TableDataItem;\n  id?: string;\n}\nexport function TableCell({\n  rowIndex,\n  rowIsHovered,\n  index,\n  item,\n  id,\n}: TableCellProps) {\n  const {enableSelection, columns} = useContext(TableContext);\n  const isFirst = enableSelection ? false : index === 0;\n  const isLast = index === columns.length - 1;\n  const column = columns[index];\n\n  const rowContext: RowContext = useMemo(() => {\n    return {\n      index: rowIndex,\n      isHovered: rowIsHovered,\n      isPlaceholder: item.isPlaceholder,\n    };\n  }, [rowIndex, rowIsHovered, item.isPlaceholder]);\n\n  return (\n    <td\n      id={id}\n      tabIndex={-1}\n      data-testid={`col-${column.key}`}\n      className={cellStyle({isFirst, isLast, column})}\n    >\n      {column.body(item, rowContext)}\n    </td>\n  );\n}\n","import React, {HTMLAttributes, useRef} from 'react';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {useGlobalListeners} from '@react-aria/utils';\n\ninterface PointerState {\n  lastPosition: {x: number; y: number};\n  id?: number;\n  started: boolean;\n  el?: HTMLElement;\n  originalTouchAction?: string;\n  originalUserSelect?: string;\n  longPressTimer?: any;\n  longPressTriggered?: boolean;\n}\n\ninterface UsePointerEventsReturn {\n  domProps: HTMLAttributes<HTMLElement>;\n}\n\nexport interface UsePointerEventsProps {\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\n  onMoveEnd?: (e: PointerEvent) => void;\n  onPointerDown?: (e: React.PointerEvent) => void | false;\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\n  preventDefault?: boolean;\n  stopPropagation?: boolean;\n  minimumMovement?: number;\n}\nexport function usePointerEvents({\n  onMoveStart,\n  onMove,\n  onMoveEnd,\n  minimumMovement = 0,\n  preventDefault,\n  stopPropagation = true,\n  onPress,\n  onLongPress,\n  ...props\n}: UsePointerEventsProps): UsePointerEventsReturn {\n  const stateRef = useRef<PointerState>({\n    lastPosition: {x: 0, y: 0},\n    started: false,\n    longPressTriggered: false,\n  });\n  const state = stateRef.current;\n\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\n\n  const start = (e: PointerEvent) => {\n    if (!state.el) return;\n    const result = onMoveStart?.(e, state.el);\n\n    // allow user to cancel interaction\n    if (result === false) return;\n\n    state.originalTouchAction = state.el.style.touchAction;\n    state.el.style.touchAction = 'none';\n    state.originalUserSelect = document.documentElement.style.userSelect;\n    document.documentElement.style.userSelect = 'none';\n    state.started = true;\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    if (e.button === 0 && state.id == null) {\n      state.started = false;\n\n      const result = props.onPointerDown?.(e);\n      if (result === false) return;\n\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n      if (preventDefault) {\n        e.preventDefault();\n      }\n      state.id = e.pointerId;\n      state.el = e.currentTarget as HTMLElement;\n      state.lastPosition = {x: e.clientX, y: e.clientY};\n\n      // use global listeners, so we don't have to capture pointer,\n      // which would prevent click events on child nodes\n\n      if (onLongPress) {\n        state.longPressTimer = setTimeout(() => {\n          onLongPress(e, state.el!);\n          state.longPressTriggered = true;\n        }, 400);\n      }\n\n      if (onMoveStart || onMove) {\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\n      }\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  const onPointerMove = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      const deltaX = e.clientX - state.lastPosition.x;\n      const deltaY = e.clientY - state.lastPosition.y;\n\n      if (\n        (Math.abs(deltaX) >= minimumMovement ||\n          Math.abs(deltaY) >= minimumMovement) &&\n        !state.started\n      ) {\n        start(e);\n      }\n\n      if (state.started) {\n        onMove?.(e, deltaX, deltaY);\n        state.lastPosition = {x: e.clientX, y: e.clientY};\n      }\n    }\n  };\n\n  const onPointerUp = (e: PointerEvent) => {\n    if (e.pointerId === state.id) {\n      // cancel long press timer, if exists\n      if (state.longPressTimer) {\n        clearTimeout(state.longPressTimer);\n      }\n\n      const longPressTriggered = state.longPressTriggered;\n      state.longPressTriggered = false;\n\n      // only call onMoveEnd if we actually started moving\n      if (state.started) {\n        onMoveEnd?.(e);\n      }\n\n      if (state.el) {\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\n        if (e.type !== 'pointercancel') {\n          props.onPointerUp?.(e, state.el);\n\n          // only call onPress if pointer did not leave onPointerDown element\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\n            // trigger either onPress or onLongPress\n            if (longPressTriggered) {\n              onLongPress?.(e, state.el);\n            } else {\n              onPress?.(e, state.el);\n            }\n          }\n        }\n\n        document.documentElement.style.userSelect =\n          state.originalUserSelect || '';\n        state.el.style.touchAction = state.originalTouchAction || '';\n      }\n      state.id = undefined;\n      state.started = false;\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\n    }\n  };\n\n  return {\n    domProps: {\n      onPointerDown: createEventHandler(onPointerDown),\n    },\n  };\n}\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\n\ninterface Event {\n  altKey: boolean;\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n}\n\nexport function isCtrlOrShiftPressed(e: Event) {\n  return e.shiftKey || isCtrlKeyPressed(e);\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  HTMLAttributes,\n  JSXElementConstructor,\n  KeyboardEventHandler,\n  MouseEventHandler,\n  useContext,\n  useRef,\n  useState,\n} from 'react';\nimport {rowStyle} from './table-style';\nimport {TableContext} from './table-context';\nimport {CheckboxCell} from './checkbox-cell';\nimport {TableCell} from './table-cell';\nimport {TableDataItem} from './types/table-data-item';\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\nimport {usePointerEvents} from '../interactions/use-pointer-events';\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\nimport {useIsDarkMode} from '@common/ui/themes/use-is-dark-mode';\n\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\n\nexport interface RowElementProps<T = TableDataItem>\n  extends ComponentPropsWithoutRef<'tr'> {\n  item: T & {isPlaceholder?: boolean};\n}\n\ninterface TableRowProps {\n  item: TableDataItem;\n  index: number;\n  renderAs?: JSXElementConstructor<RowElementProps>;\n  hideBorder?: boolean;\n}\nexport function TableRow({item, index, renderAs, hideBorder}: TableRowProps) {\n  const {\n    selectedRows,\n    columns,\n    toggleRow,\n    selectRow,\n    onAction,\n    selectRowOnContextMenu,\n    enableSelection,\n    selectionStyle,\n  } = useContext(TableContext);\n\n  const isTouchDevice = useRef(false);\n  const isDarkMode = useIsDarkMode();\n  const isRowSelected = selectedRows.includes(item.id);\n  const [isHovered, setIsHovered] = useState(false);\n\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\n  };\n\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\n    if (\n      selectionStyle === 'highlight' &&\n      onAction &&\n      !isTouchDevice.current &&\n      !clickedOnInteractable(e)\n    ) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const anyRowsSelected = !!selectedRows.length;\n\n  const handleRowTap = (e: PointerEvent) => {\n    if (clickedOnInteractable(e)) return;\n    if (selectionStyle == 'checkbox') {\n      if (enableSelection && (anyRowsSelected || !onAction)) {\n        toggleRow(item);\n      } else if (onAction) {\n        onAction(item, index);\n      }\n    } else if (selectionStyle === 'highlight') {\n      if (isTouchDevice.current) {\n        if (enableSelection && anyRowsSelected) {\n          toggleRow(item);\n        } else {\n          onAction?.(item, index);\n        }\n      } else if (enableSelection) {\n        selectRow(item, isCtrlOrShiftPressed(e));\n      }\n    }\n  };\n\n  const {domProps} = usePointerEvents({\n    onPointerDown: e => {\n      isTouchDevice.current = e.pointerType === 'touch';\n    },\n    onPress: handleRowTap,\n    onLongPress: enableSelection\n      ? () => {\n          if (isTouchDevice.current) {\n            toggleRow(item);\n          }\n        }\n      : undefined,\n  });\n\n  const keyboardHandler: KeyboardEventHandler = e => {\n    if (enableSelection && e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (selectionStyle === 'checkbox') {\n        toggleRow(item);\n      } else {\n        selectRow(item);\n      }\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\n      e.preventDefault();\n      e.stopPropagation();\n      onAction(item, index);\n    }\n  };\n\n  const contextMenuHandler: MouseEventHandler = e => {\n    if (selectRowOnContextMenu) {\n      if (!selectedRows.includes(item.id)) {\n        selectRow(item);\n      }\n    }\n    // prevent context menu on mobile\n    if (isTouchDevice.current) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const tableRowProps: HTMLAttributes<HTMLDivElement> = {\n    'aria-selected': isRowSelected,\n    className: rowStyle({\n      isSelected: isRowSelected,\n      enableSelection,\n      isFirst: index === 0,\n      isDarkMode,\n      hideBorder,\n    }),\n    onDoubleClick: createEventHandler(doubleClickHandler),\n    onKeyDown: createEventHandler(keyboardHandler),\n    onContextMenu: createEventHandler(contextMenuHandler),\n    onPointerEnter: createEventHandler(() => setIsHovered(true)),\n    onPointerLeave: createEventHandler(() => setIsHovered(false)),\n    ...domProps,\n  };\n\n  const RowElement = renderAs || 'tr';\n\n  return (\n    <RowElement\n      item={RowElement === 'tr' ? (undefined as any) : item}\n      {...tableRowProps}\n    >\n      <CheckboxCell item={item} />\n      {columns.map((column, cellIndex) => (\n        <TableCell\n          rowIndex={index}\n          rowIsHovered={isHovered}\n          index={cellIndex}\n          item={item}\n          key={`${item.id}-${column.key}`}\n        />\n      ))}\n    </RowElement>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ArrowDownwardIcon = createSvgIcon(\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\n, 'ArrowDownwardOutlined');\n","import {useContext, useState} from 'react';\nimport clsx from 'clsx';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\n\ninterface HeaderCellProps {\n  index: number;\n}\nexport function HeaderCell({index}: HeaderCellProps) {\n  const {\n    enableSelection,\n    columns,\n    sortDescriptor,\n    onSortChange,\n    enableSorting,\n  } = useContext(TableContext);\n  const isFirst = enableSelection ? false : index === 0;\n  const isLast = index === columns.length - 1;\n  const column = columns[index];\n\n  const style = cellStyle({isFirst, isLast, column});\n\n  const [isHovered, setIsHovered] = useState(false);\n\n  const sortingKey = column.sortingKey || column.key;\n  const allowSorting = column.allowsSorting && enableSorting;\n  const {orderBy, orderDir} = sortDescriptor || {};\n\n  const sortActive = allowSorting && orderBy === sortingKey;\n\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\n  if (sortActive && orderDir === 'asc') {\n    ariaSort = 'ascending';\n  } else if (sortActive && orderDir === 'desc') {\n    ariaSort = 'descending';\n  } else if (allowSorting) {\n    ariaSort = 'none';\n  }\n\n  const toggleSorting = () => {\n    if (!allowSorting) return;\n\n    let newSort: SortDescriptor;\n\n    // if this col was sorted desc, go to asc\n    if (sortActive && orderDir === 'desc') {\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\n\n      // if this col was sorted asc, clear sort\n    } else if (sortActive && orderDir === 'asc') {\n      newSort = {orderBy: undefined, orderDir: undefined};\n\n      // if sort was on another col, or no sort was applied yet, start from desc\n    } else {\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\n    }\n\n    onSortChange?.(newSort);\n  };\n\n  const sortVisible = sortActive || isHovered;\n  const sortVariants = {\n    visible: {opacity: 1, y: 0},\n    hidden: {opacity: 0, y: '-25%'},\n  };\n\n  return (\n    <th\n      onMouseEnter={() => {\n        setIsHovered(true);\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false);\n      }}\n      onKeyDown={e => {\n        if (e.key === ' ' || e.key === 'Enter') {\n          e.preventDefault();\n          toggleSorting();\n        }\n      }}\n      onClick={toggleSorting}\n      tabIndex={-1}\n      aria-sort={ariaSort}\n      data-testid={`header-col-${column.key}`}\n      className={clsx(\n        style,\n        'text-muted font-medium text-xs',\n        allowSorting && 'cursor-pointer'\n      )}\n    >\n      {column.hideHeader ? (\n        <div className=\"sr-only\">{column.header()}</div>\n      ) : (\n        column.header()\n      )}\n      <AnimatePresence>\n        {allowSorting && (\n          <m.span\n            variants={sortVariants}\n            animate={sortVisible ? 'visible' : 'hidden'}\n            initial={false}\n            transition={{type: 'tween'}}\n            key=\"sort-icon\"\n            className=\"inline-block ml-6 -mt-2\"\n            data-testid=\"table-sort-button\"\n            aria-hidden={!sortVisible}\n          >\n            <ArrowDownwardIcon\n              size=\"xs\"\n              className={clsx(\n                'text-muted',\n                orderDir === 'asc' &&\n                  orderBy === sortingKey &&\n                  'rotate-180 transition-transform'\n              )}\n            />\n          </m.span>\n        )}\n      </AnimatePresence>\n    </th>\n  );\n}\n","import {useContext} from 'react';\nimport {TableContext} from './table-context';\nimport {cellStyle} from './table-style';\nimport {Checkbox} from '../forms/toggle/checkbox';\nimport {useTrans} from '../../i18n/use-trans';\nimport {useIsMobileMediaQuery} from '../../utils/hooks/is-mobile-media-query';\n\nexport function SelectAllCell() {\n  const isMobile = useIsMobileMediaQuery();\n  const {trans} = useTrans();\n  const {\n    data,\n    selectedRows,\n    onSelectionChange,\n    enableSelection,\n    selectionStyle,\n  } = useContext(TableContext);\n\n  if (!enableSelection || selectionStyle === 'highlight' || isMobile)\n    return null;\n\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\n\n  return (\n    <th\n      aria-colindex={1}\n      className={cellStyle({\n        width: 'w-64 flex-shrink-0 flex-grow-0',\n        isFirst: true,\n      })}\n    >\n      <Checkbox\n        aria-label={trans({message: 'Select all'})}\n        inputTestId=\"select-all-checkbox\"\n        isIndeterminate={someRowsSelected}\n        checked={allRowsSelected}\n        onChange={() => {\n          if (allRowsSelected) {\n            onSelectionChange([]);\n          } else {\n            onSelectionChange(data.map(d => d.id));\n          }\n        }}\n      />\n    </th>\n  );\n}\n","import React, {\n  cloneElement,\n  ComponentPropsWithoutRef,\n  JSXElementConstructor,\n  MutableRefObject,\n  ReactElement,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport {useControlledState} from '@react-stately/utils';\nimport {rowStyle} from './table-style';\nimport {SortDescriptor} from './types/sort-descriptor';\nimport {useGridNavigation} from './navigate-grid';\nimport {RowElementProps, TableRow} from './table-row';\nimport {\n  TableContext,\n  TableContextValue,\n  TableSelectionStyle,\n} from './table-context';\nimport {HeaderCell} from './header-cell';\nimport {SelectAllCell} from './select-all-cell';\nimport {ColumnConfig} from '../../datatable/column-config';\nimport {TableDataItem} from './types/table-data-item';\nimport clsx from 'clsx';\nimport {useInteractOutside} from '@react-aria/interactions';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\n\nexport interface TableProps<T extends TableDataItem>\n  extends ComponentPropsWithoutRef<'table'> {\n  className?: string;\n  columns: ColumnConfig<T>[];\n  hideHeaderRow?: boolean;\n  data: T[];\n  meta?: any;\n  tableRef?: MutableRefObject<HTMLTableElement>;\n  selectedRows?: (number | string)[];\n  defaultSelectedRows?: (number | string)[];\n  onSelectionChange?: (keys: (number | string)[]) => void;\n  sortDescriptor?: SortDescriptor;\n  onSortChange?: (descriptor: SortDescriptor) => any;\n  enableSorting?: boolean;\n  onDelete?: (items: T[]) => void;\n  enableSelection?: boolean;\n  selectionStyle?: TableSelectionStyle;\n  ariaLabelledBy?: string;\n  onAction?: (item: T, index: number) => void;\n  selectRowOnContextMenu?: boolean;\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\n  tableBody?: ReactElement<TableBodyProps>;\n  hideBorder?: boolean;\n  closeOnInteractOutside?: boolean;\n}\nexport function Table<T extends TableDataItem>({\n  className,\n  columns,\n  hideHeaderRow,\n  data,\n  selectedRows: propsSelectedRows,\n  defaultSelectedRows: propsDefaultSelectedRows,\n  onSelectionChange: propsOnSelectionChange,\n  sortDescriptor: propsSortDescriptor,\n  onSortChange: propsOnSortChange,\n  enableSorting = true,\n  onDelete,\n  enableSelection = true,\n  selectionStyle = 'checkbox',\n  ariaLabelledBy,\n  selectRowOnContextMenu,\n  onAction,\n  renderRowAs,\n  tableBody,\n  meta,\n  tableRef: propsTableRef,\n  hideBorder = false,\n  closeOnInteractOutside = false,\n  ...domProps\n}: TableProps<T>) {\n  const [selectedRows, onSelectionChange] = useControlledState(\n    propsSelectedRows,\n    propsDefaultSelectedRows || [],\n    propsOnSelectionChange\n  );\n\n  const [sortDescriptor, onSortChange] = useControlledState(\n    propsSortDescriptor,\n    undefined,\n    propsOnSortChange\n  );\n\n  const toggleRow = useCallback(\n    (item: TableDataItem) => {\n      const newValues = [...selectedRows];\n      if (!newValues.includes(item.id)) {\n        newValues.push(item.id);\n      } else {\n        const index = newValues.indexOf(item.id);\n        newValues.splice(index, 1);\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange]\n  );\n\n  const selectRow = useCallback(\n    // allow deselecting all rows by passing in null\n    (item: TableDataItem | null, merge?: boolean) => {\n      let newValues: (string | number)[] = [];\n      if (item) {\n        newValues = merge\n          ? [...selectedRows?.filter(id => id !== item.id), item.id]\n          : [item.id];\n      }\n      onSelectionChange(newValues);\n    },\n    [selectedRows, onSelectionChange]\n  );\n\n  const contextValue: TableContextValue<T> = useMemo(() => {\n    return {\n      selectedRows,\n      onSelectionChange,\n      enableSorting,\n      enableSelection,\n      selectionStyle,\n      data,\n      columns,\n      sortDescriptor,\n      onSortChange,\n      toggleRow,\n      selectRow,\n      onAction,\n      selectRowOnContextMenu,\n      meta,\n    };\n  }, [\n    columns,\n    data,\n    enableSelection,\n    enableSorting,\n    selectionStyle,\n    onAction,\n    selectRowOnContextMenu,\n    onSelectionChange,\n    onSortChange,\n    selectedRows,\n    sortDescriptor,\n    toggleRow,\n    selectRow,\n    meta,\n  ]);\n\n  const navProps = useGridNavigation({\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\n    rowCount: data.length + 1,\n  });\n\n  const headerRow = hideHeaderRow ? null : (\n    <thead>\n      <tr aria-rowindex={1} className={rowStyle({isHeader: true})}>\n        <SelectAllCell />\n        {columns.map((column, columnIndex) => (\n          <HeaderCell index={columnIndex} key={column.key} />\n        ))}\n      </tr>\n    </thead>\n  );\n\n  const rowRenderer = renderRowAs as any;\n  if (!tableBody) {\n    tableBody = (\n      <BasicTableBody renderRowAs={rowRenderer} hideBorder={hideBorder} />\n    );\n  } else {\n    tableBody = cloneElement(tableBody, {renderRowAs: rowRenderer, hideBorder});\n  }\n\n  // deselect rows when clicking outside the table\n  const tableRef = useObjectRef(propsTableRef);\n  useInteractOutside({\n    ref: tableRef,\n    onInteractOutside: e => {\n      if (\n        closeOnInteractOutside &&\n        enableSelection &&\n        selectedRows?.length &&\n        // don't deselect if clicking on a dialog (for example is table row has a context menu)\n        !(e.target as HTMLElement).closest('[role=\"dialog\"]')\n      ) {\n        onSelectionChange([]);\n      }\n    },\n  });\n\n  return (\n    <TableContext.Provider value={contextValue as any}>\n      <table\n        {...mergeProps(domProps, navProps, {\n          onKeyDown: (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onSelectionChange([]);\n              }\n            } else if (e.key === 'Delete') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (selectedRows?.length) {\n                onDelete?.(\n                  data.filter(item => selectedRows?.includes(item.id))\n                );\n              }\n            } else if (isCtrlKeyPressed(e) && e.key === 'a') {\n              e.preventDefault();\n              e.stopPropagation();\n              if (enableSelection) {\n                onSelectionChange(data.map(item => item.id));\n              }\n            }\n          },\n        })}\n        ref={tableRef}\n        aria-multiselectable={enableSelection ? true : undefined}\n        aria-labelledby={ariaLabelledBy}\n        className={clsx(\n          className,\n          'select-none isolate outline-none text-sm w-full max-w-full align-top'\n        )}\n      >\n        {headerRow}\n        {tableBody}\n      </table>\n    </TableContext.Provider>\n  );\n}\n\nexport interface TableBodyProps {\n  renderRowAs?: TableProps<TableDataItem>['renderRowAs'];\n  hideBorder?: boolean;\n}\nfunction BasicTableBody({renderRowAs, hideBorder}: TableBodyProps) {\n  const {data} = useContext(TableContext);\n  return (\n    <tbody>\n      {data.map((item, rowIndex) => (\n        <TableRow\n          item={item}\n          index={rowIndex}\n          key={item.id}\n          renderAs={renderRowAs}\n          hideBorder={hideBorder}\n        />\n      ))}\n    </tbody>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const SearchIcon = createSvgIcon(\n  <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\n, 'SearchOutlined');\n","import {FormSelect} from '../../../ui/forms/select/select';\nimport {Item} from '../../../ui/forms/listbox/item';\nimport {Trans} from '../../../i18n/trans';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function SelectFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormSelect\n      size=\"sm\"\n      autoFocus\n      name={`${filter.key}.value`}\n      selectionMode=\"single\"\n    >\n      {filter.options.map(option => (\n        <Item key={option.key} value={option.key}>\n          <Trans {...option.label} />\n        </Item>\n      ))}\n    </FormSelect>\n  );\n}\n","import {FormDateRangePicker} from '../../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function DateFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormDateRangePicker\n      size=\"sm\"\n      name={`${filter.key}.value`}\n      autoFocus\n      granularity=\"day\"\n      closeDialogOnSelection={true}\n    />\n  );\n}\n","import {useQuery, UseQueryOptions} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\nconst defaultEndpoint = (model: string, prefix: string = 'normalized-models') =>\n  `${prefix}/${model}`;\n\ninterface Response extends BackendResponse {\n  results: NormalizedModel[];\n}\n\ninterface Params {\n  query?: string;\n  perPage?: number;\n}\n\nexport function useNormalizedModels(\n  model: string,\n  queryParams: Params,\n  queryOptions?: Omit<\n    UseQueryOptions<Response, unknown, Response, [string, Params]>,\n    'queryKey' | 'queryFn'\n  > | null,\n  userEndpoint?: string\n) {\n  const endpoint = defaultEndpoint(model, userEndpoint);\n  return useQuery(\n    [endpoint, queryParams],\n    () => fetchUsers(endpoint, queryParams),\n    {\n      keepPreviousData: true,\n      ...queryOptions,\n    }\n  );\n}\n\nasync function fetchUsers(endpoint: string, params: Params) {\n  return apiClient.get<Response>(endpoint, {params}).then(r => r.data);\n}\n","import {useQuery} from '@tanstack/react-query';\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\n\nconst buildEndpoint = (\n  modelName: string,\n  modelId: string | number,\n  prefix = 'normalized-models'\n) => `${prefix}/${modelName}/${modelId}`;\n\ninterface Response extends BackendResponse {\n  model: NormalizedModel;\n}\n\nexport function useNormalizedModel(\n  model: string,\n  modelId: string | number | null,\n  queryParams?: Record<string, string>,\n  userEndpoint?: string\n) {\n  const endpoint = buildEndpoint(model, modelId!, userEndpoint);\n  return useQuery(\n    [endpoint, queryParams],\n    () => fetchModel(endpoint, queryParams),\n    {\n      enabled: model != null && modelId != null,\n    }\n  );\n}\n\nasync function fetchModel(\n  endpoint: string,\n  params?: Record<string, string>\n): Promise<Response> {\n  return apiClient.get(endpoint, {params}).then(r => r.data);\n}\n","import React, {ReactNode, useRef, useState} from 'react';\nimport {useTrans} from '../../i18n/use-trans';\nimport {Trans} from '../../i18n/trans';\nimport {Avatar} from '../images/avatar';\nimport {Tooltip} from '../tooltip/tooltip';\nimport {IconButton} from '../buttons/icon-button';\nimport {EditIcon} from '../../icons/material/Edit';\nimport {message} from '../../i18n/message';\nimport {Item} from './listbox/item';\nimport {ComboBox} from './combobox/combobox';\nimport {useController} from 'react-hook-form';\nimport {useControlledState} from '@react-stately/utils';\nimport {getInputFieldClassNames} from './input-field/get-input-field-class-names';\nimport clsx from 'clsx';\nimport {Skeleton} from '../skeleton/skeleton';\nimport {useNormalizedModels} from '../../users/queries/use-normalized-models';\nimport {useNormalizedModel} from '../../users/queries/use-normalized-model';\nimport {AnimatePresence, m} from 'framer-motion';\nimport {opacityAnimation} from '../animation/opacity-animation';\n\ninterface NormalizedModelFieldProps {\n  modelType: string;\n  label?: ReactNode;\n  className?: string;\n  value?: string | number;\n  defaultValue?: string | number;\n  onChange?: (value: string | number) => void;\n  invalid?: boolean;\n  errorMessage?: string;\n  description?: ReactNode;\n  openMenuOnFocus?: boolean;\n  autoFocus?: boolean;\n  queryParams?: Record<string, string>;\n  customEndpoint?: string;\n  disabled?: boolean;\n}\nexport function NormalizedModelField({\n  modelType,\n  label,\n  className,\n  value,\n  defaultValue = '',\n  onChange,\n  description,\n  errorMessage,\n  invalid,\n  openMenuOnFocus,\n  autoFocus,\n  queryParams,\n  customEndpoint,\n  disabled,\n}: NormalizedModelFieldProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [selectedValue, setSelectedValue] = useControlledState(\n    value,\n    defaultValue,\n    onChange\n  );\n  const query = useNormalizedModels(\n    modelType,\n    {\n      query: inputValue,\n      ...queryParams,\n    },\n    null,\n    customEndpoint\n  );\n  const {trans} = useTrans();\n\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\n\n  if (selectedValue) {\n    return (\n      <div className={className}>\n        <div className={fieldClassNames.label}>{label}</div>\n        <div\n          className={clsx('p-10 border rounded', invalid && 'border-danger')}\n        >\n          <AnimatePresence initial={false} mode=\"wait\">\n            <SelectedModelPreview\n              disabled={disabled}\n              endpoint={customEndpoint}\n              modelType={modelType}\n              modelId={selectedValue}\n              queryParams={queryParams}\n              onEditClick={() => {\n                setSelectedValue('');\n                setInputValue('');\n                requestAnimationFrame(() => {\n                  inputRef.current?.focus();\n                });\n              }}\n            />\n          </AnimatePresence>\n        </div>\n        {description && !errorMessage && (\n          <div className={fieldClassNames.description}>{description}</div>\n        )}\n        {errorMessage && (\n          <div className={fieldClassNames.error}>{errorMessage}</div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <ComboBox\n      className={className}\n      invalid={invalid}\n      errorMessage={errorMessage}\n      description={description}\n      isAsync\n      placeholder={trans(message('Find item..'))}\n      label={label}\n      isLoading={query.isFetching}\n      items={query.data?.results}\n      inputValue={inputValue}\n      onInputValueChange={setInputValue}\n      clearInputOnItemSelection\n      selectionMode=\"single\"\n      selectedValue={selectedValue}\n      onSelectionChange={setSelectedValue}\n      ref={inputRef}\n      openMenuOnFocus={openMenuOnFocus}\n      autoFocus={autoFocus}\n      disabled={disabled}\n    >\n      {model => (\n        <Item\n          value={model.id}\n          key={model.id}\n          description={model.description}\n          startIcon={<Avatar src={model.image} />}\n        >\n          {model.name}\n        </Item>\n      )}\n    </ComboBox>\n  );\n}\n\ninterface SelectedModelPreviewProps {\n  modelType: string;\n  modelId: string | number;\n  selectedValue?: number | string;\n  onEditClick?: () => void;\n  endpoint?: string;\n  disabled?: boolean;\n  queryParams?: NormalizedModelFieldProps['queryParams'];\n}\nfunction SelectedModelPreview({\n  modelType,\n  modelId,\n  onEditClick,\n  endpoint,\n  disabled,\n  queryParams,\n}: SelectedModelPreviewProps) {\n  const {data, isLoading} = useNormalizedModel(\n    modelType,\n    modelId,\n    queryParams,\n    endpoint\n  );\n\n  if (isLoading || !data?.model) {\n    return <LoadingSkeleton key=\"skeleton\" />;\n  }\n\n  return (\n    <m.div\n      className={clsx(\n        'flex items-center gap-10',\n        disabled && 'text-disabled cursor-not-allowed pointer-events-none'\n      )}\n      key=\"preview\"\n      {...opacityAnimation}\n    >\n      {data.model.image && <Avatar src={data.model.image} />}\n      <div>\n        <div>{data.model.name}</div>\n        <div className=\"text-muted text-xs\">{data.model.description}</div>\n      </div>\n      <Tooltip label={<Trans message=\"Change item\" />}>\n        <IconButton\n          className=\"ml-auto text-muted\"\n          size=\"sm\"\n          onClick={onEditClick}\n          disabled={disabled}\n        >\n          <EditIcon />\n        </IconButton>\n      </Tooltip>\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\n      <div className=\"flex-auto max-h-[36px]\">\n        <Skeleton className=\"text-xs\" />\n        <Skeleton className=\"text-xs max-h-8\" />\n      </div>\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\n    </m.div>\n  );\n}\n\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\n  name: string;\n}\nexport function FormNormalizedModelField({\n  name,\n  ...fieldProps\n}: FormNormalizedModelFieldProps) {\n  const {\n    field: {onChange, value = ''},\n    fieldState: {invalid, error},\n  } = useController({\n    name,\n  });\n\n  return (\n    <NormalizedModelField\n      value={value}\n      onChange={onChange}\n      invalid={invalid}\n      errorMessage={error?.message}\n      {...fieldProps}\n    />\n  );\n}\n","import {FilterPanelProps} from './filter-panel-props';\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\n\nexport function NormalizedModelFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <FormNormalizedModelField\n      name={`${filter.key}.value`}\n      className=\"mb-20\"\n      modelType={filter.model!}\n      openMenuOnFocus\n      autoFocus\n    />\n  );\n}\n","import {FilterOperator} from './backend-filter';\nimport {message} from '../../i18n/message';\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\n\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\n  {\n    '=': message('is'),\n    '!=': message('is not'),\n    '>': message('is greater than'),\n    '>=': message('is greater than or equal to'),\n    '<': message('is less than'),\n    '<=': message('is less than or equal to'),\n    has: message('Include'),\n    doesntHave: message('Do not include'),\n    between: message('Is between'),\n  };\n","import {FormTextField} from '../../../ui/forms/input-field/text-field/text-field';\nimport {Trans} from '../../../i18n/trans';\nimport {FormSelect} from '../../../ui/forms/select/select';\nimport {Item} from '../../../ui/forms/listbox/item';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {Fragment} from 'react';\nimport {FilterPanelProps} from './filter-panel-props';\n\nexport function InputFilterPanel({filter}: FilterPanelProps) {\n  return (\n    <Fragment>\n      <FormSelect\n        autoFocus\n        selectionMode=\"single\"\n        name={`${filter.key}.operator`}\n        className=\"mb-14\"\n        size=\"sm\"\n        required\n      >\n        {filter.operators.map(operator => (\n          <Item key={operator} value={operator}>\n            {<Trans {...FilterOperatorNames[operator]} />}\n          </Item>\n        ))}\n      </FormSelect>\n      <FormTextField\n        size=\"sm\"\n        name={`${filter.key}.value`}\n        type={filter.inputType}\n        required\n      />\n    </Fragment>\n  );\n}\n","import {BackendFilter, FilterControlType} from '../backend-filter';\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\nimport {Button} from '../../../ui/buttons/button';\nimport {KeyboardArrowDownIcon} from '../../../icons/material/KeyboardArrowDown';\nimport {Trans} from '../../../i18n/trans';\nimport clsx from 'clsx';\n\ninterface TriggerButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  isInactive?: boolean;\n  filter: BackendFilter;\n  children?: ReactNode;\n}\nexport const FilterListTriggerButton = forwardRef<\n  HTMLButtonElement,\n  TriggerButtonProps\n>((props, ref) => {\n  // pass through all props from menu trigger and dialog trigger to button\n  const {isInactive, filter, ...domProps} = props;\n\n  if (isInactive) {\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\n  }\n\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\n});\n\ninterface InactiveFilterButtonProps\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\n  filter: BackendFilter;\n}\nexport const InactiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, ...domProps}, ref) => {\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"paper\"\n      radius=\"rounded-md\"\n      border=\"border\"\n      ref={ref}\n      endIcon={<KeyboardArrowDownIcon />}\n      {...domProps}\n    >\n      <Trans {...filter.label} />\n    </Button>\n  );\n});\n\nexport const ActiveFilterButton = forwardRef<\n  HTMLButtonElement,\n  InactiveFilterButtonProps\n>(({filter, children, ...domProps}, ref) => {\n  const isBoolean = filter.type === FilterControlType.BooleanToggle;\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"xs\"\n      color=\"primary\"\n      radius=\"rounded-r-md\"\n      border=\"border-y border-r\"\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\n      ref={ref}\n      {...domProps}\n    >\n      <span\n        className={clsx(\n          !isBoolean && 'border-r border-r-primary-light mr-8 pr-8'\n        )}\n      >\n        <Trans {...filter.label} />\n      </span>\n      {children}\n    </Button>\n  );\n});\n","import {DialogTrigger} from '../../../ui/overlays/dialog/dialog-trigger';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {ReactNode} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useDialogContext} from '../../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../../ui/overlays/dialog/dialog';\nimport {DialogHeader} from '../../../ui/overlays/dialog/dialog-header';\nimport {Trans} from '../../../i18n/trans';\nimport {DialogBody} from '../../../ui/overlays/dialog/dialog-body';\nimport {Form} from '../../../ui/forms/form';\nimport {DialogFooter} from '../../../ui/overlays/dialog/dialog-footer';\nimport {Button} from '../../../ui/buttons/button';\nimport {FilterListControlProps} from './filter-list-control';\n\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\n  label: ReactNode;\n  panel: ReactNode;\n}\nexport function FilterListItemDialogTrigger(\n  props: FilterListItemDialogTriggerProps\n) {\n  const {onValueChange, isInactive, filter, label} = props;\n  return (\n    <DialogTrigger\n      offset={10}\n      type=\"popover\"\n      onClose={(value?: FilterItemFormValue) => {\n        if (value !== undefined) {\n          onValueChange(value);\n        }\n      }}\n    >\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\n        {label}\n      </FilterListTriggerButton>\n      <FilterListControlDialog {...props} />\n    </DialogTrigger>\n  );\n}\n\nexport function FilterListControlDialog({\n  filter,\n  panel,\n  value,\n  operator,\n}: FilterListItemDialogTriggerProps) {\n  const form = useForm<Record<string, FilterItemFormValue>>({\n    defaultValues: {\n      [filter.key]: {value, operator},\n    },\n  });\n  const {close, formId} = useDialogContext();\n  return (\n    <Dialog size=\"xs\">\n      <DialogHeader>\n        <Trans {...filter.label} />\n      </DialogHeader>\n      <DialogBody padding=\"px-14 pt-14 pb-4\">\n        <Form\n          form={form}\n          id={formId}\n          onSubmit={formValue => {\n            close(formValue[filter.key]);\n          }}\n        >\n          {filter.description && (\n            <div className=\"text-muted text-xs mb-14\">\n              <Trans {...filter.description} />\n            </div>\n          )}\n          {panel}\n        </Form>\n      </DialogBody>\n      <DialogFooter>\n        <Button\n          form={formId}\n          type=\"submit\"\n          variant=\"flat\"\n          color=\"primary\"\n          size=\"xs\"\n        >\n          <Trans message=\"Apply\" />\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n  FilterOperator,\n} from '../backend-filter';\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\nimport {Trans} from '../../../i18n/trans';\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\nimport {Avatar} from '../../../ui/images/avatar';\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\nimport {DateFilterPanel} from '../panels/date-filter-panel';\nimport {Fragment, Key, ReactNode} from 'react';\nimport {DateRangePresets} from '../../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\nimport {FormattedDateTimeRange} from '../../../i18n/formatted-date-time-range';\nimport {AbsoluteDateRange} from '../../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\nimport {InputFilterPanel} from '../panels/input-filter-panel';\nimport {FilterOperatorNames} from '../filter-operator-names';\nimport {FilterItemFormValue} from '../add-filter-dialog';\nimport {useNormalizedModel} from '../../../users/queries/use-normalized-model';\nimport {Skeleton} from '../../../ui/skeleton/skeleton';\n\nexport interface FilterListControlProps<T = unknown> {\n  filter: BackendFilter;\n  onValueChange: (value: FilterItemFormValue<T>) => void;\n  value: T;\n  operator?: FilterOperator;\n  isInactive?: boolean;\n}\nexport function FilterListControl(props: FilterListControlProps<any>) {\n  switch (props.filter.type) {\n    case FilterControlType.DatePicker:\n      return <DatePickerControl {...props} />;\n    case FilterControlType.BooleanToggle:\n      return <BooleanToggleControl {...props} />;\n    case FilterControlType.Select: {\n      return <SelectControl {...props} />;\n    }\n    case FilterControlType.Input: {\n      return <InputControl {...props} />;\n    }\n    case FilterControlType.SelectModel: {\n      return <SelectModelControl {...props} />;\n    }\n  }\n}\n\nfunction DatePickerControl(\n  props: FilterListControlProps<Required<AbsoluteDateRange>>\n) {\n  const {value, filter} = props;\n\n  let valueLabel: ReactNode;\n  if (value.preset !== undefined) {\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\n  } else {\n    valueLabel = (\n      <FormattedDateTimeRange\n        start={new Date(value.start)}\n        end={new Date(value.end)}\n        options={{dateStyle: 'medium'}}\n      />\n    );\n  }\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={valueLabel}\n      panel={<DateFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction BooleanToggleControl({\n  filter,\n  isInactive,\n  onValueChange,\n}: FilterListControlProps<boolean>) {\n  return (\n    <FilterListTriggerButton\n      onClick={() => {\n        onValueChange({value: true});\n      }}\n      filter={filter}\n      isInactive={isInactive}\n    />\n  );\n}\n\nfunction SelectControl(props: FilterListControlProps<Key>) {\n  const {filter, value} = props;\n  const option = filter.options.find(o => o.key === value);\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={option ? <Trans {...option.label} /> : null}\n      panel={<SelectFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction InputControl(props: FilterListControlProps<string>) {\n  const {filter, value, operator} = props;\n\n  const operatorLabel = operator ? (\n    <Trans {...FilterOperatorNames[operator]} />\n  ) : null;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={\n        <Fragment>\n          {operatorLabel} {value}\n        </Fragment>\n      }\n      panel={<InputFilterPanel filter={filter} />}\n    />\n  );\n}\n\nfunction SelectModelControl(props: FilterListControlProps<string>) {\n  const {value, filter} = props;\n  const {isLoading, data} = useNormalizedModel(filter.model!, value);\n\n  const skeleton = (\n    <Fragment>\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\n      <Skeleton variant=\"rect\" size=\"w-50\" />\n    </Fragment>\n  );\n  const modelPreview = (\n    <Fragment>\n      <Avatar size=\"xs\" src={data?.model.image} className=\"mr-6\" />\n      {data?.model.name}\n    </Fragment>\n  );\n\n  const label = isLoading || !data ? skeleton : modelPreview;\n\n  return (\n    <FilterListItemDialogTrigger\n      {...props}\n      label={label}\n      panel={<NormalizedModelFilterPanel filter={filter} />}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {BackendFilter} from '../backend-filter';\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\nimport {IconButton} from '../../../ui/buttons/icon-button';\nimport {CloseIcon} from '../../../icons/material/Close';\nimport {FilterListControl} from './filter-list-control';\nimport {FilterItemFormValue} from '../add-filter-dialog';\n\ninterface FilterListProps {\n  filters: BackendFilter[];\n  // these filters will always be shown, even if value is not yet selected for filter\n  pinnedFilters?: string[];\n  className?: string;\n}\nexport function FilterList({\n  filters,\n  pinnedFilters,\n  className,\n}: FilterListProps) {\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\n    filters,\n    pinnedFilters\n  );\n\n  if (!decodedFilters.length) return null;\n\n  return (\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\n      {decodedFilters.map((field, index) => {\n        const filter = filters.find(f => f.key === field.key)!;\n\n        const handleValueChange = (payload: FilterItemFormValue) => {\n          const newFilters = [...decodedFilters];\n          newFilters.splice(index, 1, {\n            key: filter.key,\n            value: payload.value,\n            isInactive: false,\n            operator: payload.operator || filter.defaultOperator,\n          });\n          replaceAll(newFilters);\n        };\n\n        return (\n          <div key={field.key}>\n            {!field.isInactive && (\n              <IconButton\n                variant=\"outline\"\n                color=\"primary\"\n                size=\"xs\"\n                radius=\"rounded-l-md\"\n                onClick={() => {\n                  remove(field.key);\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            )}\n            <FilterListControl\n              filter={filter}\n              isInactive={field.isInactive}\n              value={field.valueKey != null ? field.valueKey : field.value}\n              operator={field.operator}\n              onValueChange={handleValueChange}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const AddIcon = createSvgIcon(\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n, 'AddOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const FileDownloadIcon = createSvgIcon(\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\n, 'FileDownloadOutlined');\n","export function downloadFileFromUrl(url: string, name?: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  if (name) link.download = name;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n","import React, {Children, cloneElement, isValidElement, ReactElement} from 'react';\nimport clsx from 'clsx';\nimport type {ChipProps} from './chip';\n\ninterface ChipListProps {\n  className?: string;\n  children?: ReactElement | ReactElement[];\n  size?: ChipProps['size'];\n  radius?: ChipProps['radius'];\n  color?: ChipProps['color'];\n  selectable?: ChipProps['selectable'];\n}\nexport function ChipList({\n  className,\n  children,\n  size,\n  color,\n  radius,\n  selectable,\n}: ChipListProps) {\n  return (\n    <div className={clsx(className, 'flex items-center gap-8 flex-wrap')}>\n      {Children.map(children, chip => {\n        if (isValidElement<ChipProps>(chip)) {\n          return cloneElement<ChipProps>(chip, {\n            size,\n            color,\n            selectable,\n            radius,\n          });\n        }\n      })}\n    </div>\n  );\n}\n","import {ChipValue} from './chip-field';\n\nexport function stringToChipValue(value: string | number): ChipValue {\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\n  return {id: value, name: `${value}`, description: `${value}`};\n}\n","import React, {\n  HTMLAttributes,\n  Key,\n  ReactElement,\n  ReactNode,\n  Ref,\n  RefObject,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {useFocusManager} from '@react-aria/focus';\nimport clsx from 'clsx';\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\nimport {useControlledState} from '@react-stately/utils';\nimport {ChipList} from './chip-list';\nimport {Field} from '../field';\nimport {Input} from '../input';\nimport {Chip, ChipProps} from './chip';\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\nimport {ProgressCircle} from '../../../progress/progress-circle';\nimport {useField} from '../use-field';\nimport {Avatar} from '../../../images/avatar';\nimport {Listbox} from '../../listbox/listbox';\nimport {useListbox} from '../../listbox/use-listbox';\nimport {BaseFieldPropsWithDom} from '../base-field-props';\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\nimport {createEventHandler} from '@common/utils/dom/create-event-handler';\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\nimport {stringToChipValue} from './string-to-chip-value';\nimport {Popover} from '../../../overlays/popover';\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\n\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\n  invalid?: boolean;\n  errorMessage?: string;\n}\n\nexport type ChipFieldProps<T> = Omit<\n  ListboxProps,\n  'selectionMode' | 'displayWith'\n> &\n  Omit<\n    BaseFieldPropsWithDom<HTMLInputElement>,\n    'value' | 'onChange' | 'defaultValue'\n  > & {\n    value?: (ChipValue | string)[];\n    defaultValue?: (ChipValue | string)[];\n    displayWith?: (value: ChipValue) => ReactNode;\n    validateWith?: (value: ChipValue) => ChipValue;\n    allowCustomValue?: boolean;\n    showDropdownArrow?: boolean;\n    onChange?: (value: ChipValue[]) => void;\n    suggestions?: T[];\n    children?: ListBoxChildren<T>['children'];\n    placeholder?: string;\n    chipSize?: ChipProps['size'];\n    openMenuOnFocus?: boolean;\n    valueKey?: 'id' | 'name';\n    onChipClick?: (value: ChipValue) => void;\n  };\n\nfunction ChipFieldInner<T>(\n  props: ChipFieldProps<T>,\n  ref: Ref<HTMLInputElement>\n) {\n  const fieldRef = useRef<HTMLDivElement>(null);\n  const inputRef = useObjectRef(ref);\n  const {\n    displayWith = v => v.name,\n    validateWith,\n    children,\n    suggestions,\n    isLoading,\n    inputValue,\n    onInputValueChange,\n    onItemSelected,\n    placeholder,\n    onOpenChange,\n    chipSize = 'md',\n    openMenuOnFocus = true,\n    showEmptyMessage,\n    value: propsValue,\n    defaultValue,\n    onChange: propsOnChange,\n    valueKey,\n    isAsync,\n    allowCustomValue = true,\n    showDropdownArrow,\n    onChipClick,\n    ...inputFieldProps\n  } = props;\n  const fieldClassNames = getInputFieldClassNames({\n    ...props,\n    flexibleHeight: true,\n  });\n\n  const [value, onChange] = useChipFieldValueState(props);\n\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\n\n  const loadingIndicator = (\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\n  );\n\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\n\n  const {fieldProps, inputProps} = useField({\n    ...inputFieldProps,\n    focusRef: inputRef,\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow,\n  });\n\n  return (\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\n      <Input\n        ref={fieldRef}\n        className={clsx('flex items-center flex-wrap', fieldClassNames.input)}\n        onClick={() => {\n          // refocus input when clicking outside it, but while still inside chip field\n          inputRef.current?.focus();\n        }}\n      >\n        <ListWrapper\n          displayChipUsing={displayWith}\n          onChipClick={onChipClick}\n          items={value}\n          setItems={onChange}\n          chipSize={chipSize}\n        />\n        <ChipInput\n          showEmptyMessage={showEmptyMessage}\n          inputProps={inputProps}\n          inputValue={inputValue}\n          onInputValueChange={onInputValueChange}\n          fieldRef={fieldRef}\n          inputRef={inputRef}\n          chips={value}\n          setChips={onChange}\n          validateWith={validateWith}\n          isLoading={isLoading}\n          suggestions={suggestions}\n          placeholder={placeholder}\n          openMenuOnFocus={openMenuOnFocus}\n          listboxIsOpen={listboxIsOpen}\n          setListboxIsOpen={setListboxIsOpen}\n          allowCustomValue={allowCustomValue}\n        >\n          {children}\n        </ChipInput>\n      </Input>\n    </Field>\n  );\n}\n\ninterface ListWrapperProps {\n  items: ChipValue[];\n  setItems: (items: ChipValue[]) => void;\n  displayChipUsing: (value: ChipValue) => ReactNode;\n  chipSize?: ChipProps['size'];\n  onChipClick?: (value: ChipValue) => void;\n}\nfunction ListWrapper({\n  items,\n  setItems,\n  displayChipUsing,\n  chipSize,\n  onChipClick,\n}: ListWrapperProps) {\n  const manager = useFocusManager();\n  const removeItem = useCallback(\n    (key: Key) => {\n      const i = items.findIndex(cr => cr.id === key);\n      const newItems = [...items];\n      if (i > -1) {\n        newItems.splice(i, 1);\n        setItems(newItems);\n      }\n      return newItems;\n    },\n    [items, setItems]\n  );\n\n  return (\n    <ChipList\n      className=\"flex-shrink-0 flex-wrap max-w-full my-8\"\n      size={chipSize}\n      selectable\n    >\n      {items.map(item => (\n        <Chip\n          key={item.id}\n          errorMessage={item.errorMessage}\n          adornment={item.image ? <Avatar circle src={item.image} /> : null}\n          onClick={() => onChipClick?.(item)}\n          onRemove={() => {\n            const newItems = removeItem(item.id);\n            if (newItems.length) {\n              // focus previous chip\n              manager.focusPrevious({tabbable: true});\n            } else {\n              // focus input\n              manager.focusLast();\n            }\n          }}\n        >\n          {displayChipUsing(item)}\n        </Chip>\n      ))}\n    </ChipList>\n  );\n}\n\ninterface ChipInputProps<T> {\n  showEmptyMessage?: boolean;\n  inputProps: ReturnType<typeof useField>['inputProps'];\n  inputValue?: string;\n  onInputValueChange?: (value: string) => void;\n  fieldRef: RefObject<HTMLDivElement>;\n  inputRef: RefObject<HTMLInputElement>;\n  chips: ChipValue[];\n  setChips: (items: ChipValue[]) => void;\n  validateWith?: (value: ChipValue) => ChipValue;\n  isLoading?: boolean;\n  suggestions?: T[];\n  placeholder?: string;\n  openMenuOnFocus?: boolean;\n  listboxIsOpen: boolean;\n  setListboxIsOpen: (value: boolean) => void;\n  allowCustomValue: boolean;\n  children: ListBoxChildren<T>['children'];\n}\nfunction ChipInput<T>(props: ChipInputProps<T>) {\n  const {\n    inputRef,\n    fieldRef,\n    validateWith,\n    setChips,\n    chips,\n    suggestions,\n    inputProps,\n    placeholder,\n    openMenuOnFocus,\n    listboxIsOpen,\n    setListboxIsOpen,\n    allowCustomValue,\n  } = props;\n  const inputClassName = 'outline-none text-sm mx-8 my-4 h-30 flex-auto';\n  const manager = useFocusManager();\n\n  const addItems = useCallback(\n    (items?: ChipValue[]) => {\n      items = (items || []).filter(item => {\n        const invalid = !item || !item.id || !item.name;\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\n        return !alreadyExists && !invalid;\n      });\n      if (!items.length) return;\n\n      if (validateWith) {\n        items = items.map(item => validateWith(item));\n      }\n      setChips([...chips, ...items]);\n    },\n    [chips, setChips, validateWith]\n  );\n\n  const listbox = useListbox<T>({\n    ...props,\n    clearInputOnItemSelection: true,\n    isOpen: listboxIsOpen,\n    onOpenChange: setListboxIsOpen,\n    items: suggestions,\n    selectionMode: 'none',\n    role: 'listbox',\n    virtualFocus: true,\n    onItemSelected: value => {\n      handleItemSelection(value as string);\n    },\n  });\n\n  const {\n    state: {\n      activeIndex,\n      setActiveIndex,\n      isOpen,\n      setIsOpen,\n      inputValue,\n      setInputValue,\n    },\n    refs,\n    listboxId,\n    collection,\n    onInputChange,\n  } = listbox;\n\n  const handleItemSelection = (textValue: string) => {\n    const option =\n      collection.size && activeIndex != null\n        ? [...collection.values()][activeIndex]\n        : null;\n    if (option?.item) {\n      addItems([option.item]);\n    } else if (allowCustomValue) {\n      addItems([stringToChipValue(option ? option.value : textValue)]);\n    }\n\n    setInputValue('');\n    setActiveIndex(null);\n    setIsOpen(false);\n  };\n\n  // position dropdown relative to whole chip field, not the input\n  useLayoutEffect(() => {\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\n      listbox.reference(fieldRef.current);\n    }\n  }, [fieldRef, listbox, refs]);\n\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\n    useListboxKeyboardNavigation(listbox);\n\n  const handleFocusAndClick = createEventHandler(() => {\n    if (openMenuOnFocus && !isOpen) {\n      setIsOpen(true);\n    }\n  });\n\n  return (\n    <Listbox\n      listbox={listbox}\n      mobileOverlay={Popover}\n      onPointerDown={e => {\n        // prevent focus from leaving input when scrolling listbox via mouse\n        e.preventDefault();\n      }}\n    >\n      <input\n        type=\"text\"\n        className={clsx(inputClassName, 'bg-transparent')}\n        placeholder={placeholder}\n        {...mergeProps(inputProps, {\n          ref: inputRef,\n          value: inputValue,\n          onChange: onInputChange,\n          onPaste: e => {\n            const paste = e.clipboardData.getData('text');\n            const emails = paste.match(\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi\n            );\n            if (emails) {\n              e.preventDefault();\n              const selection = window.getSelection();\n              if (selection?.rangeCount) {\n                selection.deleteFromDocument();\n                addItems(emails.map(email => stringToChipValue(email)));\n              }\n            }\n          },\n          'aria-autocomplete': 'list',\n          'aria-controls': isOpen ? listboxId : undefined,\n          autoComplete: 'off',\n          autoCorrect: 'off',\n          spellCheck: 'false',\n          onKeyDown: e => {\n            const input = e.target as HTMLInputElement;\n\n            if (e.key === 'Enter') {\n              // prevent form submitting\n              e.preventDefault();\n              // add chip from selected listbox option or current input text value\n              handleItemSelection(input.value);\n              return;\n            }\n\n            // on escape, clear input and close dropdown\n            if (e.key === 'Escape' && isOpen) {\n              setIsOpen(false);\n              setInputValue('');\n            }\n\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\n            if (\n              e.key === 'ArrowUp' &&\n              isOpen &&\n              (activeIndex === 0 || activeIndex == null)\n            ) {\n              setActiveIndex(null);\n              return;\n            }\n\n            // block left and right arrows from navigating in input, if focus is on listbox\n            if (\n              activeIndex != null &&\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\n            ) {\n              e.preventDefault();\n              return;\n            }\n\n            // move focus on the last chip, if focus is at the  start of input\n            if (\n              (e.key === 'ArrowLeft' ||\n                e.key === 'Backspace' ||\n                e.key === 'Delete') &&\n              input.selectionStart === 0 &&\n              activeIndex == null &&\n              chips.length\n            ) {\n              manager.focusPrevious({tabbable: true});\n              return;\n            }\n\n            // fallthrough to listbox navigation handlers for arrow keys\n            const handled = handleTriggerKeyDown(e);\n            if (!handled) {\n              handleListboxKeyboardNavigation(e);\n            }\n          },\n          onFocus: handleFocusAndClick,\n          onClick: handleFocusAndClick,\n        } as HTMLAttributes<HTMLInputElement>)}\n      />\n    </Listbox>\n  );\n}\n\nfunction useChipFieldValueState({\n  onChange,\n  value,\n  defaultValue,\n  valueKey,\n}: ChipFieldProps<any>) {\n  // convert value from string[] to ChipValue[], if needed\n  const propsValue = useMemo(() => {\n    return mixedValueToChipValue(value);\n  }, [value]);\n\n  // convert defaultValue from string[] to ChipValue[], if needed\n  const propsDefaultValue = useMemo(() => {\n    return mixedValueToChipValue(defaultValue);\n  }, [defaultValue]);\n\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\n  const handleChange = useCallback(\n    (value: ChipValue[]) => {\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\n      onChange?.(newValue as any);\n    },\n    [onChange, valueKey]\n  );\n\n  return useControlledState<ChipValue[]>(\n    !propsValue ? undefined : propsValue,\n    propsDefaultValue || [],\n    handleChange\n  );\n}\n\nfunction mixedValueToChipValue(\n  value?: (string | number | ChipValue)[] | null\n): ChipValue[] | undefined {\n  if (value == null) {\n    return undefined;\n  }\n\n  return value.map(v => {\n    return typeof v !== 'object' ? stringToChipValue(v as string) : v;\n  });\n}\n\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>}\n) => ReactElement;\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {InputSize} from '../input-field/input-size';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ninterface SwitchProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: InputSize;\n  className?: string;\n  description?: ReactNode;\n  invalid?: boolean;\n  errorMessage?: string;\n}\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\n  (props, ref) => {\n    const {\n      children,\n      size = 'sm',\n      description,\n      className,\n      invalid,\n      autoFocus,\n      errorMessage,\n      ...domProps\n    } = props;\n\n    const inputRef = useObjectRef(ref);\n    useAutoFocus({autoFocus}, inputRef);\n\n    const style = getSizeClassName(size);\n    const fieldClassNames = getInputFieldClassNames(props);\n\n    const descriptionId = useId();\n\n    return (\n      <div className={clsx(className, 'isolate')}>\n        <label className=\"flex items-center select-none\">\n          <input\n            {...domProps}\n            type=\"checkbox\"\n            role=\"switch\"\n            aria-invalid={invalid || undefined}\n            aria-describedby={description ? descriptionId : undefined}\n            ref={inputRef}\n            aria-checked={domProps.checked}\n            className={clsx(\n              style,\n              !invalid &&\n                'checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark',\n              invalid && 'checked:bg-danger checked:border-danger',\n              'outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none',\n              'before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2',\n              'checked:before:border-white',\n              'focus-visible:ring',\n              props.disabled && 'opacity-80 cursor-not-allowed'\n            )}\n          />\n          {children && (\n            <span\n              className={clsx(\n                fieldClassNames.size.font,\n                'ml-12',\n                invalid && 'text-danger',\n                props.disabled && 'text-disabled'\n              )}\n            >\n              {children}\n            </span>\n          )}\n        </label>\n        {description && !errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.description}>\n            {description}\n          </div>\n        )}\n        {errorMessage && (\n          <div id={descriptionId} className={fieldClassNames.error}>\n            {errorMessage}\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\ninterface FormSwitchProps extends SwitchProps {\n  name: string;\n}\nexport function FormSwitch(props: FormSwitchProps) {\n  const {\n    field: {onChange, onBlur, value = false, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n  });\n\n  const formProps: Partial<SwitchProps> = {\n    onChange: e => {\n      if (e.target.value && e.target.value !== 'on') {\n        onChange(e.target.checked ? e.target.value : false);\n      } else {\n        onChange(e);\n      }\n    },\n    onBlur,\n    checked: !!value,\n    invalid,\n    errorMessage: error?.message,\n    name: props.name,\n  };\n\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\n}\n\nfunction getSizeClassName(size: InputSize): string {\n  switch (size) {\n    case 'xl':\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\n    case 'lg':\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\n    case 'md':\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\n    case 'xs':\n      return 'w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16';\n    default:\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\n  }\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const DeleteIcon = createSvgIcon(\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\n, 'DeleteOutlined');\n","import {DragMonitor} from './use-drag-monitor';\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport type DragSessionStatus =\n  | 'dropSuccess'\n  | 'dropFail'\n  | 'dragging'\n  | 'inactive';\n\nexport interface DragSession {\n  dragTargetId?: DraggableId;\n  status: DragSessionStatus;\n}\n\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\nexport const dragSession: DragSession = {\n  status: 'inactive',\n};\n","import React from 'react';\n\ntype NativeEvent =\n  | React.PointerEvent\n  | PointerEvent\n  | React.DragEvent<HTMLElement>\n  | DragEvent;\n\nexport interface InteractableEvent {\n  x: number;\n  y: number;\n  deltaX: number;\n  deltaY: number;\n  rect: InteractableRect;\n  nativeEvent: NativeEvent;\n}\n\nexport interface InteractableRect {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  angle?: number;\n}\n\nexport function interactableEvent({\n  e,\n  rect,\n  deltaX,\n  deltaY,\n}: {\n  e: NativeEvent;\n  rect: InteractableRect;\n  deltaX?: number;\n  deltaY?: number;\n}): InteractableEvent {\n  return {\n    rect,\n    x: e.clientX,\n    y: e.clientY,\n    deltaX: deltaX ?? 0,\n    deltaY: deltaY ?? 0,\n    nativeEvent: e,\n  };\n}\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\n\nexport let activeInteraction: InteractionName = null;\n\nexport function setActiveInteraction(name: InteractionName) {\n  activeInteraction = name;\n}\n","import {InteractableRect} from '../interactable-event';\n\nexport function domRectToObj(rect: DOMRect): InteractableRect {\n  return {\n    left: rect.left,\n    top: rect.top,\n    width: rect.width,\n    height: rect.height,\n  };\n}\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\nimport {InteractableRect} from '../interactable-event';\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\nimport {DraggableId} from './use-draggable';\nimport {ConnectedDroppable} from './use-droppable';\n\nexport function updateRects(\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\n) {\n  const observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      const {width, height, left, top} = entry.boundingClientRect;\n      const [id, target] =\n        [...targets].find(\n          ([, target]) => target.ref.current === entry.target\n        ) || [];\n      if (id == null || target == null) return;\n\n      const rect: InteractableRect = {\n        width,\n        height,\n        left,\n        top,\n      };\n      targets.set(id, {...target, rect});\n    });\n    observer.disconnect();\n  });\n\n  [...targets.values()].forEach(target => {\n    if (target.ref.current) {\n      observer.observe(target.ref.current);\n    }\n  });\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\nimport {\n  InteractableEvent,\n  interactableEvent,\n  InteractableRect,\n} from '../interactable-event';\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\nimport {updateRects} from './update-rects';\nimport {useGlobalListeners} from '@react-aria/utils';\nimport {DragMonitor} from './use-drag-monitor';\nimport {NativeFileDraggable} from './use-droppable';\n\ninterface DragState {\n  currentRect?: InteractableRect;\n  lastPosition: {x: number; y: number};\n  clickedEl?: HTMLElement;\n}\n\nexport type DragPreviewRenderer = (\n  draggable: ConnectedDraggable,\n  callback: (node: HTMLElement) => void\n) => void;\n\nexport type DraggableId = string | number | object;\n\nexport interface ConnectedDraggable<T = any> {\n  type: string;\n  id: DraggableId;\n  getData: () => T;\n  ref: RefObject<HTMLElement>;\n}\n\n// Either draggable from within the app, or file dragged in from the desktop\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\n\ninterface UseDragProps extends ConnectedDraggable {\n  disabled?: boolean;\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\n  preview?: RefObject<DragPreviewRenderer>;\n  hidePreview?: boolean;\n}\nexport function useDraggable({\n  id,\n  disabled,\n  ref,\n  preview,\n  hidePreview,\n  ...options\n}: UseDragProps) {\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\n\n  const state = useRef<DragState>({\n    lastPosition: {x: 0, y: 0},\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    if (!disabled) {\n      draggables.set(id, {\n        ...draggables.get(id),\n        id,\n        ref,\n        type: optionsRef.current.type,\n        getData: optionsRef.current.getData,\n      });\n    } else {\n      draggables.delete(id);\n    }\n    return () => {\n      draggables.delete(id);\n    };\n  }, [id, disabled, optionsRef, ref]);\n\n  // notify monitors connected to the same drag type as this draggable\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\n    dragMonitors.forEach(monitor => {\n      if (monitor.type === draggables.get(id)?.type) {\n        callback(monitor);\n      }\n    });\n  };\n\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = draggables.get(id);\n    const el = ref.current;\n    const clickedOnHandle =\n      !dragHandleRef.current ||\n      !state.clickedEl ||\n      dragHandleRef.current.contains(state.clickedEl);\n\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\n      e.preventDefault();\n      e.stopPropagation();\n      return;\n    }\n\n    updateRects(droppables);\n    setActiveInteraction('drag');\n\n    // hide default browser ghost image\n    if (hidePreview) {\n      hideNativeGhostImage(e);\n    }\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\n    e.dataTransfer.effectAllowed = 'move';\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\n    const ie = interactableEvent({rect: state.currentRect!, e});\n\n    // If there is a preview option, use it to render a custom preview image that will\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\n    if (preview?.current) {\n      preview.current(draggable, node => {\n        e.dataTransfer.setDragImage(node, 0, 0);\n      });\n    }\n\n    dragSession.status = 'dragging';\n    dragSession.dragTargetId = id;\n    if (ref.current) {\n      ref.current.dataset.dragging = 'true';\n    }\n\n    optionsRef.current.onDragStart?.(ie, draggable);\n\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\n    requestAnimationFrame(() => {\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\n    });\n\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\n    addGlobalListener(window, 'dragover', onDragOver, true);\n  };\n\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\n    e.preventDefault();\n\n    if (!state.currentRect) return;\n\n    const deltaX = e.clientX - state.lastPosition.x;\n    const deltaY = e.clientY - state.lastPosition.y;\n\n    const newRect = {\n      ...state.currentRect,\n      left: state.currentRect.left + deltaX,\n      top: state.currentRect.top + deltaY,\n    };\n\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\n\n    const target = draggables.get(id);\n    if (target) {\n      optionsRef.current.onDragMove?.(ie, target);\n      notifyMonitors(m => m.onDragMove?.(ie, target));\n    }\n\n    state.lastPosition = {x: e.clientX, y: e.clientY};\n    state.currentRect = newRect;\n  };\n\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\n    removeAllGlobalListeners();\n    if (!state.currentRect) return;\n\n    setActiveInteraction(null);\n    if (emptyImage) {\n      emptyImage.remove();\n    }\n\n    const ie = interactableEvent({rect: state.currentRect, e});\n\n    const draggable = draggables.get(id);\n    if (draggable) {\n      optionsRef.current.onDragEnd?.(ie, draggable);\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\n    }\n\n    // wait a frame before clearing so monitors have a chance to use drag session status\n    requestAnimationFrame(() => {\n      dragSession.dragTargetId = undefined;\n      dragSession.status = 'inactive';\n      if (ref.current) {\n        delete ref.current.dataset.dragging;\n      }\n    });\n  };\n\n  const draggableProps = {\n    draggable: !disabled,\n    onDragStart,\n    onDragEnd,\n    onPointerDown: (e: React.PointerEvent) => {\n      state.clickedEl = e.target as HTMLElement;\n    },\n  };\n\n  return {draggableProps, dragHandleRef};\n}\n\nlet emptyImage: HTMLImageElement | undefined;\nfunction hideNativeGhostImage(e: React.DragEvent) {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\n    document.body.append(emptyImage);\n    emptyImage.src =\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n","import {UploadedFile} from '../../../uploads/uploaded-file';\n\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\n  for (const item of dataTransfer.items) {\n    if (item.kind === 'file') {\n      if (typeof item.webkitGetAsEntry === 'function') {\n        const entry: FileSystemEntry | null = item.webkitGetAsEntry();\n        if (!entry) continue;\n\n        if (entry.isFile) {\n          if (entry.name === '.DS_Store') continue;\n          yield new UploadedFile(item.getAsFile()!, entry.fullPath);\n        } else if (entry.isDirectory) {\n          yield* getEntries(entry as FileSystemDirectoryEntry);\n        }\n      } else {\n        const file = item.getAsFile();\n        if (!file || file.name === '.DS_Store') continue;\n        yield new UploadedFile(file, (item as any).fullPath);\n      }\n    }\n  }\n}\n\nasync function* getEntries(item: FileSystemDirectoryEntry): AsyncIterable<any> {\n  const reader = item.createReader();\n\n  // We must call readEntries repeatedly because there may be a limit to the\n  // number of entries that are returned at once.\n  let entries: FileSystemEntry[];\n  do {\n    entries = await new Promise((resolve, reject) => {\n      reader.readEntries(resolve, reject);\n    });\n\n    for (const entry of entries) {\n      if (entry.isFile) {\n        if (entry.name === '.DS_Store') continue;\n        const file = await getEntryFile(entry as FileSystemFileEntry);\n        yield new UploadedFile(file, entry.fullPath);\n      } else if (entry.isDirectory) {\n        yield* getEntries(entry as FileSystemDirectoryEntry);\n      }\n    }\n  } while (entries.length > 0);\n}\n\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\n}\n","export async function asyncIterableToArray<T>(\n  iterator: AsyncIterable<T>\n): Promise<T[]> {\n  const items: T[] = [];\n  for await (const item of iterator) {\n    items.push(item);\n  }\n  return items;\n}\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\nimport {draggables, dragSession, droppables} from './drag-state';\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\nimport {asyncIterableToArray} from '@common/utils/array/async-iterable-to-array';\nimport {InteractableRect} from '../interactable-event';\nimport {DraggableId, MixedDraggable} from './use-draggable';\nimport {Simulate} from 'react-dom/test-utils';\nimport {UploadedFile} from '@common/uploads/uploaded-file';\n\nexport interface ConnectedDroppable {\n  id: DraggableId;\n  rect?: InteractableRect;\n  disabled?: boolean;\n  ref: RefObject<HTMLElement>;\n}\n\n// File dragged in from desktop\nexport interface NativeFileDraggable {\n  type: 'nativeFile';\n  el: null;\n  ref: null;\n  getData: () => Promise<UploadedFile[]>;\n}\n\ninterface UseDroppableProps<T extends HTMLElement> {\n  id: DraggableId;\n  disabled?: boolean;\n  types: ('nativeFile' | string)[];\n  ref: RefObject<T>;\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\n  allowDragEventsFromItself?: boolean;\n  onDragEnter?: (target: MixedDraggable) => void;\n  onDragLeave?: (target: MixedDraggable) => void;\n  onDragOver?: (\n    target: MixedDraggable,\n    e: React.DragEvent<HTMLElement>\n  ) => void;\n  // Handler that is called after draggable is held over droppable for a period of time.\n  // This typically opens the item so that the user can drop within it.\n  onDropActivate?: (e: MixedDraggable) => void;\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\n  acceptsDrop?: (target: MixedDraggable) => boolean;\n}\n\ninterface DroppableState {\n  dragOverElements: Set<Element>;\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\n}\n\nconst DROP_ACTIVATE_TIMEOUT = 400;\n\nexport function useDroppable<T extends HTMLElement>({\n  id,\n  disabled,\n  ref,\n  ...options\n}: UseDroppableProps<T>) {\n  const state = useRef<DroppableState>({\n    dragOverElements: new Set<Element>(),\n    dropActivateTimer: undefined,\n  }).current;\n\n  const optionsRef = useRef(options);\n  optionsRef.current = options;\n\n  useLayoutEffect(() => {\n    droppables.set(id, {\n      ...droppables.get(id),\n      disabled,\n      id,\n      ref,\n    });\n    return () => {\n      droppables.delete(id);\n    };\n  }, [id, optionsRef, disabled, ref]);\n\n  // check if drop target accepts drag target\n  const canDrop = (draggable: MixedDraggable): boolean => {\n    const options = optionsRef.current;\n\n    const allowEventsOnSelf =\n      options.allowDragEventsFromItself ||\n      ref.current !== draggable.ref?.current;\n\n    return !!(\n      draggable?.type &&\n      allowEventsOnSelf &&\n      options.types.includes(draggable.type) &&\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\n    );\n  };\n\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n    }\n  };\n\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    state.dragOverElements.add(e.target as Element);\n    if (state.dragOverElements.size > 1) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      optionsRef.current.onDragEnter?.(draggable);\n\n      clearTimeout(state.dropActivateTimer);\n      if (typeof optionsRef.current.onDropActivate === 'function') {\n        state.dropActivateTimer = setTimeout(() => {\n          if (draggable) {\n            optionsRef.current.onDropActivate?.(draggable);\n          }\n        }, DROP_ACTIVATE_TIMEOUT);\n      }\n    }\n  };\n\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\n    e.stopPropagation();\n\n    // Track all the targets of dragenter events in a set, and remove them\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\n    // We must also remove any elements that are no longer in the DOM, because dragleave\n    // events will never be fired for these. This can happen, for example, with drop\n    // indicators between items, which disappear when the drop target changes.\n    state.dragOverElements.delete(e.target as Element);\n    for (const element of state.dragOverElements) {\n      if (!e.currentTarget.contains(element)) {\n        state.dragOverElements.delete(element);\n      }\n    }\n\n    if (state.dragOverElements.size > 0) {\n      return;\n    }\n\n    const draggable = getDraggable(e);\n    if (draggable && canDrop(draggable)) {\n      fireDragLeave(e);\n      clearTimeout(state.dropActivateTimer);\n    }\n  };\n\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    state.dragOverElements.clear();\n\n    fireDragLeave(e);\n    clearTimeout(state.dropActivateTimer);\n\n    const draggable = getDraggable(e);\n    if (draggable) {\n      optionsRef.current.onDragLeave?.(draggable);\n\n      // drop target does not accept this type of droppable\n      if (!canDrop(draggable)) {\n        if (dragSession.status !== 'inactive') {\n          dragSession.status = 'dropFail';\n        }\n        // drop target accepts this type, but it might still reject the drop in callback\n      } else {\n        // allow callback to mark drop as failed\n        const dropResult = optionsRef.current.onDrop?.(draggable);\n\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\n        if (dragSession.status !== 'inactive') {\n          dragSession.status =\n            dropResult === false ? 'dropFail' : 'dropSuccess';\n        }\n      }\n    }\n  };\n\n  const droppableProps = {\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const draggable = getDraggable(e);\n      if (draggable && canDrop(draggable)) {\n        optionsRef.current.onDragOver?.(draggable, e);\n      }\n    },\n    onDragEnter,\n    onDragLeave,\n    onDrop,\n  };\n\n  return {\n    droppableProps: disabled ? {} : droppableProps,\n  };\n}\n\nfunction getDraggable(\n  e: React.DragEvent<HTMLElement>\n): MixedDraggable | undefined {\n  if (dragSession.dragTargetId != null) {\n    return draggables.get(dragSession.dragTargetId);\n  } else if (e.dataTransfer.types.includes('Files')) {\n    return {\n      type: 'nativeFile',\n      el: null,\n      ref: null,\n      getData: () => {\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\n      },\n    };\n  }\n}\n","import {Permission} from './permission';\nimport {Subscription} from '../billing/subscription';\nimport {Role} from './role';\nimport {SocialProfile} from './social-profile';\nimport {AccessToken} from './access-token';\n\nexport const USER_MODEL = 'user';\n\nexport interface User {\n  id: number;\n  display_name: string;\n  username?: string;\n  first_name?: string;\n  last_name?: string;\n  avatar?: string;\n  email_verified_at: string;\n  permissions?: Permission[];\n  email: string;\n  password: string;\n  language: string;\n  timezone: string;\n  country: string;\n  created_at: string;\n  updated_at: string;\n  subscriptions?: Omit<Subscription, 'user'>[];\n  roles: Role[];\n  social_profiles: SocialProfile[];\n  tokens?: AccessToken[];\n  has_password: boolean;\n  available_space: number | null;\n  unread_notifications_count?: number;\n  card_last_four?: number;\n  card_brand?: string;\n  card_expires?: string;\n  model_type: typeof USER_MODEL;\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const LinkIcon = createSvgIcon(\n  <path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\" />\n, 'LinkOutlined');\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const MoreVertIcon = createSvgIcon(\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\n, 'MoreVertOutlined');\n","/**\n * react-virtual\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\n\n/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction memo(getDeps, fn, opts) {\n  let deps = [];\n  let result;\n  return () => {\n    let depTime;\n    if (opts.key && opts.debug != null && opts.debug()) depTime = Date.now();\n    const newDeps = getDeps();\n    const depsChanged = newDeps.length !== deps.length || newDeps.some((dep, index) => deps[index] !== dep);\n\n    if (!depsChanged) {\n      return result;\n    }\n\n    deps = newDeps;\n    let resultTime;\n    if (opts.key && opts.debug != null && opts.debug()) resultTime = Date.now();\n    result = fn(...newDeps);\n    opts == null ? void 0 : opts.onChange == null ? void 0 : opts.onChange(result);\n\n    if (opts.key && opts.debug != null && opts.debug()) {\n      const depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      const resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      const resultFpsPercentage = resultEndTime / 16;\n\n      const pad = (str, num) => {\n        str = String(str);\n\n        while (str.length < num) {\n          str = ' ' + str;\n        }\n\n        return str;\n      };\n\n      console.info(\"%c\\u23F1 \" + pad(resultEndTime, 5) + \" /\" + pad(depEndTime, 5) + \" ms\", \"\\n            font-size: .6rem;\\n            font-weight: bold;\\n            color: hsl(\" + Math.max(0, Math.min(120 - 120 * resultFpsPercentage, 120)) + \"deg 100% 31%);\", opts == null ? void 0 : opts.key);\n    }\n\n    return result;\n  };\n}\n\n//\nconst defaultKeyExtractor = index => index;\nconst defaultRangeExtractor = range => {\n  const start = Math.max(range.startIndex - range.overscan, 0);\n  const end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  const arr = [];\n\n  for (let i = start; i <= end; i++) {\n    arr.push(i);\n  }\n\n  return arr;\n};\n\nconst memoRectCallback = (instance, cb) => {\n  let prev = {\n    height: -1,\n    width: -1\n  };\n  return rect => {\n    if (instance.options.horizontal ? rect.width !== prev.width : rect.height !== prev.height) {\n      cb(rect);\n    }\n\n    prev = rect;\n  };\n};\n\nconst observeElementRect = (instance, cb) => {\n  const observer = new ResizeObserver(entries => {\n    var _entries$, _entries$2;\n\n    cb({\n      width: (_entries$ = entries[0]) == null ? void 0 : _entries$.contentRect.width,\n      height: (_entries$2 = entries[0]) == null ? void 0 : _entries$2.contentRect.height\n    });\n  });\n\n  if (!instance.scrollElement) {\n    return;\n  }\n\n  cb(instance.scrollElement.getBoundingClientRect());\n  observer.observe(instance.scrollElement);\n  return () => {\n    observer.unobserve(instance.scrollElement);\n  };\n};\nconst observeWindowRect = (instance, cb) => {\n  const memoizedCallback = memoRectCallback(instance, cb);\n\n  const onResize = () => memoizedCallback({\n    width: instance.scrollElement.innerWidth,\n    height: instance.scrollElement.innerHeight\n  });\n\n  if (!instance.scrollElement) {\n    return;\n  }\n\n  onResize();\n  instance.scrollElement.addEventListener('resize', onResize, {\n    capture: false,\n    passive: true\n  });\n  return () => {\n    instance.scrollElement.removeEventListener('resize', onResize);\n  };\n};\nconst scrollProps = {\n  element: ['scrollLeft', 'scrollTop'],\n  window: ['scrollX', 'scrollY']\n};\n\nconst createOffsetObserver = mode => {\n  return (instance, cb) => {\n    if (!instance.scrollElement) {\n      return;\n    }\n\n    const propX = scrollProps[mode][0];\n    const propY = scrollProps[mode][1];\n    let prevX = instance.scrollElement[propX];\n    let prevY = instance.scrollElement[propY];\n\n    const scroll = () => {\n      const offset = instance.scrollElement[instance.options.horizontal ? propX : propY];\n      cb(Math.max(0, offset - instance.options.scrollMargin));\n    };\n\n    scroll();\n\n    const onScroll = e => {\n      const target = e.currentTarget;\n      const scrollX = target[propX];\n      const scrollY = target[propY];\n\n      if (instance.options.horizontal ? prevX - scrollX : prevY - scrollY) {\n        scroll();\n      }\n\n      prevX = scrollX;\n      prevY = scrollY;\n    };\n\n    instance.scrollElement.addEventListener('scroll', onScroll, {\n      capture: false,\n      passive: true\n    });\n    return () => {\n      instance.scrollElement.removeEventListener('scroll', onScroll);\n    };\n  };\n};\n\nconst observeElementOffset = createOffsetObserver('element');\nconst observeWindowOffset = createOffsetObserver('window');\nconst measureElement = (element, instance) => {\n  return Math.round(element.getBoundingClientRect()[instance.options.horizontal ? 'width' : 'height']);\n};\nconst windowScroll = (offset, _ref, instance) => {\n  var _instance$scrollEleme;\n\n  let {\n    canSmooth,\n    sync\n  } = _ref;\n  const toOffset = sync ? offset : offset + instance.options.scrollMargin;\n  (_instance$scrollEleme = instance.scrollElement) == null ? void 0 : _instance$scrollEleme.scrollTo == null ? void 0 : _instance$scrollEleme.scrollTo({\n    [instance.options.horizontal ? 'left' : 'top']: toOffset,\n    behavior: canSmooth ? 'smooth' : undefined\n  });\n};\nconst elementScroll = (offset, _ref2, instance) => {\n  var _instance$scrollEleme2;\n\n  let {\n    canSmooth,\n    sync\n  } = _ref2;\n  const toOffset = sync ? offset : offset + instance.options.scrollMargin;\n  (_instance$scrollEleme2 = instance.scrollElement) == null ? void 0 : _instance$scrollEleme2.scrollTo == null ? void 0 : _instance$scrollEleme2.scrollTo({\n    [instance.options.horizontal ? 'left' : 'top']: toOffset,\n    behavior: canSmooth ? 'smooth' : undefined\n  });\n};\nclass Virtualizer {\n  constructor(_opts) {\n    var _this = this;\n\n    this.unsubs = [];\n    this.scrollElement = null;\n    this.isScrolling = false;\n    this.isScrollingTimeoutId = null;\n    this.measurementsCache = [];\n    this.itemMeasurementsCache = {};\n    this.pendingMeasuredCacheIndexes = [];\n    this.scrollDelta = 0;\n    this.measureElementCache = {};\n\n    this.getResizeObserver = (() => {\n      let _ro = null;\n      return () => {\n        if (_ro) {\n          return _ro;\n        } else if (typeof ResizeObserver !== 'undefined') {\n          return _ro = new ResizeObserver(entries => {\n            entries.forEach(entry => {\n              this._measureElement(entry.target, false);\n            });\n          });\n        } else {\n          return null;\n        }\n      };\n    })();\n\n    this.range = {\n      startIndex: 0,\n      endIndex: 0\n    };\n\n    this.setOptions = opts => {\n      Object.entries(opts).forEach(_ref3 => {\n        let [key, value] = _ref3;\n        if (typeof value === 'undefined') delete opts[key];\n      });\n      this.options = {\n        debug: false,\n        initialOffset: 0,\n        overscan: 1,\n        paddingStart: 0,\n        paddingEnd: 0,\n        scrollPaddingStart: 0,\n        scrollPaddingEnd: 0,\n        horizontal: false,\n        getItemKey: defaultKeyExtractor,\n        rangeExtractor: defaultRangeExtractor,\n        enableSmoothScroll: true,\n        onChange: () => {},\n        measureElement,\n        initialRect: {\n          width: 0,\n          height: 0\n        },\n        scrollMargin: 0,\n        scrollingDelay: 150,\n        indexAttribute: 'data-index',\n        ...opts\n      };\n    };\n\n    this.notify = () => {\n      var _this$options$onChang, _this$options;\n\n      (_this$options$onChang = (_this$options = this.options).onChange) == null ? void 0 : _this$options$onChang.call(_this$options, this);\n    };\n\n    this.cleanup = () => {\n      this.unsubs.filter(Boolean).forEach(d => d());\n      this.unsubs = [];\n      this.scrollElement = null;\n    };\n\n    this._didMount = () => {\n      return () => {\n        var _this$getResizeObserv;\n\n        (_this$getResizeObserv = this.getResizeObserver()) == null ? void 0 : _this$getResizeObserv.disconnect();\n        this.measureElementCache = {};\n        this.cleanup();\n      };\n    };\n\n    this._willUpdate = () => {\n      const scrollElement = this.options.getScrollElement();\n\n      if (this.scrollElement !== scrollElement) {\n        this.cleanup();\n        this.scrollElement = scrollElement;\n\n        this._scrollToOffset(this.scrollOffset, {\n          canSmooth: false,\n          sync: true,\n          requested: false\n        });\n\n        this.unsubs.push(this.options.observeElementRect(this, rect => {\n          this.scrollRect = rect;\n          this.calculateRange();\n        }));\n        this.unsubs.push(this.options.observeElementOffset(this, offset => {\n          if (this.isScrollingTimeoutId !== null) {\n            clearTimeout(this.isScrollingTimeoutId);\n            this.isScrollingTimeoutId = null;\n          }\n\n          if (this.scrollOffset !== offset) {\n            this.scrollOffset = offset;\n            this.isScrolling = true;\n            this.scrollDelta = 0;\n            this.isScrollingTimeoutId = setTimeout(() => {\n              this.isScrollingTimeoutId = null;\n              this.isScrolling = false;\n              this.notify();\n            }, this.options.scrollingDelay);\n          } else {\n            this.isScrolling = false;\n            this.scrollDelta = 0;\n          }\n\n          this.calculateRange();\n        }));\n      } else if (!this.isScrolling) {\n        this.calculateRange();\n      }\n    };\n\n    this.getSize = () => {\n      return this.scrollRect[this.options.horizontal ? 'width' : 'height'];\n    };\n\n    this.getMeasurements = memo(() => [this.options.count, this.options.paddingStart, this.options.getItemKey, this.itemMeasurementsCache], (count, paddingStart, getItemKey, measurementsCache) => {\n      const min = this.pendingMeasuredCacheIndexes.length > 0 ? Math.min(...this.pendingMeasuredCacheIndexes) : 0;\n      this.pendingMeasuredCacheIndexes = [];\n      const measurements = this.measurementsCache.slice(0, min);\n\n      for (let i = min; i < count; i++) {\n        const key = getItemKey(i);\n        const measuredSize = measurementsCache[key];\n        const start = measurements[i - 1] ? measurements[i - 1].end : paddingStart;\n        const size = typeof measuredSize === 'number' ? measuredSize : this.options.estimateSize(i);\n        const end = start + size;\n        measurements[i] = {\n          index: i,\n          start,\n          size,\n          end,\n          key\n        };\n      }\n\n      this.measurementsCache = measurements;\n      return measurements;\n    }, {\n      key: process.env.NODE_ENV !== 'production' && 'getMeasurements',\n      debug: () => this.options.debug\n    });\n    this.calculateRange = memo(() => [this.getMeasurements(), this.getSize(), this.scrollOffset], (measurements, outerSize, scrollOffset) => {\n      const range = calculateRange({\n        measurements,\n        outerSize,\n        scrollOffset\n      });\n\n      if (range.startIndex !== this.range.startIndex || range.endIndex !== this.range.endIndex) {\n        this.range = range;\n        this.notify();\n      }\n\n      return this.range;\n    }, {\n      key: process.env.NODE_ENV !== 'production' && 'calculateRange',\n      debug: () => this.options.debug\n    });\n    this.getIndexes = memo(() => [this.options.rangeExtractor, this.range, this.options.overscan, this.options.count], (rangeExtractor, range, overscan, count) => {\n      return rangeExtractor({ ...range,\n        overscan,\n        count: count\n      });\n    }, {\n      key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n      debug: () => this.options.debug\n    });\n\n    this.indexFromElement = node => {\n      const attributeName = this.options.indexAttribute;\n      const indexStr = node.getAttribute(attributeName);\n\n      if (!indexStr) {\n        console.warn(\"Missing attribute name '\" + attributeName + \"={index}' on measured element.\");\n        return -1;\n      }\n\n      return parseInt(indexStr, 10);\n    };\n\n    this._measureElement = (node, _sync) => {\n      var _this$itemMeasurement;\n\n      const index = this.indexFromElement(node);\n      const item = this.measurementsCache[index];\n\n      if (!item) {\n        return;\n      }\n\n      const prevNode = this.measureElementCache[item.key];\n      const ro = this.getResizeObserver();\n\n      if (!node.isConnected) {\n        if (prevNode) {\n          ro == null ? void 0 : ro.unobserve(prevNode);\n          delete this.measureElementCache[item.key];\n        }\n\n        return;\n      }\n\n      if (!prevNode || prevNode !== node) {\n        if (prevNode) {\n          ro == null ? void 0 : ro.unobserve(prevNode);\n        }\n\n        this.measureElementCache[item.key] = node;\n        ro == null ? void 0 : ro.observe(node);\n      }\n\n      const measuredItemSize = this.options.measureElement(node, this);\n      const itemSize = (_this$itemMeasurement = this.itemMeasurementsCache[item.key]) != null ? _this$itemMeasurement : item.size;\n      const delta = measuredItemSize - itemSize;\n\n      if (delta !== 0) {\n        if (item.start < this.scrollOffset && this.isScrolling && this.destinationOffset === undefined) {\n          if (process.env.NODE_ENV !== 'production' && this.options.debug) {\n            console.info('correction', delta);\n          }\n\n          this.scrollDelta += delta;\n\n          this._scrollToOffset(this.scrollOffset + this.scrollDelta, {\n            canSmooth: false,\n            sync: false,\n            requested: false\n          });\n        }\n\n        this.pendingMeasuredCacheIndexes.push(index);\n        this.itemMeasurementsCache = { ...this.itemMeasurementsCache,\n          [item.key]: measuredItemSize\n        };\n        this.notify();\n      }\n    };\n\n    this.measureElement = node => {\n      if (!node) {\n        return;\n      }\n\n      this._measureElement(node, true);\n    };\n\n    this.getVirtualItems = memo(() => [this.getIndexes(), this.getMeasurements()], (indexes, measurements) => {\n      const virtualItems = [];\n\n      for (let k = 0, len = indexes.length; k < len; k++) {\n        const i = indexes[k];\n        const measurement = measurements[i];\n        virtualItems.push(measurement);\n      }\n\n      return virtualItems;\n    }, {\n      key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n      debug: () => this.options.debug\n    });\n\n    this.scrollToOffset = function (toOffset, _temp) {\n      let {\n        align = 'start',\n        smoothScroll = _this.options.enableSmoothScroll\n      } = _temp === void 0 ? {} : _temp;\n      const offset = _this.scrollOffset;\n\n      const size = _this.getSize();\n\n      if (align === 'auto') {\n        if (toOffset <= offset) {\n          align = 'start';\n        } else if (toOffset >= offset + size) {\n          align = 'end';\n        } else {\n          align = 'start';\n        }\n      }\n\n      const options = {\n        canSmooth: smoothScroll,\n        sync: false,\n        requested: true\n      };\n\n      if (align === 'start') {\n        _this._scrollToOffset(toOffset, options);\n      } else if (align === 'end') {\n        _this._scrollToOffset(toOffset - size, options);\n      } else if (align === 'center') {\n        _this._scrollToOffset(toOffset - size / 2, options);\n      }\n    };\n\n    this.scrollToIndex = function (index, _temp2) {\n      let {\n        align = 'auto',\n        smoothScroll = _this.options.enableSmoothScroll,\n        ...rest\n      } = _temp2 === void 0 ? {} : _temp2;\n\n      const measurements = _this.getMeasurements();\n\n      const offset = _this.scrollOffset;\n\n      const size = _this.getSize();\n\n      const {\n        count\n      } = _this.options;\n      const measurement = measurements[Math.max(0, Math.min(index, count - 1))];\n\n      if (!measurement) {\n        return;\n      }\n\n      if (align === 'auto') {\n        if (measurement.end >= offset + size - _this.options.scrollPaddingEnd) {\n          align = 'end';\n        } else if (measurement.start <= offset + _this.options.scrollPaddingStart) {\n          align = 'start';\n        } else {\n          return;\n        }\n      }\n\n      const toOffset = align === 'end' ? measurement.end + _this.options.scrollPaddingEnd : measurement.start - _this.options.scrollPaddingStart;\n\n      _this.scrollToOffset(toOffset, {\n        align,\n        smoothScroll,\n        ...rest\n      });\n    };\n\n    this.getTotalSize = () => {\n      var _this$getMeasurements;\n\n      return (((_this$getMeasurements = this.getMeasurements()[this.options.count - 1]) == null ? void 0 : _this$getMeasurements.end) || this.options.paddingStart) + this.options.paddingEnd;\n    };\n\n    this._scrollToOffset = (offset, _ref4) => {\n      let {\n        requested,\n        canSmooth,\n        sync\n      } = _ref4;\n      clearTimeout(this.scrollCheckFrame);\n\n      if (requested) {\n        this.destinationOffset = offset;\n      }\n\n      this.options.scrollToFn(offset, {\n        canSmooth,\n        sync\n      }, this);\n      let scrollCheckFrame;\n\n      const check = () => {\n        let lastOffset = this.scrollOffset;\n        this.scrollCheckFrame = scrollCheckFrame = setTimeout(() => {\n          if (this.scrollCheckFrame !== scrollCheckFrame) {\n            return;\n          }\n\n          if (this.scrollOffset === lastOffset) {\n            this.destinationOffset = undefined;\n            return;\n          }\n\n          lastOffset = this.scrollOffset;\n          check();\n        }, 100);\n      };\n\n      check();\n    };\n\n    this.measure = () => {\n      this.itemMeasurementsCache = {};\n      this.notify();\n    };\n\n    this.setOptions(_opts);\n    this.scrollRect = this.options.initialRect;\n    this.scrollOffset = this.options.initialOffset;\n    this.calculateRange();\n  }\n\n}\n\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    const middle = (low + high) / 2 | 0;\n    const currentValue = getCurrentValue(middle);\n\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nfunction calculateRange(_ref5) {\n  let {\n    measurements,\n    outerSize,\n    scrollOffset\n  } = _ref5;\n  const count = measurements.length - 1;\n\n  const getOffset = index => measurements[index].start;\n\n  const startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  let endIndex = startIndex;\n\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n\n  return {\n    startIndex,\n    endIndex\n  };\n}\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n\nfunction useVirtualizerBase(options) {\n  const rerender = React.useReducer(() => ({}), {})[1];\n  const resolvedOptions = { ...options,\n    onChange: instance => {\n      rerender();\n      options.onChange == null ? void 0 : options.onChange(instance);\n    }\n  };\n  const [instance] = React.useState(() => new Virtualizer(resolvedOptions));\n  instance.setOptions(resolvedOptions);\n  React.useEffect(() => {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate();\n  });\n  return instance;\n}\n\nfunction useVirtualizer(options) {\n  return useVirtualizerBase({\n    observeElementRect: observeElementRect,\n    observeElementOffset: observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options\n  });\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase({\n    getScrollElement: () => typeof window !== 'undefined' ? window : null,\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    ...options\n  });\n}\n\nexport { Virtualizer, defaultKeyExtractor, defaultRangeExtractor, elementScroll, measureElement, memo, observeElementOffset, observeElementRect, observeWindowOffset, observeWindowRect, useVirtualizer, useWindowVirtualizer, windowScroll };\n//# sourceMappingURL=index.js.map\n","import React, {useContext} from 'react';\nimport {FileEntry} from '../file-entry';\nimport {useSettings} from '../../core/settings/use-settings';\n\nexport function useFileEntryUrls(\n  entry?: FileEntry,\n  options?: {thumbnail?: boolean; downloadHashes?: string[]}\n): {previewUrl?: string; downloadUrl?: string} {\n  const {base_url} = useSettings();\n  const urlSearchParams = useContext(FileEntryUrlsContext);\n\n  if (!entry) {\n    return {};\n  }\n\n  const urls = {\n    previewUrl: entry.url, // either relative or absolute\n    downloadUrl: `${base_url}/api/v1/file-entries/download/${\n      options?.downloadHashes || entry.hash\n    }`,\n  };\n\n  if (urlSearchParams) {\n    // preview url\n    urls.previewUrl = addParams(\n      urls.previewUrl,\n      {...urlSearchParams, thumbnail: options?.thumbnail ? 'true' : ''},\n      base_url\n    );\n\n    // download url\n    urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\n  }\n\n  return urls;\n}\n\nexport const FileEntryUrlsContext = React.createContext<\n  Record<string, string | number | null | undefined>\n>(null!);\n\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\n  const url = new URL(urlString, baseUrl);\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, value as string);\n  });\n  return url.toString();\n}\n","import React from 'react';\nimport {FileEntry} from '../file-entry';\n\nexport interface FilePreviewContextValue {\n  entries: FileEntry[];\n  activeIndex: number;\n}\n\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\n  null!\n);\n","import {ReactNode, useContext} from 'react';\nimport clsx from 'clsx';\nimport {Button} from '../../../ui/buttons/button';\nimport {downloadFileFromUrl} from '../../utils/download-file-from-url';\nimport {FilePreviewContext} from '../file-preview-context';\nimport {Trans} from '../../../i18n/trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\n\ninterface Props extends FilePreviewProps {\n  message?: ReactNode;\n}\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const content = message || <Trans message=\"No file preview available\" />;\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n  return (\n    <div\n      className={clsx(\n        className,\n        'shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded'\n      )}\n    >\n      <div className=\"text-lg\">{content}</div>\n      {allowDownload && (\n        <div className=\"block mt-20 text-center\">\n          <Button\n            variant=\"flat\"\n            color=\"primary\"\n            onClick={() => {\n              if (downloadUrl) {\n                downloadFileFromUrl(downloadUrl);\n              }\n            }}\n          >\n            <Trans message=\"Download\" />\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import clsx from 'clsx';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function ImageFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <img\n      className={clsx(className, 'shadow')}\n      src={previewUrl}\n      alt={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n    />\n  );\n}\n","import {useEffect, useState} from 'react';\nimport clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '@common/ui/progress/progress-circle';\nimport {useFileEntryUrls} from '@common/uploads/hooks/file-entry-urls';\nimport {useTrans} from '@common/i18n/use-trans';\nimport {Trans} from '@common/i18n/trans';\nimport {apiClient} from '@common/http/query-client';\n\nconst FIVE_MB = 5242880;\n\nexport function TextFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const [tooLarge, setTooLarge] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFailed, setIsFailed] = useState(false);\n  const [contents, setContents] = useState<string | null>(null);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    if (!entry) return;\n    if (!previewUrl) {\n      setIsFailed(true);\n    } else if (entry.file_size! >= FIVE_MB) {\n      setTooLarge(true);\n      setIsLoading(false);\n    } else {\n      getFileContents(previewUrl)\n        .then(response => {\n          setContents(response.data);\n        })\n        .catch(() => {\n          setIsFailed(true);\n        })\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [entry, previewUrl]);\n\n  if (isLoading) {\n    return (\n      <ProgressCircle\n        isIndeterminate\n        aria-label={trans({message: 'Loading file contents'})}\n      />\n    );\n  }\n\n  if (tooLarge) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"This file is too large to preview.\" />}\n      />\n    );\n  }\n\n  if (isFailed) {\n    return (\n      <DefaultFilePreview\n        {...props}\n        message={<Trans message=\"There was an issue previewing this file\" />}\n      />\n    );\n  }\n\n  return (\n    <pre\n      className={clsx(\n        'rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full',\n        className\n      )}\n    >\n      <div className=\"container mx-auto\">{`${contents}`}</div>\n    </pre>\n  );\n}\n\nfunction getFileContents(src: string) {\n  return apiClient.get(src, {\n    responseType: 'text',\n    // required for s3 presigned url to work\n    withCredentials: false,\n    headers: {\n      Accept: 'text/plain',\n    },\n  });\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\n\nexport function VideoFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLVideoElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <video\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      playsInline\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </video>\n  );\n}\n","import {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useEffect, useRef, useState} from 'react';\n\nexport function AudioFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {previewUrl} = useFileEntryUrls(entry);\n  const ref = useRef<HTMLAudioElement>(null);\n  const [mediaInvalid, setMediaInvalid] = useState(false);\n\n  useEffect(() => {\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\n  }, [entry]);\n\n  if (mediaInvalid || !previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <audio\n      className={className}\n      ref={ref}\n      controls\n      controlsList=\"nodownload noremoteplayback\"\n      autoPlay\n    >\n      <source\n        src={previewUrl}\n        type={entry.mime}\n        onError={() => {\n          setMediaInvalid(true);\n        }}\n      />\n    </audio>\n  );\n}\n","import clsx from 'clsx';\nimport {FilePreviewProps} from './file-preview-props';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {DefaultFilePreview} from './default-file-preview';\n\nexport function PdfFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  if (!previewUrl) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <iframe\n      title={trans({\n        message: 'Preview for :name',\n        values: {name: entry.name},\n      })}\n      className={clsx(className, 'w-full h-full')}\n      src={`${previewUrl}#toolbar=0`}\n    />\n  );\n}\n","import clsx from 'clsx';\nimport {useEffect, useRef, useState} from 'react';\nimport {FilePreviewProps} from './file-preview-props';\nimport {DefaultFilePreview} from './default-file-preview';\nimport {ProgressCircle} from '../../../ui/progress/progress-circle';\nimport {FileEntry} from '../../file-entry';\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {apiClient} from '../../../http/query-client';\n\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\n  const {entry, className} = props;\n  const {trans} = useTrans();\n  const ref = useRef<HTMLIFrameElement>(null);\n  const [showDefault, setShowDefault] = useState(false);\n  const timeoutId = useRef<any>();\n  const [isLoading, setIsLoading] = useState(false);\n  const {previewUrl} = useFileEntryUrls(entry);\n\n  useEffect(() => {\n    // Google Docs viewer only supports files up to 25MB\n    if (!previewUrl) {\n      setShowDefault(true);\n    } else if (entry.file_size && entry.file_size > 25000000) {\n      setShowDefault(true);\n    } else if (ref.current) {\n      ref.current.onload = () => {\n        clearTimeout(timeoutId.current);\n        setIsLoading(false);\n      };\n\n      buildPreviewUrl(previewUrl, entry).then(url => {\n        if (ref.current) {\n          ref.current.src = url;\n        }\n      });\n\n      // if preview iframe is not loaded\n      // after 5 seconds, bail and show default preview\n      timeoutId.current = setTimeout(() => {\n        setShowDefault(true);\n      }, 5000);\n    }\n  }, [entry, previewUrl]);\n\n  if (showDefault) {\n    return <DefaultFilePreview {...props} />;\n  }\n\n  return (\n    <div className={clsx(className, 'w-full h-full')}>\n      {isLoading && <ProgressCircle />}\n      <iframe\n        ref={ref}\n        title={trans({\n          message: 'Preview for :name',\n          values: {name: entry.name},\n        })}\n        className={clsx('w-full h-full', isLoading && 'hidden')}\n      />\n    </div>\n  );\n}\n\nasync function buildPreviewUrl(\n  urlString: string,\n  entry: FileEntry\n): Promise<string> {\n  const url = new URL(urlString);\n  // if we're not trying to preview shareable link we will need to generate\n  // preview token, otherwise it won't be publicly accessible\n  if (!url.searchParams.has('shareable_link')) {\n    const {data} = await apiClient.post(\n      `file-entries/${entry.id}/add-preview-token`\n    );\n    url.searchParams.append('preview_token', data.preview_token);\n  }\n\n  return buildOfficeLivePreviewUrl(url);\n}\n\nfunction buildOfficeLivePreviewUrl(url: URL) {\n  // https://docs.google.com/gview?embedded=true&url=\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\n    url.toString()\n  )}`;\n}\n","import {ImageFilePreview} from './file-preview/image-file-preview';\nimport {FileEntry} from '../file-entry';\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\nimport {TextFilePreview} from './file-preview/text-file-preview';\nimport {VideoFilePreview} from './file-preview/video-file-preview';\nimport {AudioFilePreview} from './file-preview/audio-file-preview';\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\n\nexport const AvailablePreviews = {\n  text: TextFilePreview,\n  video: VideoFilePreview,\n  audio: AudioFilePreview,\n  image: ImageFilePreview,\n  pdf: PdfFilePreview,\n  spreadsheet: WordDocumentFilePreview,\n  powerPoint: WordDocumentFilePreview,\n  word: WordDocumentFilePreview,\n  'text/rtf': DefaultFilePreview,\n} as const;\n\nexport function getPreviewForEntry(entry: FileEntry) {\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\n  const type = entry?.type as keyof typeof AvailablePreviews;\n  return (\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\n  );\n}\n","import {createSvgIcon} from '../create-svg-icon';\n\nexport const ChevronLeftIcon = createSvgIcon(\n  <path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />\n, 'ChevronLeftOutlined');\n","import clsx from 'clsx';\nimport {FileTypeIcon} from './file-type-icon';\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\nimport {useTrans} from '../../i18n/use-trans';\nimport {FileEntry} from '../file-entry';\n\nconst TwoMB = 2 * 1024 * 1024;\n\ninterface Props {\n  file: FileEntry;\n  className?: string;\n  iconClassName?: string;\n  showImage?: boolean;\n}\nexport function FileThumbnail({\n  file,\n  className,\n  iconClassName,\n  showImage = true,\n}: Props) {\n  const {trans} = useTrans();\n  const {previewUrl} = useFileEntryUrls(file, {thumbnail: true});\n\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\n    showImage = false;\n  }\n\n  if (showImage && file.type === 'image' && previewUrl) {\n    const alt = trans({\n      message: ':fileName thumbnail',\n      values: {fileName: file.name},\n    });\n    return (\n      <img\n        className={clsx(className, 'object-cover')}\n        src={previewUrl}\n        alt={alt}\n        draggable={false}\n      />\n    );\n  }\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\n}\n","import {AnimatePresence, m} from 'framer-motion';\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\nimport clsx from 'clsx';\nimport {getPreviewForEntry} from './available-previews';\nimport {FileEntry} from '../file-entry';\nimport {FilePreviewContext} from './file-preview-context';\nimport {IconButton} from '../../ui/buttons/icon-button';\nimport {ChevronLeftIcon} from '../../icons/material/ChevronLeft';\nimport {ChevronRightIcon} from '../../icons/material/ChevronRight';\nimport {FileDownloadIcon} from '../../icons/material/FileDownload';\nimport {downloadFileFromUrl} from '../utils/download-file-from-url';\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\nimport {Trans} from '../../i18n/trans';\nimport {Button} from '../../ui/buttons/button';\nimport {CloseIcon} from '../../icons/material/Close';\nimport {FileThumbnail} from '../file-type-icon/file-thumbnail';\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\nimport {KeyboardArrowLeftIcon} from '../../icons/material/KeyboardArrowLeft';\nimport {KeyboardArrowRightIcon} from '../../icons/material/KeyboardArrowRight';\nimport {useControlledState} from '@react-stately/utils';\nimport {opacityAnimation} from '../../ui/animation/opacity-animation';\n\nexport interface FilePreviewContainerProps {\n  entries: FileEntry[];\n  activeIndex?: number;\n  defaultActiveIndex?: number;\n  onActiveIndexChange?: (index: number) => void;\n  onClose?: () => void;\n  showHeader?: boolean;\n  headerActionsLeft?: ReactNode;\n  className?: string;\n  allowDownload?: boolean;\n}\nexport function FilePreviewContainer({\n  entries,\n  onClose,\n  showHeader = true,\n  className,\n  headerActionsLeft,\n  allowDownload = true,\n  ...props\n}: FilePreviewContainerProps) {\n  const isMobile = useMediaQuery('(max-width: 1024px)');\n\n  const [activeIndex, setActiveIndex] = useControlledState(\n    props.activeIndex,\n    props.defaultActiveIndex || 0,\n    props.onActiveIndexChange\n  );\n\n  const activeEntry = entries[activeIndex];\n  const contextValue = useMemo(() => {\n    return {entries, activeIndex};\n  }, [entries, activeIndex]);\n  const Preview = getPreviewForEntry(activeEntry);\n\n  if (!activeEntry) {\n    onClose?.();\n    return null;\n  }\n\n  const canOpenNext = entries.length - 1 > activeIndex;\n  const openNext = () => {\n    setActiveIndex(activeIndex + 1);\n  };\n  const canOpenPrevious = activeIndex > 0;\n  const openPrevious = () => {\n    setActiveIndex(activeIndex - 1);\n  };\n\n  return (\n    <FilePreviewContext.Provider value={contextValue}>\n      {showHeader && (\n        <Header\n          actionsLeft={headerActionsLeft}\n          isMobile={isMobile}\n          onClose={onClose}\n          onNext={canOpenNext ? openNext : undefined}\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\n          allowDownload={allowDownload}\n        />\n      )}\n      <div className={clsx('overflow-hidden relative flex-auto', className)}>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10\"\n            disabled={!canOpenPrevious}\n            onClick={openPrevious}\n          >\n            <KeyboardArrowLeftIcon />\n          </IconButton>\n        )}\n        <AnimatePresence initial={false}>\n          <m.div\n            className=\"absolute inset-0 flex items-center justify-center\"\n            key={activeEntry.id}\n            {...opacityAnimation}\n          >\n            <Preview\n              className=\"max-h-[calc(100%-30px)]\"\n              entry={activeEntry}\n              allowDownload={allowDownload}\n            />\n          </m.div>\n        </AnimatePresence>\n        {isMobile && (\n          <IconButton\n            size=\"lg\"\n            className=\"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10\"\n            disabled={!canOpenNext}\n            onClick={openNext}\n          >\n            <KeyboardArrowRightIcon />\n          </IconButton>\n        )}\n      </div>\n    </FilePreviewContext.Provider>\n  );\n}\n\ninterface HeaderProps {\n  onNext?: () => void;\n  onPrevious?: () => void;\n  onClose?: () => void;\n  isMobile: boolean | null;\n  actionsLeft?: ReactNode;\n  allowDownload?: boolean;\n}\nfunction Header({\n  onNext,\n  onPrevious,\n  onClose,\n  isMobile,\n  actionsLeft,\n  allowDownload,\n}: HeaderProps) {\n  const {entries, activeIndex} = useContext(FilePreviewContext);\n  const activeEntry = entries[activeIndex];\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\n\n  const desktopDownloadButton = (\n    <Button\n      startIcon={<FileDownloadIcon />}\n      variant=\"text\"\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <Trans message=\"Download\" />\n    </Button>\n  );\n\n  const mobileDownloadButton = (\n    <IconButton\n      onClick={() => {\n        if (downloadUrl) {\n          downloadFileFromUrl(downloadUrl);\n        }\n      }}\n    >\n      <FileDownloadIcon />\n    </IconButton>\n  );\n\n  const downloadButton = isMobile\n    ? mobileDownloadButton\n    : desktopDownloadButton;\n\n  return (\n    <div className=\"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted\">\n      <div className=\"flex items-center gap-4 w-1/3 justify-start\">\n        {actionsLeft}\n        {allowDownload ? downloadButton : undefined}\n      </div>\n      <div className=\"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main\">\n        <FileThumbnail\n          file={activeEntry}\n          iconClassName=\"w-16 h-16\"\n          showImage={false}\n        />\n        <div className=\"whitespace-nowrap overflow-hidden overflow-ellipsis\">\n          {activeEntry.name}\n        </div>\n      </div>\n      <div className=\"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap\">\n        {!isMobile && (\n          <Fragment>\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\n              <ChevronLeftIcon />\n            </IconButton>\n            <div>{activeIndex + 1}</div>\n            <div>/</div>\n            <div>{entries.length}</div>\n            <IconButton disabled={!onNext} onClick={onNext}>\n              <ChevronRightIcon />\n            </IconButton>\n            <div className=\"bg-divider w-1 h-24 mx-20\" />\n          </Fragment>\n        )}\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n}\n","import {\n  FilePreviewContainer,\n  FilePreviewContainerProps,\n} from './file-preview-container';\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\n\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\nexport function FilePreviewDialog(props: Props) {\n  return (\n    <Dialog\n      size=\"fullscreenTakeover\"\n      background=\"bg-alt\"\n      className=\"flex flex-col\"\n    >\n      <Content {...props} />\n    </Dialog>\n  );\n}\n\nfunction Content(props: Props) {\n  const {close} = useDialogContext();\n  return <FilePreviewContainer onClose={close} {...props} />;\n}\n","import {\n  BackendFilter,\n  FilterControlType,\n} from '../../datatable/filters/backend-filter';\nimport {\n  CreatedAtFilter,\n  UpdatedAtFilter,\n} from '../../datatable/filters/timestamp-filters';\nimport {message} from '../../i18n/message';\nimport {USER_MODEL} from '../../auth/user';\n\nexport const FILE_ENTRY_TYPE_FILTER = new BackendFilter({\n  type: FilterControlType.Select,\n  key: 'type',\n  label: message('Type'),\n  description: message('Type of the file'),\n  defaultValue: '05',\n  options: [\n    {key: '02', label: message('Text'), value: 'text'},\n    {\n      key: '03',\n      label: message('Audio'),\n      value: 'audio',\n    },\n    {\n      key: '04',\n      label: message('Video'),\n      value: 'video',\n    },\n    {\n      key: '05',\n      label: message('Image'),\n      value: 'image',\n    },\n    {key: '06', label: message('PDF'), value: 'pdf'},\n    {\n      key: '07',\n      label: message('Spreadsheet'),\n      value: 'spreadsheet',\n    },\n    {\n      key: '08',\n      label: message('Word Document'),\n      value: 'word',\n    },\n    {\n      key: '09',\n      label: message('Photoshop'),\n      value: 'photoshop',\n    },\n    {\n      key: '10',\n      label: message('Archive'),\n      value: 'archive',\n    },\n    {\n      key: '11',\n      label: message('Folder'),\n      value: 'folder',\n    },\n  ],\n});\n\nexport const FILE_ENTRY_INDEX_FILTERS: BackendFilter[] = [\n  FILE_ENTRY_TYPE_FILTER,\n  new BackendFilter({\n    type: FilterControlType.Select,\n    key: 'public',\n    label: message('Visibility'),\n    defaultValue: '01',\n    description: message('Whether file is publicly accessible'),\n    options: [\n      {key: '01', label: message('Private'), value: false},\n      {key: '02', label: message('Public'), value: true},\n    ],\n  }),\n  new CreatedAtFilter({\n    description: message('Date file was uploaded'),\n  }),\n  new UpdatedAtFilter({\n    description: message('Date file was last changed'),\n  }),\n  new BackendFilter({\n    type: FilterControlType.SelectModel,\n    model: USER_MODEL,\n    key: 'owner_id',\n    label: message('Uploader'),\n    description: message('User that this file was uploaded by'),\n  }),\n];\n","import {useControlledState} from '@react-stately/utils';\nimport {HTMLAttributes, useCallback, useState} from 'react';\nimport {\n  CalendarDate,\n  DateValue,\n  isSameDay,\n  toCalendarDate,\n  toZoned,\n  ZonedDateTime,\n} from '@internationalized/date';\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport type Granularity = 'day' | 'minute';\n\nexport type DatePickerState = BaseDatePickerState;\n\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\n  timezone: string;\n  granularity: Granularity;\n  selectedValue: T;\n  setSelectedValue: (value: T) => void;\n  calendarIsOpen: boolean;\n  setCalendarIsOpen: (isOpen: boolean) => void;\n  calendarDates: CalendarDate[];\n  setCalendarDates: (dates: CalendarDate[]) => void;\n  dayIsActive: (day: CalendarDate) => boolean;\n  dayIsHighlighted: (day: CalendarDate) => boolean;\n  dayIsRangeStart: (day: CalendarDate) => boolean;\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\n  isPlaceholder: P;\n  setIsPlaceholder: (value: P) => void;\n  clear: () => void;\n  min?: ZonedDateTime;\n  max?: ZonedDateTime;\n  closeDialogOnSelection: boolean;\n  getCellProps: (\n    date: CalendarDate,\n    isSameMonth: boolean\n  ) => HTMLAttributes<HTMLElement>;\n}\n\nexport interface DatePickerValueProps<V, CV = V> {\n  value?: V | null | '';\n  defaultValue?: V | null;\n  onChange?: (value: CV | null) => void;\n  min?: DateValue;\n  max?: DateValue;\n  granularity?: Granularity;\n  closeDialogOnSelection?: boolean;\n}\nexport function useDatePickerState(\n  props: DatePickerValueProps<ZonedDateTime>\n): BaseDatePickerState {\n  const now = useCurrentDateTime();\n  const [isPlaceholder, setIsPlaceholder] = useState(\n    !props.value && !props.defaultValue\n  );\n\n  // if user clears the date, we will want to still keep an\n  // instance internally, but return null via \"onChange\" callback\n  const setStateValue = props.onChange;\n  const [internalValue, setInternalValue] = useControlledState(\n    props.value || now,\n    props.defaultValue || now,\n    setStateValue\n  );\n\n  const {\n    min,\n    max,\n    granularity,\n    timezone,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    closeDialogOnSelection,\n  } = useBaseDatePickerState(internalValue, props);\n\n  const clear = useCallback(() => {\n    setIsPlaceholder(true);\n    setInternalValue(now);\n    setStateValue?.(null);\n    setCalendarIsOpen(false);\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\n\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\n    return [toCalendarDate(internalValue)];\n  });\n\n  const setSelectedValue = useCallback(\n    (newValue: DateValue) => {\n      if (min && newValue.compare(min) < 0) {\n        newValue = min;\n      } else if (max && newValue.compare(max) > 0) {\n        newValue = max;\n      }\n\n      // preserve time\n      const value = internalValue\n        ? internalValue.set(newValue)\n        : toZoned(newValue, timezone);\n      setInternalValue(value);\n      setCalendarDates([toCalendarDate(value)]);\n      setIsPlaceholder(false);\n    },\n    [setInternalValue, min, max, internalValue, timezone]\n  );\n\n  const dayIsActive = useCallback(\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\n    [internalValue, isPlaceholder]\n  );\n\n  const getCellProps = useCallback(\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\n      return {\n        onClick: () => {\n          setSelectedValue?.(date);\n          if (closeDialogOnSelection) {\n            setCalendarIsOpen?.(false);\n          }\n        },\n      };\n    },\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection]\n  );\n\n  return {\n    selectedValue: internalValue,\n    setSelectedValue: setInternalValue,\n    calendarIsOpen,\n    setCalendarIsOpen,\n    dayIsActive,\n    dayIsHighlighted: () => false,\n    dayIsRangeStart: () => false,\n    dayIsRangeEnd: () => false,\n    getCellProps,\n    calendarDates,\n    setCalendarDates,\n    isPlaceholder,\n    clear,\n    setIsPlaceholder,\n    min,\n    max,\n    granularity,\n    timezone,\n    closeDialogOnSelection,\n  };\n}\n","import React, {\n  ComponentPropsWithoutRef,\n  Fragment,\n  MouseEvent,\n  useRef,\n} from 'react';\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\nimport {useController} from 'react-hook-form';\nimport {mergeProps} from '@react-aria/utils';\nimport {\n  DatePickerValueProps,\n  useDatePickerState,\n} from './use-date-picker-state';\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\nimport {Calendar} from '../calendar/calendar';\nimport {\n  DatePickerField,\n  DatePickerFieldProps,\n} from '../date-range-picker/date-picker-field';\nimport {DateSegmentList} from '../segments/date-segment-list';\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\nimport {useTrans} from '@common/i18n/use-trans';\nimport clsx from 'clsx';\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\nimport {Button} from '@common/ui/buttons/button';\nimport {Trans} from '@common/i18n/trans';\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\n\nexport interface DatePickerProps\n  extends Omit<DatePickerFieldProps, 'children'>,\n    DatePickerValueProps<ZonedDateTime> {}\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\n  const state = useDatePickerState(props);\n  const inputRef = useRef<HTMLDivElement>(null);\n  const now = useCurrentDateTime();\n\n  const footer = showCalendarFooter && (\n    <DialogFooter\n      padding=\"px-14 pb-14\"\n      startAction={\n        <Button\n          disabled={state.isPlaceholder}\n          variant=\"text\"\n          color=\"primary\"\n          onClick={() => {\n            state.clear();\n          }}\n        >\n          <Trans message=\"Clear\" />\n        </Button>\n      }\n    >\n      <Button\n        variant=\"text\"\n        color=\"primary\"\n        onClick={() => {\n          state.setSelectedValue(now);\n          state.setCalendarIsOpen(false);\n        }}\n      >\n        <Trans message=\"Today\" />\n      </Button>\n    </DialogFooter>\n  );\n\n  const dialog = (\n    <DialogTrigger\n      offset={8}\n      placement=\"bottom-start\"\n      isOpen={state.calendarIsOpen}\n      onOpenChange={state.setCalendarIsOpen}\n      type=\"popover\"\n      triggerRef={inputRef}\n      returnFocusToTrigger={false}\n      moveFocusToDialog={false}\n    >\n      <Dialog size=\"auto\">\n        <DialogBody\n          className=\"flex items-start gap-40\"\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\n        >\n          <Calendar state={state} visibleMonths={1} />\n        </DialogBody>\n        {footer}\n      </Dialog>\n    </DialogTrigger>\n  );\n\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\n    onClick: e => {\n      e.stopPropagation();\n      e.preventDefault();\n      if (!isHourSegment(e)) {\n        state.setCalendarIsOpen(true);\n      } else {\n        state.setCalendarIsOpen(false);\n      }\n    },\n  };\n\n  return (\n    <Fragment>\n      <DatePickerField\n        ref={inputRef}\n        wrapperProps={openOnClick}\n        endAdornment={\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\n        }\n        {...props}\n      >\n        <DateSegmentList\n          segmentProps={openOnClick}\n          state={state}\n          value={state.selectedValue}\n          onChange={state.setSelectedValue}\n          isPlaceholder={state.isPlaceholder}\n        />\n      </DatePickerField>\n      {dialog}\n    </Fragment>\n  );\n}\n\ninterface FormDatePickerProps extends DatePickerProps {\n  name: string;\n}\nexport function FormDatePicker(props: FormDatePickerProps) {\n  const {min, max} = props;\n  const {trans} = useTrans();\n  const {format} = useDateFormatter();\n  const {\n    field: {onChange, onBlur, value = null, ref},\n    fieldState: {invalid, error},\n  } = useController({\n    name: props.name,\n    rules: {\n      validate: v => {\n        if (!v) return;\n        const date = parseAbsoluteToLocal(v);\n        if (min && date.compare(min) < 0) {\n          return trans({\n            message: 'Enter a date after :date',\n            values: {date: format(v)},\n          });\n        }\n        if (max && date.compare(max) > 0) {\n          return trans({\n            message: 'Enter a date before :date',\n            values: {date: format(v)},\n          });\n        }\n      },\n    },\n  });\n\n  const parsedValue: null | ZonedDateTime = value\n    ? parseAbsoluteToLocal(value)\n    : null;\n\n  const formProps: Partial<DatePickerProps> = {\n    onChange: e => {\n      onChange(e ? e.toAbsoluteString() : e);\n    },\n    onBlur,\n    value: parsedValue,\n    invalid,\n    errorMessage: error?.message,\n    inputRef: ref,\n  };\n\n  return <DatePicker {...mergeProps(formProps, props)} />;\n}\n\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\n  return ['hour', 'minute', 'dayPeriod'].includes(\n    (e.currentTarget as HTMLElement).ariaLabel || ''\n  );\n}\n"],"names":["DashboardLayoutContext","createContext","useBlockBodyOverflow","useEffect","DashboardLayout","children","leftSidenavStatus","leftSidenav","onLeftSidenavChange","rightSidenavStatus","rightSidenav","initialRightSidenavStatus","onRightSidenavChange","name","leftSidenavCanBeCompact","height","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","getFromLocalStorage","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","shouldShowUnderlay","_jsx","isMobileMode","clsx","AnimatePresence","Underlay","DashboardContent","cloneElement","className","props","DashboardSidenav","position","size","mode","overlayPosition","display","forceClosed","useContext","isOverlayMode","variants","open","width","compact","closed","transitionEnd","sizeClassName","getSize","m","type","duration","e","target","closest","isCompactMode","MenuOpenIcon","createSvgIcon","DashboardNavbar","hideToggleButton","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","Navbar","IconButton","undefined","BackendFilter","options","__publicField","FilterOperator","FilterControlType","startOfDay","date","endOfDay","getUserTimezone","defaultTimezone","getBootstrapData","preferredTimezone","_a","getLocalTimeZone","Now","now","locale","DateRangePresets","message","startOfWeek","endOfWeek","startOfYear","endOfYear","DateRangeIcon","Input","React","forwardRef","ref","inputProps","wrapperProps","autoFocus","style","onClick","FocusScope","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","focusRef","labelElementType","wrapper","disabled","Field","mergeProps","current","contains","relatedTarget","createFocusManager","focusFirst","input","getDefaultGranularity","CalendarDate","dateIsInvalid","min","max","useBaseDatePickerState","selectedDate","timezone","useUserTimezone","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","granularity","toZoned","useCurrentDateTime","useDateRangePickerState","isPlaceholder","setIsPlaceholder","_b","setStateValue","internalValue","setInternalValue","completeRange","clear","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","range","start","end","maxDate","startMax","minDate","endMin","setSelectedValue","newRange","value","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate","startOfMonth","endOfMonth","ArrowRightAltIcon","adjustSegment","part","amount","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","onChange","state","useIsMobileMediaQuery","enteredKeys","useRef","localeCode","useSelectedLocale","focusManager","useFocusManager","formatter","useDateFormatter","timeZone","parser","NumberParser","maximumFractionDigits","setSegmentValue","newValue","resolvedOptions","adjustSegmentValue","backspace","isValidPartialNumber","text","slice","parsed","parse","length","today","onKeyDown","ctrlKey","metaKey","shiftKey","altKey","key","preventDefault","stopPropagation","focusPrevious","focusNext","requestSubmit","maxValue","minValue","onInput","amPmFormatter","hour","hour12","am","amDate","Date","setHours","formatToParts","find","pm","pmDate","toLowerCase","startsWith","numberValue","allowsZero","hourCycle","Number","isNaN","shouldSetValue","String","spinButtonProps","tabIndex","onFocus","scrollIntoView","block","padStart","minLength","LiteralDateSegment","pointerType","from","getSegmentLimits","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","memoOptions","year","month","minute","dateValue","toDate","segments","map","limits","textValue","placeholder","index","KeyboardArrowLeftIcon","KeyboardArrowRightIcon","CalendarCell","currentMonth","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","isDisabled","calendar","getDaysInMonth","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","CalendarMonthHeader","_jsxs","WeekdayHeader","Array","keys","weekIndex","dayIndex","add","weeks","days","shiftCalendars","direction","count","newDates","months","subtract","monthFormatter","era","identifier","isBackwardDisabled","isForwardDisabled","format","dayFormatter","weekday","dateDay","Calendar","visibleMonths","_Fragment","FormattedDateTimeRange","memo","preset","dates","useSettings","DateFormatPresets","formatRange","castToDate","Fragment","shallowEqual","parseAbsolute","List","padding","dataTestId","ListItem","onSelected","borderRadius","listItemProps","isSelectable","setIsActive","focusLast","ListItemBase","matches","DatePresetList","onPresetSelected","selectedValue","getRangeValue","Trans","label","useIsTabletMediaQuery","DateRangeDialog","showInlineDatePickerField","isTablet","close","useDialogContext","initialStateRef","hasPlaceholder","footer","DialogFooter","dateStyle","Button","Dialog","DialogBody","Calendars","overflow","InlineDatePickerField","DateRangePicker","hideCalendarIcon","dialog","DialogTrigger","openOnClick","isHourSegment","includes","currentTarget","ariaLabel","FormDateRangePicker","field","fieldState","invalid","error","useController","formProps","dateRangeToAbsoluteRange","absoluteRangeToDateRange","errorMessage","dateRange","parseAbsoluteToLocal","absoluteRange","toAbsoluteString","TimestampFilter","CreatedAtFilter","UpdatedAtFilter","Avatar","circle","src","link","fallback","renderedAvatar","AvatarPlaceholderIcon","Tooltip","getSizeClassName","Link","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","encodeBackendFilters","filters","item","transformValue","fm","filterConfig","f","option","o","useBackendFilterUrlParams","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","a","b","getDecodedWithoutKeys","values","newFilters","replaceAll","filterValues","remove","cellStyle","isRowHeader","column","finalWidth","userPadding","justify","rowStyle","isHeader","isSelected","enableSelection","isDarkMode","hideBorder","isCtrlKeyPressed","isMac","useGridNavigation","cellCount","rowCount","focusSiblingCell","focusFirstElementAfterGrid","operations","grid","currentCell","row","rowIndex","cellIndex","rowOpCount","_c","_d","_e","cellOpCount","_g","_f","_h","_i","nextCell","nextFocusableElement","getFocusableTreeWalker","walker","next","last","focusWithoutScrolling","TableContext","CheckboxCell","selectedRows","toggleRow","selectionStyle","Checkbox","id","TableCell","rowIsHovered","columns","rowContext","isHovered","body","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","onPress","onLongPress","addGlobalListener","removeGlobalListener","useGlobalListeners","onPointerDown","onPointerMove","onPointerUp","deltaX","deltaY","longPressTriggered","createEventHandler","isCtrlOrShiftPressed","interactableElements","TableRow","renderAs","selectRow","onAction","selectRowOnContextMenu","isTouchDevice","useIsDarkMode","isRowSelected","setIsHovered","clickedOnInteractable","join","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","tableRowProps","onDoubleClick","onContextMenu","onPointerEnter","onPointerLeave","RowElement","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","enableSorting","sortingKey","allowSorting","allowsSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","visible","opacity","y","hidden","hideHeader","header","SelectAllCell","trans","useTrans","data","onSelectionChange","allRowsSelected","someRowsSelected","d","Table","hideHeaderRow","propsSelectedRows","defaultSelectedRows","propsDefaultSelectedRows","propsOnSelectionChange","propsSortDescriptor","propsOnSortChange","onDelete","ariaLabelledBy","renderRowAs","tableBody","meta","tableRef","propsTableRef","closeOnInteractOutside","newValues","push","indexOf","splice","merge","filter","contextValue","navProps","headerRow","columnIndex","rowRenderer","BasicTableBody","useInteractOutside","onInteractOutside","SearchIcon","SelectFilterPanel","FormSelect","Item","DateFilterPanel","defaultEndpoint","model","prefix","useNormalizedModels","queryParams","queryOptions","userEndpoint","endpoint","useQuery","fetchUsers","params","apiClient","r","buildEndpoint","modelName","modelId","useNormalizedModel","fetchModel","NormalizedModelField","modelType","defaultValue","description","openMenuOnFocus","customEndpoint","inputValue","setInputValue","query","SelectedModelPreview","requestAnimationFrame","focus","ComboBox","isFetching","results","image","onEditClick","isLoading","LoadingSkeleton","opacityAnimation","EditIcon","Skeleton","FormNormalizedModelField","NormalizedModelFilterPanel","FilterOperatorNames","InputFilterPanel","operators","operator","FormTextField","inputType","FilterListTriggerButton","isInactive","InactiveFilterButton","ActiveFilterButton","KeyboardArrowDownIcon","isBoolean","BooleanToggle","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","form","useForm","defaultValues","formId","DialogHeader","Form","formValue","FilterListControl","DatePicker","DatePickerControl","BooleanToggleControl","Select","SelectControl","InputControl","SelectModel","SelectModelControl","valueLabel","operatorLabel","skeleton","modelPreview","FilterList","handleValueChange","payload","defaultOperator","CloseIcon","valueKey","AddIcon","FileDownloadIcon","downloadFileFromUrl","url","ChipList","color","radius","selectable","Children","chip","isValidElement","stringToChipValue","ChipFieldInner","fieldRef","displayWith","v","validateWith","suggestions","onInputValueChange","onItemSelected","onOpenChange","chipSize","showEmptyMessage","propsValue","propsOnChange","isAsync","allowCustomValue","showDropdownArrow","onChipClick","inputFieldProps","flexibleHeight","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","loadingIndicator","ProgressCircle","dropdownArrow","endAdornment","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","removeItem","i","findIndex","cr","newItems","Chip","tabbable","setChips","chips","inputClassName","addItems","listbox","useListbox","clearInputOnItemSelection","isOpen","selectionMode","role","virtualFocus","handleItemSelection","activeIndex","setActiveIndex","setIsOpen","refs","listboxId","collection","onInputChange","useLayoutEffect","reference","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","Listbox","Popover","onPaste","emails","clipboardData","getData","match","selection","window","getSelection","rangeCount","deleteFromDocument","email","autoComplete","autoCorrect","spellCheck","selectionStart","mixedValueToChipValue","propsDefaultValue","handleChange","ChipField","Switch","useAutoFocus","descriptionId","useId","checked","font","FormSwitch","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","activeInteraction","setActiveInteraction","domRectToObj","updateRects","targets","observer","entries","entry","left","top","useDraggable","preview","hidePreview","dragHandleRef","removeAllGlobalListeners","optionsRef","notifyMonitors","callback","monitor","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","UploadedFile","getEntries","file","reader","resolve","reject","getEntryFile","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","element","dropResult","USER_MODEL","LinkIcon","MoreVertIcon","getDeps","fn","opts","deps","result","depTime","newDeps","dep","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","str","num","defaultKeyExtractor","defaultRangeExtractor","arr","observeElementRect","instance","cb","_entries$","_entries$2","scrollProps","createOffsetObserver","propX","propY","prevX","prevY","scroll","offset","onScroll","scrollX","scrollY","observeElementOffset","measureElement","elementScroll","_ref2","_instance$scrollEleme2","canSmooth","sync","toOffset","Virtualizer","_opts","_this","_ro","_ref3","_this$options$onChang","_this$options","_this$getResizeObserv","scrollElement","paddingStart","getItemKey","measurementsCache","measurements","measuredSize","outerSize","scrollOffset","calculateRange","rangeExtractor","overscan","attributeName","indexStr","_sync","_this$itemMeasurement","prevNode","ro","measuredItemSize","itemSize","delta","indexes","virtualItems","k","len","measurement","_temp","align","smoothScroll","_temp2","rest","_this$getMeasurements","_ref4","requested","scrollCheckFrame","check","lastOffset","findNearestBinarySearch","low","high","getCurrentValue","middle","currentValue","_ref5","startIndex","endIndex","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","rerender","React.useReducer","React.useState","useVirtualizer","useFileEntryUrls","base_url","urlSearchParams","FileEntryUrlsContext","urls","addParams","urlString","baseUrl","FilePreviewContext","DefaultFilePreview","allowDownload","activeEntry","content","downloadUrl","ImageFilePreview","previewUrl","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","setIsLoading","isFailed","setIsFailed","contents","setContents","file_size","then","response","catch","finally","getFileContents","get","responseType","withCredentials","headers","Accept","VideoFilePreview","mediaInvalid","setMediaInvalid","canPlayType","mime","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","timeoutId","onload","clearTimeout","buildPreviewUrl","setTimeout","URL","has","post","append","preview_token","buildOfficeLivePreviewUrl","encodeURIComponent","toString","AvailablePreviews","getPreviewForEntry","ChevronLeftIcon","TwoMB","FileThumbnail","iconClassName","showImage","thumbnail","alt","fileName","FileTypeIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","defaultActiveIndex","onActiveIndexChange","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","onNext","onPrevious","actionsLeft","ChevronRightIcon","FilePreviewDialog","Content","FILE_ENTRY_TYPE_FILTER","FILE_ENTRY_INDEX_FILTERS","useDatePickerState","showCalendarFooter","FormDatePicker","rules","validate","compare","parsedValue"],"mappings":"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"}